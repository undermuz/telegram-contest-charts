!function(t){var e={};function i(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=32)}([function(t,e){t.exports=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,i){var a=i(0);t.exports=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){a(t,e,i[e])})}return t}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function i(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}t.exports=function(t,e,a){return e&&i(t.prototype,e),a&&i(t,a),t}},function(t,e,i){t.exports={canvas_wrapper:"canvas_wrapper",canvasWrapper:"canvas_wrapper",canvas__show_info:"canvas__show_info",canvasShowInfo:"canvas__show_info",canvas__show_info__wrapper:"canvas__show_info__wrapper",canvasShowInfoWrapper:"canvas__show_info__wrapper",mode_night:"mode_night",modeNight:"mode_night",canvas__show_info__title:"canvas__show_info__title",canvasShowInfoTitle:"canvas__show_info__title",canvas__show_info__title__value:"canvas__show_info__title__value",canvasShowInfoTitleValue:"canvas__show_info__title__value",canvas__show_info__title__zoom:"canvas__show_info__title__zoom",canvasShowInfoTitleZoom:"canvas__show_info__title__zoom",canvas__show_info__title__zoom__icon:"canvas__show_info__title__zoom__icon",canvasShowInfoTitleZoomIcon:"canvas__show_info__title__zoom__icon",canvas__show_info__rows:"canvas__show_info__rows",canvasShowInfoRows:"canvas__show_info__rows",canvas__show_info__row__item:"canvas__show_info__row__item",canvasShowInfoRowItem:"canvas__show_info__row__item",canvas__show_info__row__item__percent:"canvas__show_info__row__item__percent",canvasShowInfoRowItemPercent:"canvas__show_info__row__item__percent",canvas__show_info__row__item__name:"canvas__show_info__row__item__name",canvasShowInfoRowItemName:"canvas__show_info__row__item__name",canvas__show_info__row__item__value:"canvas__show_info__row__item__value",canvasShowInfoRowItemValue:"canvas__show_info__row__item__value",canvas__show_info__row__item_with_percent:"canvas__show_info__row__item_with_percent",canvasShowInfoRowItemWithPercent:"canvas__show_info__row__item_with_percent",canvas_wrapper__x_labels_wrapper:"canvas_wrapper__x_labels_wrapper",canvasWrapperXLabelsWrapper:"canvas_wrapper__x_labels_wrapper",canvas_wrapper__x_labels_wrapper__item:"canvas_wrapper__x_labels_wrapper__item",canvasWrapperXLabelsWrapperItem:"canvas_wrapper__x_labels_wrapper__item"}},function(t,e,i){var a=i(27),n=i(1);t.exports=function(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?n(t):e}},function(t,e){function i(e){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},i(e)}t.exports=i},function(t,e,i){var a=i(28);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}},function(t,e,i){t.exports={app:"app",mode_night:"mode_night",modeNight:"mode_night",charts:"charts",charts__header:"charts__header",chartsHeader:"charts__header",chart_title:"chart_title",chartTitle:"chart_title",color__switcher:"color__switcher",colorSwitcher:"color__switcher",color__switcher__item:"color__switcher__item",colorSwitcherItem:"color__switcher__item",charts__title_wrapper:"charts__title_wrapper",chartsTitleWrapper:"charts__title_wrapper",charts__zoom_out:"charts__zoom_out",chartsZoomOut:"charts__zoom_out",charts__zoom_out__show:"charts__zoom_out__show",chartsZoomOutShow:"charts__zoom_out__show",charts__zoom_out__icon:"charts__zoom_out__icon",chartsZoomOutIcon:"charts__zoom_out__icon",charts__zoom_out__text:"charts__zoom_out__text",chartsZoomOutText:"charts__zoom_out__text",charts__dates:"charts__dates",chartsDates:"charts__dates"}},function(t,e,i){t.exports=i(26)},function(t,e,i){t.exports={line__switchers:"line__switchers",lineSwitchers:"line__switchers",line__switchers__item:"line__switchers__item",lineSwitchersItem:"line__switchers__item",line__switchers__item_active:"line__switchers__item_active",lineSwitchersItemActive:"line__switchers__item_active",mode_night:"mode_night",modeNight:"mode_night",line__switchers__item__check:"line__switchers__item__check",lineSwitchersItemCheck:"line__switchers__item__check",line__switchers__item__check__circle_blank:"line__switchers__item__check__circle_blank",lineSwitchersItemCheckCircleBlank:"line__switchers__item__check__circle_blank",line__switchers__item__check__icon:"line__switchers__item__check__icon",lineSwitchersItemCheckIcon:"line__switchers__item__check__icon",line__switchers__item__label:"line__switchers__item__label",lineSwitchersItemLabel:"line__switchers__item__label",line__switchers__item__tap_indicator:"line__switchers__item__tap_indicator",lineSwitchersItemTapIndicator:"line__switchers__item__tap_indicator",line__switchers__item__touching:"line__switchers__item__touching",lineSwitchersItemTouching:"line__switchers__item__touching"}},function(t,e,i){t.exports={charts__minimap_wrapper:"charts__minimap_wrapper",chartsMinimapWrapper:"charts__minimap_wrapper",minimap__canvas_wrapper:"minimap__canvas_wrapper",minimapCanvasWrapper:"minimap__canvas_wrapper",minimap:"minimap",minimap__zone:"minimap__zone",minimapZone:"minimap__zone",minimap__left_zone:"minimap__left_zone",minimapLeftZone:"minimap__left_zone",minimap__right_zone:"minimap__right_zone",minimapRightZone:"minimap__right_zone",minimap__left_size_zone:"minimap__left_size_zone",minimapLeftSizeZone:"minimap__left_size_zone",minimap__right_size_zone:"minimap__right_size_zone",minimapRightSizeZone:"minimap__right_size_zone",mode_night:"mode_night",modeNight:"mode_night",minimap__size_zone__helper:"minimap__size_zone__helper",minimapSizeZoneHelper:"minimap__size_zone__helper",minimap__size_zone__helper__line:"minimap__size_zone__helper__line",minimapSizeZoneHelperLine:"minimap__size_zone__helper__line",app4:"app4"}},function(t,e,i){var a=i(29),n=i(30),o=i(31);t.exports=function(t,e){return a(t)||n(t,e)||o()}},function(t,e){function i(t,e,i,a,n,o,r){try{var s=t[o](r),c=s.value}catch(t){return void i(t)}s.done?e(c):Promise.resolve(c).then(a,n)}t.exports=function(t){return function(){var e=this,a=arguments;return new Promise(function(n,o){var r=t.apply(e,a);function s(t){i(r,n,o,s,c,"next",t)}function c(t){i(r,n,o,s,c,"throw",t)}s(void 0)})}}},function(t,e,i){var a=i(23),n=i(24),o=i(25);t.exports=function(t){return a(t)||n(t)||o()}},function(t,e,i){t.exports={dates_range:"dates_range",datesRange:"dates_range",mode_night:"mode_night",modeNight:"mode_night",dates_range__item:"dates_range__item",datesRangeItem:"dates_range__item",dates_range__item__year:"dates_range__item__year",datesRangeItemYear:"dates_range__item__year",dates_range__item__month:"dates_range__item__month",datesRangeItemMonth:"dates_range__item__month",dates_range__item__day:"dates_range__item__day",datesRangeItemDay:"dates_range__item__day"}},function(t,e,i){t.exports={canvas_wrapper__bar_chart:"canvas_wrapper__bar_chart",canvasWrapperBarChart:"canvas_wrapper__bar_chart",canvas_wrapper__bar_chart__item:"canvas_wrapper__bar_chart__item",canvasWrapperBarChartItem:"canvas_wrapper__bar_chart__item"}},function(t,e,i){t.exports=i.p+"images/9220a51ecfe052627bcc2a438c5ace20.svg"},function(t,e,i){t.exports=i.p+"images/92680f0a2c2bc2e52a2b62cf576a7db7.svg"},function(t,e,i){t.exports=i.p+"images/505a4dc56acf8da7c358fbea5d7b5f2a.svg"},function(t,e,i){},function(t,e,i){t.exports={chromeframe:"chromeframe"}},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e,i){var a=function(t){"use strict";var e,i=Object.prototype,a=i.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function c(t,e,i,a){var n=e&&e.prototype instanceof v?e:v,o=Object.create(n.prototype),r=new z(a||[]);return o._invoke=function(t,e,i){var a=h;return function(n,o){if(a===u)throw new Error("Generator is already running");if(a===p){if("throw"===n)throw o;return D()}for(i.method=n,i.arg=o;;){var r=i.delegate;if(r){var s=M(r,i);if(s){if(s===f)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===h)throw a=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=u;var c=l(t,e,i);if("normal"===c.type){if(a=i.done?p:d,c.arg===f)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(a=p,i.method="throw",i.arg=c.arg)}}}(t,i,r),o}function l(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h="suspendedStart",d="suspendedYield",u="executing",p="completed",f={};function v(){}function m(){}function _(){}var y={};y[o]=function(){return this};var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==i&&a.call(w,o)&&(y=w);var b=_.prototype=v.prototype=Object.create(y);function x(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function S(t){var e;this._invoke=function(i,n){function o(){return new Promise(function(e,o){!function e(i,n,o,r){var s=l(t[i],t,n);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==typeof h&&a.call(h,"__await")?Promise.resolve(h.__await).then(function(t){e("next",t,o,r)},function(t){e("throw",t,o,r)}):Promise.resolve(h).then(function(t){c.value=t,o(c)},function(t){return e("throw",t,o,r)})}r(s.arg)}(i,n,e,o)})}return e=e?e.then(o,o):o()}}function M(t,i){var a=t.iterator[i.method];if(a===e){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=e,M(t,i),"throw"===i.method))return f;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(a,t.iterator,i.arg);if("throw"===n.type)return i.method="throw",i.arg=n.arg,i.delegate=null,f;var o=n.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,f):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function z(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function O(t){if(t){var i=t[o];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function i(){for(;++n<t.length;)if(a.call(t,n))return i.value=t[n],i.done=!1,i;return i.value=e,i.done=!0,i};return r.next=r}}return{next:D}}function D(){return{value:e,done:!0}}return m.prototype=b.constructor=_,_.constructor=m,_[s]=m.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},x(S.prototype),S.prototype[r]=function(){return this},t.AsyncIterator=S,t.async=function(e,i,a,n){var o=new S(c(e,i,a,n));return t.isGeneratorFunction(i)?o:o.next().then(function(t){return t.done?t.value:o.next()})},x(b),b[s]="Generator",b[o]=function(){return this},b.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var a=e.pop();if(a in t)return i.value=a,i.done=!1,i}return i.done=!0,i}},t.values=O,z.prototype={constructor:z,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var i in this)"t"===i.charAt(0)&&a.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function n(a,n){return s.type="throw",s.arg=t,i.next=a,n&&(i.method="next",i.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],s=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var c=a.call(r,"catchLoc"),l=a.call(r,"finallyLoc");if(c&&l){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=t,r.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),L(i),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var n=a.arg;L(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,a){return this.delegate={iterator:O(t),resultName:i,nextLoc:a},"next"===this.method&&(this.arg=e),f}},t}(t.exports);try{regeneratorRuntime=a}catch(t){Function("r","regeneratorRuntime = r")(a)}},function(t,e){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(e){return"function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?t.exports=a=function(t){return i(t)}:t.exports=a=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":i(t)},a(e)}t.exports=a},function(t,e){function i(e,a){return t.exports=i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(e,a)}t.exports=i},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){var i=[],a=!0,n=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(a=(r=s.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){n=!0,o=t}finally{try{a||null==s.return||s.return()}finally{if(n)throw o}}return i}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e,i){"use strict";i.r(e);i(21),i(22);var a=i(15),n=i.n(a),o=i(10),r=i.n(o),s=i(2),c=i.n(s),l=i(14),h=i.n(l),d=i(1),u=i.n(d),p=i(3),f=i.n(p),v=i(4),m=i.n(v),_=i(6),y=i.n(_),g=i(7),w=i.n(g),b=i(8),x=i.n(b),S=i(0),M=i.n(S),k=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=document.createElement(t),a=Object.keys(e),n=function(t){var n=a[t],o=e[n];if("className"===n)o&&o.constructor===Array?o.forEach(function(t){return i.classList.add(t)}):i.classList.add(o);else if("style"===n)i.setAttribute("style",o);else if("on"===n.substr(0,2))i.addEventListener(n.substr(2).toLocaleLowerCase(),o);else if("children"===n)if(o.constructor===Array)for(var r=0;r<o.length;r+=1)i.appendChild(o[r]);else i.appendChild(o);else if("text"===n)i.innerText=o;else if("data"===n){Object.keys(o).forEach(function(t){i.dataset[t]=o[t]})}else i.setAttribute(n,o)},o=0;o<a.length;o+=1)n(o);return i},L=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f()(this,t),M()(this,"state",{}),M()(this,"props",{}),M()(this,"node",null),M()(this,"setState",function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=c()({},e.state);e.state=c()({},e.state,t),e.componentDidUpdate(e.props,a),i&&i()}),M()(this,"setProps",function(t){var i=c()({},e.props);e.props=c()({},e.props,t),e.componentDidUpdate(i,e.state)}),this.props=c()({},this.constructor.defaultProps,i)}return m()(t,[{key:"componentDidMount",value:function(){return null}},{key:"componentDidUpdate",value:function(){return null}},{key:"componentWillUnmount",value:function(){}},{key:"destroy",value:function(){this.componentWillUnmount(),this.ownElement.removeChild(this.node)}},{key:"render",value:function(){return document.createElement("div")}},{key:"renderDom",value:function(t){this.node=this.render(),this.ownElement=t,t.appendChild(this.node),this.componentDidMount()}}]),t}();M()(L,"defaultProps",{});var z=L,O=i(13),D=i.n(O),I=function(t,e){var i,a,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=n,r=!1;return function s(){r||(n&&setTimeout(function(){o=!1,i&&(s.apply(a,i),i=null,a=null)},e),r=!0);for(var c=arguments.length,l=new Array(c),h=0;h<c;h++)l[h]=arguments[h];if(o)return i=l,void(a=this);t.apply(this,l),o=!0,setTimeout(function(){o=!1,i&&(s.apply(a,i),i=null,a=null)},e)}},A=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i||(i=Date.now());var a=(i-t)/e;return a<0&&(a=0),a>1&&(a=1),a},E=function(t){return-t*(t-2)},T=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!1;if(i=t.touches&&t.touches.length>0?{x:t.touches[0].pageX,y:t.touches[0].pageY}:{x:t.pageX,y:t.pageY},e){var a=function t(e){if(!e)return{top:0,left:0};var i=t(e.offsetParent);return{top:e.offsetTop+i.top,left:e.offsetLeft+i.left}}(e);i.x-=a.left,i.y-=a.top}return i},P=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,i=t>=0?1:-1,a=t=Math.abs(t);if(t>=e){for(var n=Math.floor((""+t).length/3),o="",r=2;r>=1;r=-1){if(((o=parseFloat((0!=n?t/Math.pow(1e3,n):t).toPrecision(r)))+"").replace(/[^a-zA-Z 0-9]+/g,"").length<=2)break}o%1!=0&&(o=o.toFixed(1)),a=o+["","k","m","b","t"][n]}return-1===i?"-".concat(a):a},N=function(t){return"".concat(function(t,e,i,a){e=isNaN(e=Math.abs(e))?2:e,i=null==i?".":i,a=null==a?",":a;var n=t<0?"-":"",o=String(parseInt(t=Math.abs(Number(t)||0).toFixed(e))),r=(r=o.length)>3?r%3:0;return n+(r?o.substr(0,r)+a:"")+o.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+a)+(e?i+Math.abs(t-o).toFixed(e).slice(2):"")}(parseFloat(t),0,"."," ")).replace(".00","")},F=function(t){return new Promise(function(e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.send(null),i.onreadystatechange=function(){if(4===i.readyState&&200===i.status){var t=i.getResponseHeader("Content-Type");e(i.responseText,t,i)}}})},C=function(t,e,i){t/=255,e/=255,i/=255;var a,n,o=Math.max(t,e,i),r=Math.min(t,e,i),s=(o+r)/2;if(o==r)a=n=0;else{var c=o-r;switch(n=s>.5?c/(2-o-r):c/(o+r),o){case t:a=(e-i)/c+(e<i?6:0);break;case e:a=(i-t)/c+2;break;case i:a=(t-e)/c+4}a/=6}return[a,n,s]};function W(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}var j,Z,R=function(t,e,i){var a,n,o;if(0==e)a=n=o=i;else{var r=i<.5?i*(1+e):i+e-i*e,s=2*i-r;a=W(s,r,t+1/3),n=W(s,r,t),o=W(s,r,t-1/3)}return[255*a,255*n,255*o]},X=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},V=function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f()(this,t),this.text=e,this.params=i},U=function t(e,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};f()(this,t),this.from=e,this.to=i,this.params=a},Y=function(){function t(e,i){f()(this,t),this.element=e,this.props=i,this.dpr=t.getRetinaRatio(),this.resize(i.width,i.height)}return m()(t,null,[{key:"getRetinaRatio",value:function(){var t=window.devicePixelRatio||1,e=document.createElement("canvas").getContext("2d");return t/[e.webkitBackingStorePixelRatio,e.mozBackingStorePixelRatio,e.msBackingStorePixelRatio,e.oBackingStorePixelRatio,e.backingStorePixelRatio,1].reduce(function(t,e){return t||e})}}]),m()(t,[{key:"resize",value:function(e,i){this.props.width=e,this.props.height=i,this.ctx=this.element.getContext("2d"),this.dpr=t.getRetinaRatio(),this.ctx.scale(this.dpr,this.dpr),this.element.style.width="".concat(e,"px"),this.element.style.height="".concat(i,"px"),this.element.setAttribute("width",e*this.dpr),this.element.setAttribute("height",i*this.dpr)}},{key:"clear",value:function(){var t=this.props,e=t.width,i=void 0===e?0:e,a=t.height,n=void 0===a?0:a;this.ctx.clearRect(0,0,i*this.dpr,n*this.dpr)}},{key:"text",value:function(t,e){var i=e.x,a=e.y,n=e.size,o=void 0===n?12:n,r=e.align,s=void 0===r?"center":r,c=e.font,l=void 0===c?"serif":c,h=e.color,d=void 0===h?"#000000":h,u=e.opacity,p=void 0===u?1:u;if(p<1){var f=X(d);null!==f&&(d="rgba(".concat(f.r,", ").concat(f.g,", ").concat(f.b,", ").concat(p,")"))}this.ctx.font="".concat(Math.floor(o*this.dpr),"px ").concat(l),this.ctx.textAlign=s,this.ctx.fillStyle=d,this.ctx.fillText(t,i*this.dpr,a*this.dpr)}},{key:"line",value:function(t,e,i){var a=i.color,n=void 0===a?"#000000":a,o=i.lineWidth,r=void 0===o?2:o,s=i.opacity,c=void 0===s?1:s;if(c<1){var l=X(n);null!==l&&(n="rgba(".concat(l.r,", ").concat(l.g,", ").concat(l.b,", ").concat(c,")"))}this.ctx.beginPath(),this.ctx.strokeStyle=n,this.ctx.lineWidth=r*this.dpr,this.ctx.moveTo(t.x*this.dpr,t.y*this.dpr),this.ctx.lineTo(e.x*this.dpr,e.y*this.dpr),this.ctx.stroke()}},{key:"rect",value:function(t,e,i){var a=i.width,n=void 0===a?10:a,o=i.height,r=void 0===o?10:o,s=i.color,c=void 0===s?"black":s,l=i.fill,h=void 0!==l&&l;this.ctx.strokeStyle=c,this.ctx.fillStyle=c,h&&this.ctx.fillRect(t*this.dpr,e*this.dpr,n*this.dpr,r*this.dpr),h||this.ctx.strokeRect(t*this.dpr,e*this.dpr,n*this.dpr,r*this.dpr)}},{key:"arc",value:function(t,e,i,a,n,o){var r=o.color,s=void 0===r?"#0000":r,c=o.opacity,l=void 0===c?1:c,h=o.mouseX,d=void 0===h?0:h,u=o.mouseY,p=void 0===u?0:u,f=o.mouseMove,v=void 0!==f&&f;if(l<1){var m=X(s);null!==m&&(s="rgba(".concat(m.r,", ").concat(m.g,", ").concat(m.b,", ").concat(l,")"))}(this.ctx.beginPath(),this.ctx.moveTo(t*this.dpr,e*this.dpr),this.ctx.arc(t*this.dpr,e*this.dpr,i*this.dpr,a,n),this.ctx.fillStyle=s,v)&&(this.ctx.isPointInPath(d*this.dpr,p*this.dpr)&&v());this.ctx.closePath(),this.ctx.fill()}},{key:"circle",value:function(t,e,i,a){var n=a.color,o=void 0===n?"black":n,r=a.strokColor,s=void 0!==r&&r,c=a.lineWidth,l=void 0===c?1:c;this.ctx.beginPath(),this.ctx.arc(t*this.dpr,e*this.dpr,i*this.dpr,0,2*Math.PI,!0),s&&(this.ctx.strokeStyle=s,this.ctx.lineWidth=l*this.dpr,this.ctx.stroke()),o&&(this.ctx.fillStyle=o,this.ctx.fill())}},{key:"beginPath",value:function(t){var e=this,i=t.opacity,a=void 0===i?1:i,n=t.color,o=t.lineWidth;if(this.ctx.beginPath(),this.ctx.lineJoin="bevel",this.ctx.lineCap="butt",a<1){var r=X(n);null!==r&&(n="rgba(".concat(r.r,", ").concat(r.g,", ").concat(r.b,", ").concat(a,")"))}return{moveTo:function(t,i){e.ctx.moveTo(t*e.dpr,i*e.dpr)},lineTo:function(t,i){e.ctx.lineTo(t*e.dpr,i*e.dpr)},stroke:function(){e.ctx.strokeStyle=n,e.ctx.lineWidth=o*e.dpr,e.ctx.stroke()},fill:function(){e.ctx.fillStyle=n,e.ctx.lineWidth=o*e.dpr,e.ctx.fill()}}}},{key:"draw",value:function(t){t instanceof V&&this.text(t.text,t.params),t instanceof U&&this.line(t.from,t.to,t.params)}}]),t}(),H=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],G="day",q=(j={},M()(j,G,"Switch to Night Mode"),M()(j,"night","Switch to Day Mode"),j),J=(Z={},M()(Z,G,{background:"#fff",text:"#182D3B",lines:"#182D3B",lastLine:"#182D3B",activeLine:"#D2D5D7",textOpacity:.7,lineOpacity:.1}),M()(Z,"night",{background:"#242F3E",text:"#FFFFFF",lines:"#FFFFFF",lastLine:"#FFFFFF",activeLine:"#FFFFFF",textOpacity:.7,lineOpacity:.1}),Z),$=i(5),K=i.n($),Q=function(t){function e(){var t,i;f()(this,e);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return i=y()(this,(t=w()(e)).call.apply(t,[this].concat(n))),M()(u()(i),"domLabels",{}),i}return x()(e,t),m()(e,[{key:"drawXLabels",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.props,a=i.labels,n=void 0===a?[]:a,o=i.getLabel,r=i.opacity,s=void 0===r?1:r;if(n.length>0){for(var c=this.calcXLabels(),l=c.positions,h=c.intervalFactor,d=c.removed,u=Object.keys(l),p=Object.keys(this.domLabels),f=function(e){var i,a,o,r,s,c,l,u,f=+p[e],v=t.domLabels[f];f%h!=0?(v.style.opacity=0,i=function(){var e=100/t.props.width,i=(t.props.scroll-t.props.width)/100,a=t.props.layout.width*(f/(n.length-1)-i)*e;v.style.left="".concat(a,"px")},a=200,o=function(){v.remove()},s=!1,c=Date.now(),l=!1,u=function(){l=!0},requestAnimationFrame(function t(){if(s||(s=!0,r&&r()),!l){var e=A(c,a);i(100*e),e<1?requestAnimationFrame(t):(u(),o&&o())}}),delete t.domLabels[f]):d.includes(f)&&(v.remove(),delete t.domLabels[f])},v=0;v<p.length;v+=1)f(v);var m=function(i){var a=+u[i],r=D()(l[a],2),c=r[0],h=r[1],d=o(n[h]),p=t.domLabels[a];if(p){var f="left: ".concat(c.toFixed(2),"px;opacity: ").concat(s,";");p.innerText=d,p.setAttribute("style",f),p.dataset.index=h,p.dataset.position=c+15,p.dataset.value=n[h]}else{var v="left: ".concat(c.toFixed(2),"px;opacity: ").concat(e?0:s,";");p=k("div",{id:a,className:K.a.canvas_wrapper__x_labels_wrapper__item,text:d,style:v,data:{state:"rendered",index:h,position:c+15,value:n[h]}}),t.element.appendChild(p),e&&setTimeout(function(){p.style.opacity=1},1),t.domLabels[a]=p}};for(v=0;v<u.length;v+=1)m(v);this.indexes=u}}},{key:"clear",value:function(){for(var t=Object.keys(this.domLabels),e=0;e<t.length;e+=1){var i=+t[e];this.domLabels[i].remove(),delete this.domLabels[i]}}},{key:"calcXLabels",value:function(){for(var t=this.props,e=t.scroll,i=t.labels,a=void 0===i?[]:i,n=t.layout,o=t.graphLayout.labelsXWidth,r=void 0===o?0:o,s=[],c=100/this.props.width,l=Math.ceil(n.width/r),h=(n.width-36)/l,d=l<=a.length?Math.floor(a.length/l):1,u=Math.ceil(Math.log2(d/c)),p=Math.pow(2,u),f=Math.ceil(c*a.length/p),v={},m=0;m<f;m+=1){var _=m*p,y=(e-this.props.width)/100,g=n.width*(_/(a.length-1)-y)*c;g+=18;var w=this.props.getLabelIndexByX(g+15);w&&(n.width>=g&&g>=0-h?v[_]=[g,w]:s.push(_))}return{positions:v,count:f,intervalFactor:p,removed:s}}},{key:"componentDidMount",value:function(){this.clear(),this.drawXLabels()}},{key:"componentDidUpdate",value:function(t){this.props.labels===t.labels&&this.props.id===t.id||this.clear(),this.props.labels===t.labels&&this.props.width===t.width&&this.props.scroll===t.scroll||(this.props.width!==t.width?this.drawXLabels(!0):this.drawXLabels(!1))}},{key:"render",value:function(){return this.element=k("div",{className:K.a.canvas_wrapper__x_labels_wrapper}),this.element}}]),e}(z);M()(Q,"defaultProps",{width:0,labels:[],scroll:0,layout:{width:0,height:0},graphLayout:{labelsXWidth:0},getLabel:function(t){return t}});var tt=Q,et=i(17),it=i.n(et),at=function(t){function e(){var t,i;f()(this,e);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return i=y()(this,(t=w()(e)).call.apply(t,[this].concat(n))),M()(u()(i),"domLabels",{}),i}return x()(e,t),m()(e,[{key:"drawXLabels",value:function(){for(var t=this.props.data,e=t.positions,i=void 0===e?{}:e,a=t.removed,n=void 0===a?[]:a,o=Object.keys(i),r=Object.keys(this.domLabels),s=0;s<r.length;s+=1){var c=r[s],l=this.domLabels[c];n.includes(c)&&(l.remove(),delete this.domLabels[c])}for(var h=0;h<o.length;h+=1){var d=o[h],u=i[d],p=u.x,f=u.y,v=u.width,m=u.height,_=u.opacity,y=u.color,g=this.domLabels[d];if(g)g.style.left!=="".concat(p,"px")&&(g.style.left="".concat(p,"px")),g.style.top!=="".concat(f,"px")&&(g.style.top="".concat(f,"px")),g.style.width!=="".concat(v,"px")&&(g.style.width="".concat(v,"px")),g.style.height!=="".concat(m,"px")&&(g.style.height="".concat(m,"px")),g.style.opacity!=="".concat(_)&&(g.style.opacity="".concat(_)),g.style["background-color"]!=="".concat(y)&&(g.style["background-color"]="".concat(y));else{var w=["left: ".concat(p,"px"),"top: ".concat(f,"px"),"width: ".concat(v,"px"),"height: ".concat(m,"px"),"opacity: ".concat(_),"background-color: ".concat(y)].join(";");g=k("div",{id:d,className:it.a.canvas_wrapper__bar_chart__item,style:w}),this.element.appendChild(g),this.domLabels[d]=g}}}},{key:"clear",value:function(){for(var t=Object.keys(this.domLabels),e=0;e<t.length;e+=1){var i=+t[e];this.domLabels[i].remove(),delete this.domLabels[i]}}},{key:"componentDidMount",value:function(){this.clear(),this.drawXLabels()}},{key:"componentDidUpdate",value:function(t){this.props.id!==t.id&&this.clear(),this.props.data!==t.data&&this.drawXLabels()}},{key:"render",value:function(){return this.element=k("div",{className:it.a.canvas_wrapper__bar_chart}),this.element}}]),e}(z);M()(at,"defaultProps",{id:1,data:{position:{},removed:[]}});var nt=at,ot=i(18),rt=i.n(ot),st=function(t){function e(t){var i;return f()(this,e),i=y()(this,w()(e).call(this,t)),M()(u()(i),"animations",[]),M()(u()(i),"state",{step:10,showInfo:!1,graphLayout:{width:0,height:0,labelsXWidth:70,labelsXOffset:10},graphMinMax:{},offset:0,graphOffset:{top:0,left:0,bottom:0,right:0,asixX:0,asixY:0},graphScale:{x:0,y:0},minStep:1,maxStep:1e3,visibility:{},mouse:{pointX:0,pointY:0},selectArc:!1,zoom:!1,animationsValues:{yAsixOpacity:100,xAsixOpacity:100,arcsScale:0,areasScale:0,yMinMax:0}}),M()(u()(i),"init",!1),M()(u()(i),"initialize",h()(r.a.mark(function t(){var e,a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.props,a=e.layout,n=e.visibled,i.handleApplyVisibility(n),i.canvas=new Y(i.canvasNode,c()({},a)),t.next=5,i.calc();case 5:i.init=!0,requestAnimationFrame(i.reDraw);case 7:case"end":return t.stop()}},t)}))),M()(u()(i),"time",0),M()(u()(i),"reDraw",function(t){if(i.time=t,i.animations=i.animations.filter(function(t){return!1!==t}),i.animations.length>0||i.needDraw){for(var e=0;e<i.animations.length;e++){var a=i.animations[e];if(!1!==a){var n=t-a.startAt,o=A(a.startAt,a.duration,t);i.animations[e].progress=o,i.animations[e].lastUpdateAt=t,i.animations[e].timePassed=n,a.step(E(o),n,a.duration),(1===o||t-a.startAt<-1e4)&&(i.animations[e]=!1)}}i.draw(),i.needDraw&&(i.needDraw=!1)}requestAnimationFrame(i.reDraw)}),M()(u()(i),"reInit",h()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.calc();case 2:case"end":return t.stop()}},t)}))),M()(u()(i),"updateState",function(){var t=h()(r.a.mark(function t(e){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){i.setState(e,t)}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),M()(u()(i),"updateAnimateYLines",I(function(t){i.setState({graphScale:c()({},i.state.graphScale,{animateYLines:t})})},10)),M()(u()(i),"updateGraphOptions",function(t,e){var a=i.props,n=a.scroll,o=a.width,r=a.layout,s=i.getLength();i.setGraphOptions(t,{scroll:n,limit:o,length:s,animateYLines:e},r)}),M()(u()(i),"animationInterval",!1),M()(u()(i),"lastMinMax",[0,0]),M()(u()(i),"time",new Date),M()(u()(i),"eventStartShowInfo",function(t){var e=T(t).x-i.element.offsetLeft,a=i.getLabelIndexByRelativeX(e);i.setState({showInfo:a})}),M()(u()(i),"eventMouseDown",function(t){var e=i.props.arcMode,a=void 0!==e&&e;i.isShowInfo||!1!==a||(i.tapPosition=T(t),i.isShowInfo=!0,i.eventStartShowInfo(t))}),M()(u()(i),"eventTouchMove",function(t){var e=i.props.arcMode,a=void 0!==e&&e;t.target.closest(".".concat(K.a.canvas__show_info))!=i.showInfoNode&&i.isShowInfo&&!1===a&&i.eventStartShowInfo(t)}),M()(u()(i),"eventUpdateMouse",function(t){var e=T(t,i.element);e.x===i.state.mouse.pointX&&e.y===i.state.mouse.pointY||i.setState({mouse:{pointX:e.x,pointY:e.y}})}),M()(u()(i),"eventMouseMove",function(t){var e=i.props.arcMode,a=void 0!==e&&e;t.target.closest(".".concat(K.a.canvas__show_info))!=i.showInfoNode&&i.isShowInfo&&!1===a&&i.eventStartShowInfo(t),i.eventUpdateMouse(t)}),M()(u()(i),"eventMouseUp",function(t){var e=i.props.arcMode,a=void 0!==e&&e;t.target.closest(".".concat(K.a.canvas_wrapper))!=i.element&&!1===a&&i.isShowInfo&&(i.isShowInfo=!1,i.setState({showInfo:!1}))}),M()(u()(i),"eventMouseLeave",function(){var t=i.props.arcMode,e=void 0!==t&&t;i.isShowInfo&&!1===e&&(i.isShowInfo=!1,i.setState({showInfo:!1}))}),M()(u()(i),"eventMouseEnter",function(t){var e=i.props.arcMode,a=void 0!==e&&e;i.isShowInfo||!1!==a||(i.isShowInfo=!0,i.eventStartShowInfo(t))}),M()(u()(i),"handleFadeOutYAsix",function(){var t=i.state.animationsValues.yAsixOpacity,e=void 0===t?100:t,a=0-e;i.createAnimation("anim-y-asix",function(t){var n=a*t;i.setState({animationsValues:c()({},i.state.animationsValues,{yAsixOpacity:e+n})})},150)}),M()(u()(i),"handleFadeOutXAsix",function(){var t=i.state.animationsValues.xAsixOpacity,e=void 0===t?100:t,a=0-e;i.createAnimation("anim-x-asix",function(t){var n=a*t;i.setState({animationsValues:c()({},i.state.animationsValues,{xAsixOpacity:e+n})})},150)}),M()(u()(i),"handleFadeInYAsix",function(){var t=i.state.animationsValues.yAsixOpacity,e=void 0===t?100:t,a=100-e;i.createAnimation("anim-y-asix",function(t){var n=a*t;i.setState({animationsValues:c()({},i.state.animationsValues,{yAsixOpacity:e+n})})},150)}),M()(u()(i),"handleFadeInXAsix",function(){var t=i.state.animationsValues.xAsixOpacity,e=void 0===t?100:t,a=100-e;i.createAnimation("anim-x-asix",function(t){var n=a*t;i.setState({animationsValues:c()({},i.state.animationsValues,{xAsixOpacity:e+n})})},150)}),M()(u()(i),"handleFadeInArcs",function(){var t=i.state.animationsValues,e=t.arcsScale,a=void 0===e?1:e,n=t.arcsOpacity,o=void 0===n?1:n,r=1-a,s=1-o;i.createAnimation("anim-arcs-scale",function(t){var e=r*t,n=s*t;i.setState({animationsValues:c()({},i.state.animationsValues,{arcsScale:a+e,arcsOpacity:o+n})})},400)}),M()(u()(i),"handleFadeOutArcs",function(){var t=i.state.animationsValues,e=t.arcsScale,a=void 0===e?1:e,n=t.arcsOpacity,o=void 0===n?1:n,r=0-a,s=0-o;i.createAnimation("anim-arcs-scale",function(t){var e=r*t,n=s*t;i.setState({animationsValues:c()({},i.state.animationsValues,{arcsScale:a+e,arcsOpacity:o+n})})},400)}),M()(u()(i),"handleFadeInAreas",function(){var t=i.state.animationsValues,e=t.areaScale,a=void 0===e?1:e,n=t.areaOpacity,o=void 0===n?1:n,r=1-a,s=1-o;i.createAnimation("anim-area-scale",function(t){var e=r*t,n=s*t;i.setState({animationsValues:c()({},i.state.animationsValues,{areaScale:a+e,areaOpacity:o+n})})},400)}),M()(u()(i),"handleFadeOutAreas",function(){var t=i.state.animationsValues,e=t.areaScale,a=void 0===e?1:e,n=t.areaOpacity,o=void 0===n?1:n,r=0-a,s=0-o;i.createAnimation("anim-area-scale",function(t){var e=r*t,n=s*t;i.setState({animationsValues:c()({},i.state.animationsValues,{areaScale:a+e,areaOpacity:o+n})})},400)}),M()(u()(i),"minMaxLines",{}),M()(u()(i),"handleApplyVisibility",function(t){for(var e=i.props.dataset,a=void 0===e?[]:e,n=i.state.visibility,o=void 0===n?{}:n,r=Object.keys(o),s=a.map(function(t){return t.id}),c=0;c<s.length;c++){var l=s[c],h=r.includes(l)&&1==o[l];h&&!t.includes(l)?i.handleFadeOutLine(l):!h&&t.includes(l)&&i.handleFadeInLine(l)}}),i.safeCalc=I(i.calc,1),i.props.allowYAsix?i.state.graphOffset.bottom=30:i.state.graphOffset.bottom=0,i.props.mini?(i.state.graphOffset.left=0,i.state.graphOffset.right=0):(i.state.graphOffset.left=18,i.state.graphOffset.right=18),i}return x()(e,t),m()(e,[{key:"componentDidMount",value:function(){var t=this.props.mini;void 0!==t&&t||(this.documentEventMouseUp=this.eventMouseUp.bind(this),document.addEventListener("mouseup",this.documentEventMouseUp)),this.initialize()}},{key:"componentDidUpdate",value:function(t,e){var i=this.props,a=i.dataset,n=i.visibled,o=i.layout,r=i.labels,s=i.arcMode,c=this.state,l=c.step,h=c.graphOffset,d=c.graphMinMax,u=c.visibility,p=c.graphScale,f=c.showInfo,v=c.mouse,m=c.selectArc,_=c.zoom;t.arcMode!==s&&(console.log("change arc mode: ",t.arcMode,s),!1===s?(this.handleFadeInYAsix(),this.handleFadeInXAsix(),this.handleFadeOutArcs(),this.handleFadeInAreas()):(this.handleFadeInArcs(),this.handleFadeOutYAsix(),this.handleFadeOutXAsix(),this.handleFadeOutAreas()));var y=this.props,g=y.layout,w=g.width,b=void 0===w?0:w,x=g.height,S=void 0===x?0:x,M=y.limit,k=y.offset,L=y.scroll,z=y.colors;y.id!==t.id&&this.setState({showInfo:!1}),t.visibled===n&&t.dataset===a&&t.layout.width===o.width&&t.layout.height===o.height&&t.limit===M&&t.offset===k||(t.layout.width===b&&t.layout.height===S||this.canvas.resize(b,S),t.visibled!==n&&this.handleApplyVisibility(n),this.reInit()),e.step===l&&e.graphOffset.top===h.top&&e.graphOffset.bottom===h.bottom&&e.graphOffset.left===h.left&&e.graphOffset.right===h.right&&t.scroll===L&&t.width===b&&t.colors===z&&t.labels===r&&e.graphMinMax===d&&e.graphScale===p&&e.showInfo===f&&e.visibility===u&&e.mouse===v&&e.selectArc===m&&e.zoom===_||(this.needDraw=!0)}},{key:"componentWillUnmount",value:function(){var t=this.props.mini;void 0!==t&&t||document.removeEventListener("mouseup",this.documentEventMouseUp),this.cart&&(this.cart.destroy(),this.cart=null),this.cartMiniMap&&(this.cartMiniMap.destroy(),this.cartMiniMap=null)}},{key:"findMinMaxForLine",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.min,n=void 0===a?99999999999:a,o=i.max,r=void 0===o?0:o,s=e.offset,c=void 0===s?0:s,l=e.limit,h=c+(void 0===l?0:l);0===h&&(h=t.length);for(var d=c;d<t.length&&d<h;d+=1){var u=t[d];n=u<n?u:n,r=u>r?u:r}return[n,r]}},{key:"findMinMaxForBars",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.min,n=void 0===a?99999999999:a,o=i.max,r=void 0===o?0:o,s=e.visibled,c=void 0===s?[]:s,l=e.offset,h=void 0===l?0:l,d=e.limit,u=h+(void 0===d?0:d);0===u&&(u=t[0].list.length);for(var p=function(e){var i=0;t.filter(function(t){return c.includes(t.id)}).forEach(function(t){i+=t.list[e],n=t.list[e]<n?t.list[e]:n}),r=i>r?i:r},f=h;f<t[0].list.length&&f<u;f+=1)p(f);return[n,r]}},{key:"findMinMax",value:function(){var t=this,e=this.props,i=e.dataset,a=void 0===i?[]:i,n=e.visibled,o=void 0===n?[]:n,r=e.offset,s=e.limit,l=99999999,h=0,d={};if(a.length>0){a.filter(function(t){return"line"===t.type}).forEach(function(e){var i=e.id,a=e.list,n=t.findMinMaxForLine(a,{offset:r,limit:s});d[i]=n,o.includes(i)&&(l=n[0]<l?n[0]:l,h=n[1]>h?n[1]:h)});var u=a.filter(function(t){return"bar"===t.type||"area"===t.type});if(u.length>0){var p=this.findMinMaxForBars(u,{visibled:o,offset:r,limit:s});l=p[0]<l?p[0]:l,h=p[1]>h?p[1]:h}}else l=0,h=10;return c()({common:[l,h]},d)}},{key:"findAbsoluteMinMax",value:function(){var t=this,e=this.props,i=e.dataset,a=void 0===i?[]:i,n=e.visibled,o=void 0===n?[]:n,r=99999999,s=0;if(a.length>0){a.filter(function(t){return"line"===t.type}).forEach(function(e){var i=e.id,a=e.list,n=t.findMinMaxForLine(a);o.includes(i)&&(r=n[0]<r?n[0]:r,s=n[1]>s?n[1]:s)});var c=a.filter(function(t){return"bar"===t.type||"area"===t.type});if(c.length>0){var l=this.findMinMaxForBars(c,{visibled:o});r=l[0]<r?l[0]:r,s=l[1]>s?l[1]:s}}else r=0,s=10;return[r,s]}},{key:"nAsix",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"common",a=this.props.layout.height,n=void 0===a?0:a,o=this.state,r=o.graphMinMax,s=o.graphScale,c=o.graphOffset,l=c.left,h=c.bottom,d=n-(e-D()(r[i],1)[0])*s[i]-h;return{x:l+t*s.x,y:d}}},{key:"getHeightGraph",value:function(){var t=this.props.layout,e=this.state.graphOffset,i=e.top,a=e.bottom;return t.height-i-a}},{key:"getWidthGraph",value:function(){var t=this.props.layout,e=this.state.graphOffset,i=e.left,a=e.right;return t.width-i-a}},{key:"setGraphOptions",value:function(t,i,a){var n=i.scroll,o=void 0===n?0:n,r=i.limit,s=void 0===r?0:r,l=i.length,h=i.animateYLines,d=a.width,u=this.getHeightGraph(),p=this.getWidthGraph(),f={};void 0!==h&&(f.animateYLines=h),Object.keys(t).forEach(function(e){var i=D()(t[e],2),a=i[0],n=i[1]-a,o=n>0?u/n:1;f[e]=o});var v=p/d,m=e.calcXStep({width:d,limit:s,length:l}),_=m*l;this.setState({step:m,graphMinMax:t,graphScale:c()({},this.state.graphScale,f,{x:v}),graphLayout:c()({},this.state.graphLayout,{width:p,height:u,fullWidth:_,offsetPx:_*(o-s)/100})})}},{key:"getLength",value:function(){var t=this.props.dataset,e=void 0===t?[]:t;return Math.max.apply(Math,n()(e.map(function(t){return t.list.length})))}},{key:"calc",value:function(){var t=this,e=this.props,i=e.dataset,a=void 0===i?[]:i,n=e.visibled,o=void 0===n?[]:n,r=e.yScaled,s=void 0!==r&&r,c=e.animateScale,l=void 0===c||c;this.absoluteMinMax=this.findAbsoluteMinMax();var h=this.findMinMax();return l?s?a.filter(function(t){return o.includes(t.id)}).forEach(function(e,i){t.handleAnimScale(e.id,h,400,0===i)}):this.handleAnimScale("common",h,400,!0):this.updateGraphOptions(h,0),!0}},{key:"drawLine",value:function(t,e){for(var i=this.getWidthGraph(),a=this.props.yScaled,n=void 0!==a&&a,o=this.state,r=o.graphLayout.offsetPx,s=o.graphOffset,c=s.left,l=s.right,h=this.canvas.beginPath({color:e.color,opacity:e.opacity,lineWidth:e.lineWidth}),d=0;d<t.length;d++){var u=t[d],p=n?e.id:"common",f=this.nAsix(d*e.step-r,u,p),v=f.x,m=f.y;v>=0-2*c&&v<=c+i+2*l&&(0===d?h.moveTo(v,m):h.lineTo(v,m),e.drawPointValue&&this.canvas.text(u.value,{x:v,y:m,align:"center",font:"NeueHaasDisplay,Tahoma,sans-serif,Arial"}))}h.stroke()}},{key:"drawLines",value:function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this.props.mode,n=void 0===a?G:a,o=i.visibility,r=void 0===o?{}:o,s=i.lineWidth,c=void 0===s?3:s,l=i.allowPointValue,h=void 0!==l&&l,d=0;d<t.length;d++){var u=t[d],p=u.color,f=r[u.id],v=X(p);if("night"===n){var m=C(v.r,v.g,v.b),_=R(m[0],m[1]-.25,m[2]);v.r=_[0],v.g=_[1],v.b=_[2]}p=f<1?"rgba(".concat(v.r,",").concat(v.g,",").concat(v.b,",").concat(f,")"):"rgba(".concat(v.r,",").concat(v.g,",").concat(v.b,",1)"),this.drawLine(u.list,{id:u.id,color:p,step:e,lineWidth:c,drawPointValue:h})}}},{key:"drawBars",value:function(t,e){var i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.getHeightGraph(),o=this.getWidthGraph(),r=this.state,s=D()(r.graphMinMax.common,2)[1],c=r.graphLayout.offsetPx,l=r.graphOffset,h=l.left,d=l.right,u=r.showInfo,p=void 0!==u&&u,f=this.props.mode,v=void 0===f?G:f,m=a.visibility,_=void 0===m?{}:m,y=a.length,g=void 0===y?0:y;t=t.filter(function(t){return _[t.id]>0});for(var w=function(a){var r=i.nAsix(a*e-c,0).x;if(r>=0-2*h&&r<=h+o+2*d){var l=0;t.forEach(function(t){var e=t.list[a],i=_[t.id];l+=e*i});var u=2;t.forEach(function(t){var e=_[t.id],i=t.list[a]*e,n=i>0?100*i/l:0;n<2&&n>0&&(u+=2)});var f=n-n*(100-100*l/s+u)/100,m=0;t.forEach(function(t){"".concat(t.id,"_").concat(a);var o=_[t.id],s=t.list[a]*o,c=s>0?100*s/l:0;if(c<2&&c>0&&(c=2),c>0){var h=f*c/100;!1!==p&&(o=p===a?1:.4);var d=t.color,u=X(d);if("night"===v){var y=C(u.r,u.g,u.b),g=R(y[0],y[1]-.25,y[2]);u.r=g[0],u.g=g[1],u.b=g[2]}if(o<1){var w="night"===v?0:255;d="rgb(".concat(u.r*o+w*(1-o),",").concat(u.g*o+w*(1-o),",").concat(u.b*o+w*(1-o),")")}else d="rgb(".concat(u.r,",").concat(u.g,",").concat(u.b,")");i.canvas.rect(Math.ceil(r),n-(h+m),{width:Math.ceil(e),height:h,color:d,fill:!0}),m+=h}})}},b=0;b<g;b++)w(b);this.bars.setProps({data:{positions:{},removed:[]}})}},{key:"drawAreas",value:function(t,e){var i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.state.animationsValues,o=n.areaScale,r=void 0===o?1:o,s=n.areaOpacity,c=void 0===s?1:s,l=this.getHeightGraph(),h=this.getWidthGraph(),d=this.state,u=d.graphLayout.offsetPx,p=d.graphOffset,f=p.left,v=p.right,m=this.props.mode,_=void 0===m?G:m,y=a.visibility,g=void 0===y?{}:y,w=a.length,b=void 0===w?0:w;t=t.filter(function(t){return g[t.id]>0});for(var x={},S=function(a){var n=i.nAsix(a*e-u,0).x;if(n>=0-2*f&&n<=f+h+2*v){var o=0;t.forEach(function(t){var e=t.list[a],i=g[t.id];o+=e*i});var s=0;t.forEach(function(t){var e=g[t.id],i=t.list[a]*e,c=l*(100*i/o)/100*(1/r);x[t.id]||(x[t.id]=[]),x[t.id].push({x:n,y:l-(c+s)}),s+=c})}},M=0;M<b;M++)S(M);for(M=t.length-1;M>=0;M-=1){var k=t[M],L=x.hasOwnProperty(k.id)?x[k.id]:[],z=g[k.id];c<1&&(z=c);var O=k.color,D=X(O);if("night"===_){var I=C(D.r,D.g,D.b),A=R(I[0],I[1]-.25,I[2]);D.r=A[0],D.g=A[1],D.b=A[2]}O=z<1?"rgba(".concat(D.r,",").concat(D.g,",").concat(D.b,",").concat(z,")"):"rgba(".concat(D.r,",").concat(D.g,",").concat(D.b,",1)");var E=this.canvas.beginPath({color:O,opacity:z,lineWidth:a.lineWidth}),T=this.nAsix(h,l),P=L[0],N=L[L.length-1];E.moveTo(P.x,T.y);for(var F=0;F<L.length;F++){var W=L[F],j=W.x,Z=W.y;E.lineTo(j,Z)}E.lineTo(N.x,T.y),E.fill()}}},{key:"drawArc",value:function(t,e){var i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.state.animationsValues,o=n.arcsScale,r=void 0===o?1:o,s=n.arcsOpacity,c=void 0===s?1:s,l=this.getHeightGraph(),h=this.getWidthGraph(),d=this.state,u=d.graphLayout.offsetPx,p=d.mouse,f=p.pointX,v=void 0===f?0:f,m=p.pointY,_=void 0===m?0:m,y=d.selectArc,g=void 0!==y&&y,w=a.visibility,b=void 0===w?{}:w,x=a.length,S=void 0===x?0:x;t=t.filter(function(t){return b[t.id]>0});for(var M=0,k={},L=function(a){var n=i.nAsix(a*e-u,0).x;n>=0-2*e&&n<=h+2*e&&t.forEach(function(t){var e=b[t.id],i=t.list[a]*e;k[t.id]||(k[t.id]=0),k[t.id]+=i,M+=i})},z=0;z<S;z++)L(z);var O=0,D=Math.round(Math.min(h/2.3,l/2.3))*r,I=Math.round(D/1.5)*r,A=Math.round(h/2),E=Math.round(l/2),T=!1;t.forEach(function(t){var e=k[t.id],a=2*Math.PI*e/M,n=g===t.id?A+10*Math.cos(O+a/2):A,o=g===t.id?E+10*Math.sin(O+a/2):E;i.canvas.arc(n,o,D,O,O+a,{opacity:c,color:t.color,mouseX:v,mouseY:_,mouseMove:function(){T=t.id}}),O+=a}),!1!==T&&g!==T?setTimeout(function(){i.setState({selectArc:T})},1):!1===T&&g!==T&&setTimeout(function(){i.setState({selectArc:!1})},1),O=0,t.forEach(function(t){var e=k[t.id],a=e/M*100,n=2*Math.PI*e/M,o=I,s=20;if(n*(180/Math.PI)<30&&(s=12,o=D-20,n+=.03),n*(180/Math.PI)>8){var l=o*Math.cos(O+n/2)+A,h=o*Math.sin(O+n/2)+E;i.canvas.text("".concat(Math.round(a),"%"),{x:l,y:h,opacity:c,size:s*r,align:"center",color:"#fff",font:"NeueHaasDisplay,Tahoma,sans-serif,Arial"})}O+=n})}},{key:"drawGraphs",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this.props.arcMode,n=void 0!==a&&a,o=t.filter(function(t){return"arc"===t.type}),r=t.filter(function(t){return"area"===t.type}),s=t.filter(function(t){return"bar"===t.type}),c=t.filter(function(t){return"line"===t.type});o.length>0&&this.drawArc(o,e,i),(!1===n||this.isTypeAnimating("anim-area"))&&this.drawAreas(r,e,i),(!1!==n||this.isTypeAnimating("anim-arcs"))&&this.drawArc(r,e,i),this.drawBars(s,e,i),this.drawLines(c,e,i)}},{key:"createYLabels",value:function(t,e,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"start",o=this.props,r=o.colors,s=o.layout,c=s.width,l=s.height,h=this.state,d=h.graphOffset,u=d.asixX,p=void 0===u?0:u,f=d.asixY,v=void 0===f?0:f,m=h.animationsValues.yAsixOpacity,_=void 0===m?1:m,y=D()(e[t],2),g=y[0],w=[],b=y[1]-g,x=b>0?b/6:l/6,S=b/6,M=i>=0?1:-1;i=Math.abs(i);for(var k=this.zoomFactor,L=1-this.zoomFactor,z=1===M?function(t){return t*(k+L*i)}:function(t){return i>0?t/(k+L*i):0},O=-5;O<11;O+=1){var I=this.nAsix(0,x*O+g,t),A=this.nAsix(c,x*O+g,t),E=Math.floor(S*O+g),T=z(I.y);w.push(new V(P(E),{x:"start"===n?I.x+p:A.x,y:T-10+v,align:n,color:a,opacity:_<1?_:r.textOpacity,font:"NeueHaasDisplay,Tahoma,sans-serif,Arial",size:12})),w.push(new U({x:I.x+p,y:T+v},{x:A.x,y:T+v},{color:O>0?r.lines:r.lastLine,opacity:_<1?_:r.lineOpacity,lineWidth:1}))}return w}},{key:"getYLabels",value:function(){var t=this,e=this.props,i=e.yScaled,a=void 0!==i&&i,o=e.dataset,r=void 0===o?[]:o,s=e.visibled,c=void 0===s?[]:s,l=e.colors,h=this.state,d=h.graphMinMax,u=h.graphScale.animateYLines;if(a){var p=[];return r.filter(function(t){return c.includes(t.id)}).forEach(function(e,i){p=[].concat(n()(p),n()(t.createYLabels(e.id,d,u,e.color,0===i?"start":"end")))}),p}return this.createYLabels("common",d,u,l.text,"start")}},{key:"drawDebugInfo",value:function(){var t=this.props,e=t.layout,i=t.offset,a=t.limit,n=t.scroll,o=t.width,r=this.state,s=r.graphMinMax,c=s.minY,l=s.maxY,h=r.graphScale,d=r.graphOffset,u=d.left,p=d.top,f=d.right,v=d.bottom,m=r.step;this.canvas.rect(0,0,{width:300,height:150,color:"rgba(0, 0, 0, 0.5)",fill:!0}),this.canvas.text("Min/Max Y: ".concat(c," / ").concat(l),{x:10,y:20,align:"start",color:"white",size:14,font:"NeueHaasDisplay,Tahoma,sans-serif,Arial"}),this.canvas.text("Scale X/Y: ".concat(h.x," / ").concat(h.y),{x:10,y:40,align:"start",color:"white",size:14,font:"NeueHaasDisplay,Tahoma,sans-serif,Arial"}),this.canvas.text("Offset L/T/R/B: ".concat(u,"px / ").concat(p,"px / ").concat(f,"px / ").concat(v,"px"),{x:10,y:60,align:"start",color:"white",size:14,font:"NeueHaasDisplay,Tahoma,sans-serif,Arial"}),this.canvas.text("Width/Height: ".concat(e.width.toFixed(2),"px / ").concat(e.height.toFixed(2),"px"),{x:10,y:80,align:"start",color:"white",size:14,font:"NeueHaasDisplay,Tahoma,sans-serif,Arial"}),this.canvas.text("Step: ".concat(m,"px"),{x:10,y:100,align:"start",color:"white",size:14,font:"NeueHaasDisplay,Tahoma,sans-serif,Arial"}),this.canvas.text("Offset/Limit: ".concat(i," / ").concat(a),{x:10,y:120,align:"start",color:"white",size:14,font:"NeueHaasDisplay,Tahoma,sans-serif,Arial"}),this.canvas.text("Offset/Limit (%): ".concat(n.toFixed(2)," / ").concat(o.toFixed(2)),{x:10,y:140,align:"start",color:"white",size:14,font:"NeueHaasDisplay,Tahoma,sans-serif,Arial"})}},{key:"drawFpsInfo",value:function(){var t=new Date,e=1e3/(t-this.time);this.time=t,this.canvas.rect(0,0,{width:100,height:50,color:"rgba(0, 0, 0, 0.5)",fill:!0}),this.canvas.text("FPS: ".concat(10*Math.ceil(e/10)),{x:10,y:20,align:"start",color:"white",size:14,font:"NeueHaasDisplay,Tahoma,sans-serif,Arial"})}},{key:"draw",value:function(){var t=this,e=this.state,i=e.step,a=e.visibility,n=void 0===a?{}:a,o=e.showInfo,r=void 0!==o&&o,s=e.animationsValues.xAsixOpacity,c=void 0===s?100:s,l=this.props,h=l.dataset,d=void 0===h?[]:h,u=l.visibled,p=void 0===u?[]:u,f=l.allowXAsix,v=l.allowYAsix,m=l.allowPointValue,_=l.lineWidth,y=void 0===_?3:_;this.canvas.clear();var g=[];if(v&&(g=this.getYLabels()),f){var w=this.props,b=w.id,x=w.scroll,S=w.labels,M=w.layout,k=w.width,L=this.state.graphLayout;this.labelX.setProps({id:b,width:k,scroll:x,labels:S,layout:M,graphLayout:L,opacity:c})}var z=d.filter(function(t){return"bar"===t.type||"area"===t.type});z.length>0&&z[0].list.length>0&&this.drawGraphs(z,i,{visibled:p,visibility:n,lineWidth:y,allowPointValue:m,length:z[0].list.length}),g.filter(function(t){return t instanceof U}).forEach(function(e){return t.canvas.draw(e)});var O=d.filter(function(t){return"bar"!==t.type&&"area"!==t.type});O.length>0&&O[0].list.length>0&&this.drawGraphs(O,i,{visibled:p,visibility:n,lineWidth:y,allowPointValue:m,length:O[0].list.length}),g.filter(function(t){return t instanceof V}).forEach(function(e){return t.canvas.draw(e)}),this.props.debug&&this.drawDebugInfo(),this.props.fps&&this.drawFpsInfo(),!1!==r?this.drawShowInfo():this.showInfoNode.setAttribute("style","opacity: 0;")}},{key:"drawShowInfo",value:function(){var t=this,e=this.props,i=e.scroll,a=e.labels,n=void 0===a?[]:a,o=e.dataset,r=void 0===o?[]:o,s=e.visibled,l=void 0===s?[]:s,h=e.lineWidth,d=e.colors,u=e.layout,p=e.yScaled,f=void 0!==p&&p,v=e.zoomType,m=void 0===v?"none":v,_=e.zoom,y=void 0!==_&&_,g=this.state,w=g.step,b=g.graphOffset,x=g.showInfo,S=n.length*w/100*(i-this.props.width),M=x,L=n[M],z=new Date(L),O=H[z.getMonth()],D=B[z.getDay()],I=z.getDate(),A="".concat(D,", ").concat(O," ").concat(I);if(!1!==y&&"byHours"===m){var E=new Date(L),T=E.getHours(),P=E.getMinutes();1==="".concat(T).length&&(T="0".concat(T)),1==="".concat(P).length&&(P="0".concat(P)),A="".concat(T,":").concat(P)}var F=this.nAsix(M*w-S,0).x,C=r.filter(function(t){return l.includes(t.id)}).map(function(e){return c()({value:e.list[M],color:e.color,label:e.label,type:e.type},t.nAsix(M*w-S,e.list[M],f?e.id:"common"))}),W=C.filter(function(t){return"area"===t.type}).reduce(function(t,e){return e.value+t},0),j=(C=C.map(function(t){return c()({},t,{percent:"area"===t.type?100*t.value/W:null})})).filter(function(t){return"line"===t.type});j.length>0&&(this.canvas.line({x:F,y:0},{x:F,y:u.height-b.bottom},{color:d.activeLine,lineWidth:2}),j.forEach(function(e){t.canvas.circle(e.x,e.y,5,{lineWidth:h+2,color:d.background,strokColor:e.color})}));var Z=M*w-S+10;Z<0&&(Z=0),this.showInfoNode.innerHTML="";for(var R=[],X=0;X<C.length;X+=1){var V=C[X],U=[K.a.canvas__show_info__row__item];C.some(function(t){return null!==t.percent})&&C.length>1&&U.push(K.a.canvas__show_info__row__item_with_percent),R.push(k("div",{className:U,children:[k("div",{className:K.a.canvas__show_info__row__item__percent,text:Math.round(V.percent)+"%"}),k("div",{className:K.a.canvas__show_info__row__item__name,text:V.label}),k("div",{className:K.a.canvas__show_info__row__item__value,style:"color: ".concat(V.color),text:N(V.value)})]}))}var Y=[k("div",{className:K.a.canvas__show_info__title__value,text:A})];!1===y&&"none"!==m&&Y.push(k("div",{className:K.a.canvas__show_info__title__zoom,children:k("div",{className:K.a.canvas__show_info__title__zoom__icon,style:"background-image: url(".concat(rt.a,")")})})),this.showInfoNode.appendChild(k("div",{className:K.a.canvas__show_info__wrapper,children:[k("div",{className:K.a.canvas__show_info__title,children:Y}),k("div",{className:K.a.canvas__show_info__rows,children:R})]})),Z+this.showInfoNode.clientWidth+30>u.width&&(Z=u.width-this.showInfoNode.clientWidth-30),this.showInfoNode.setAttribute("style","opacity: 1;left: ".concat(Z,"px"))}},{key:"getLabelIndexByX",value:function(t){var e=this.state.step,i=this.props.labels,a=void 0===i?[]:i,n=Math.round(t/e);return n>0&&n<a.length&&n}},{key:"getLabelIndexByRelativeX",value:function(t){var e=this.state,i=e.graphScale,a=e.graphLayout.offsetPx,n=e.graphOffset.left;return this.getLabelIndexByX(a+(t-n)/i.x)}},{key:"getLabelText",value:function(t){var e=this.props,i=e.zoom,a=void 0!==i&&i,n=e.zoomType;if(!1!==a&&"byHours"===(void 0===n?"none":n)){var o=new Date(t),r=o.getHours(),s=o.getMinutes();return 1==="".concat(r).length&&(r="0".concat(r)),1==="".concat(s).length&&(s="0".concat(s)),"".concat(r,":").concat(s)}var c=new Date(t),l=H[c.getMonth()],h=c.getDate();return"".concat(l," ").concat(h)}},{key:"createAnimation",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300;(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])&&(this.animations=this.animations.filter(function(e){return e.type!==t})),this.animations.push({type:t,startAt:this.time,step:e,duration:i})}},{key:"handleFadeInLine",value:function(t){var e=this;this.animations=this.animations.filter(function(e){return e.type!=="anim-dataset-".concat(t)}),this.animations.push({type:"anim-dataset-".concat(t),startAt:this.time,step:function(i){e.setState({visibility:c()({},e.state.visibility,M()({},t,E(i)))})},duration:300})}},{key:"handleFadeOutLine",value:function(t){var e=this;this.animations=this.animations.filter(function(e){return e.type!=="anim-dataset-".concat(t)}),this.animations.push({type:"anim-dataset-".concat(t),startAt:this.time,step:function(i){e.setState({visibility:c()({},e.state.visibility,M()({},t,1-E(i)))})},duration:300})}},{key:"isTypeAnimating",value:function(){for(var t=this,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return i.some(function(e){return t.animations.filter(function(t){return!1!==t}).some(function(t){return t.type.indexOf(e)>-1})})}},{key:"handleScale",value:function(t,e){var i,a,n,o,r,s,l,h,d=this,u=this.props.layout,p=D()(e[t],2),f=p[0],v=p[1],m=9999999999,_=0;if(this.state.graphMinMax.hasOwnProperty(t)&&2===this.state.graphMinMax[t].length&&(m=this.state.graphMinMax[t][0],_=this.state.graphMinMax[t][1]),m!==f||_!==v){var y=f-m,g=v-_,w=_>v?1:-1,b=Math.abs(g);if(_==v&&(w=m<f?1:-1,b=Math.abs(y)),Math.abs(b)>u.height/2){var x=b>=0?1:-1;b=u.height/2*x}this.createAnimation("anim-graph-".concat(t),(i=[y,g],a=[m,_],n=D()(i,2),o=n[0],r=n[1],s=D()(a,2),l=s[0],h=s[1],function(e){var i=o*e+l,a=r*e+h,n=e>0?e*w:w,s=n>=0?1:-1,u=1-Math.abs(n),p=0!==n&&0!==u?b*u*s:0;d.updateGraphOptions(c()({},d.state.graphMinMax,M()({},t,[i,a])),p)}),100)}else this.updateGraphOptions(c()({},this.state.graphMinMax,M()({},t,[f,v])),0)}},{key:"handleAnimScale",value:function(t,e){var i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:150,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.props.layout,r=9999999999,s=0,l=D()(e[t],2),h=l[0],d=l[1];this.state.graphMinMax.hasOwnProperty(t)&&2===this.state.graphMinMax[t].length&&(r=this.state.graphMinMax[t][0],s=this.state.graphMinMax[t][1]);var u=[r,s],p=[h,d],f=u[1]-u[0],v=p[1]-p[0];this.zoomFactor=f>v?f/v:v/f;var m=[p[0]-u[0],p[1]-u[1]],_=s>d?1:-1,y=Math.abs(m[1]);if(s==d&&(_=r<h?1:-1,y=Math.abs(m[0])),Math.abs(y)>o.height/2){var g=y>=0?1:-1;y=o.height/2*g}0!==m[0]||0!==m[1]?this.createAnimation("anim-y-minmax-".concat(t),function(e){var a=u[0]+m[0]*e,o=u[1]+m[1]*e,r=e>0?e*_:_;Math.abs(r);i.updateGraphOptions(c()({},i.state.graphMinMax,M()({},t,[a,o])),n?e*_:void 0)},a):this.updateGraphOptions(c()({},this.state.graphMinMax,M()({},t,p)),n?1:void 0)}},{key:"handleScaleYMinMax",value:function(){var t=this;this.createAnimation("anim-y-minmax",function(e){var i=1*e;t.setState({animationsValues:c()({},t.state.animationsValues,{yMinMax:0+i})})},150)}},{key:"handleCreateLabelX",value:function(){var t=this.props,e=t.id,i=t.scroll,a=t.labels,n=t.layout,o=t.width,r=this.state.graphLayout;return new tt({id:e,width:o,scroll:i,labels:a,layout:n,graphLayout:r,getLabel:this.getLabelText.bind(this),getLabelIndexByX:this.getLabelIndexByRelativeX.bind(this)})}},{key:"handleZoom",value:function(){var t=this.state.showInfo,e=void 0!==t&&t;if(!1!==e){var i=this.props,a=i.labels,n=void 0===a?[]:a,o=i.zoomType;if("none"!==(void 0===o?"none":o)){var r=n[e];this.isShowInfo=!1,this.setState({showInfo:!1}),this.props.onZoom(r,e)}}}},{key:"render",value:function(){var t=this.props,e=t.allowXAsix,i=void 0!==e&&e,a=t.mini,n=void 0!==a&&a;this.canvasNode=k("canvas"),this.showInfoNode=k("div",{className:K.a.canvas__show_info,style:"opacity: 0;",onClick:this.handleZoom.bind(this)});var o={};return n||(o={onTouchMove:this.eventTouchMove.bind(this),onMouseMove:this.eventMouseMove.bind(this),onMouseLeave:this.eventMouseLeave.bind(this),onMouseEnter:this.eventMouseEnter.bind(this),onTouchStart:this.eventMouseDown.bind(this)}),this.element=k("div",c()({className:K.a.canvas_wrapper,children:this.canvasNode},o)),this.bars=new nt,this.bars.renderDom(this.element),this.element.appendChild(this.showInfoNode),i&&(this.labelX=this.handleCreateLabelX(),this.labelX.renderDom(this.element)),this.element}}]),e}(z);M()(st,"defaultProps",{mode:G,arcMode:!1,animateScale:!0,allowXAsix:!0,allowYAsix:!0,allowPointValue:!1,offset:0,limit:0,dataset:[],visibled:[],width:0,scroll:0,layout:{width:0,height:0},yScaled:!1,zoomType:"none"}),M()(st,"calcXStep",function(t){var e=t.width,i=t.limit,a=t.length,n=t.maxStep,o=void 0===n?1e3:n,r=t.minStep,s=void 0===r?1:r,c=i>0?e/((a-1)*i/100):e/a;return c=Math.min(c,o),c=Math.max(c,s)});var ct=st,lt=i(11),ht=i.n(lt),dt=i(19),ut=i.n(dt),pt=function(t){function e(){var t,i;f()(this,e);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return i=y()(this,(t=w()(e)).call.apply(t,[this].concat(n))),M()(u()(i),"touching",!1),M()(u()(i),"longTouchingTimeout",500),i}return x()(e,t),m()(e,[{key:"componentDidMount",value:function(){this.attachEvents()}},{key:"componentDidUpdate",value:function(t){var e=this.props,i=e.dataset,a=void 0===i?[]:i,n=e.visibled,o=void 0===n?[]:n,r=this.props.mode,s=void 0===r?G:r;t.dataset!==a?this.handleReRender():t.visibled===o&&t.mode===s||this.handleApplayVisibled()}},{key:"attachEvents",value:function(){document.addEventListener("mouseup",this.eventMouseUp.bind(this)),document.addEventListener("touchend",this.eventMouseUp.bind(this))}},{key:"eventMouseUp",value:function(t){if(this.touching){var e=this.touching,i=e.item,a=e.timeoutId,n=e.long,o=void 0!==n&&n,r=this.items.find(function(t){return t.id==="switcher-for-".concat(i.id)});if(r)t.target.closest(".".concat(ht.a.line__switchers__item))!==r?console.log("outside",i.id,t.target):(console.log("mouseup",i.id),r.classList.remove(ht.a.line__switchers__item__touching),clearTimeout(a),o?console.log("donw switch - couse long tap",i.id):this.props.onSwitch(i.id),this.touching=!1)}}},{key:"handleMouseDown",value:function(t,e){var i=this;console.log("mousedown",e.id),t.preventDefault(),t.stopPropagation();var a=this.items.find(function(t){return t.id==="switcher-for-".concat(e.id)});if(a){a.classList.add(ht.a.line__switchers__item__touching);var n=setTimeout(function(){i.touching.long=!0,console.log("timeout",e.id),i.props.onSelectOne(e.id)},this.longTouchingTimeout);this.touching={item:e,timeoutId:n,long:!1}}}},{key:"handleApplayVisibled",value:function(){var t=this,i=this.props,a=i.dataset,n=void 0===a?[]:a,o=i.visibled,r=void 0===o?[]:o,s=this.props.mode,c=void 0===s?G:s;n.forEach(function(i){var a=t.items.find(function(t){return t.id==="switcher-for-".concat(i.id)}),n=r.includes(i.id);if(!a)throw new Error("Can't find swticher for ".concat(i.id));var o=a.querySelector(".".concat(ht.a.line__switchers__item__label)),s=e.getColor(c,i.color);console.log({color:s}),a.style="border-color: ".concat(s,";")+(n?"background-color: ".concat(s):""),a.classList.toggle(ht.a.line__switchers__item_active,n),o&&(o.style=n?"":"color: ".concat(i.color,";"))})}},{key:"handleReRender",value:function(){var t=this,i=this.props,a=i.dataset,n=void 0===a?[]:a,o=i.visibled,r=void 0===o?[]:o,s=i.mode,c=void 0===s?G:s;this.items.forEach(function(t){return t.remove()}),this.items=e.createItems(n,r,c,this.handleMouseDown.bind(this)),this.items.forEach(function(e){return t.element.appendChild(e)})}},{key:"render",value:function(){var t=this.props,i=t.dataset,a=void 0===i?[]:i,n=t.visibled,o=void 0===n?[]:n,r=t.mode,s=void 0===r?G:r;return this.items=e.createItems(a,o,s,this.handleMouseDown.bind(this)),this.element=k("div",{className:ht.a.line__switchers,children:this.items}),this.element}}],[{key:"getDarknessColor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=X(t),a=C(i.r,i.g,i.b),n=R(a[0],a[1]-.2,a[2]);return i.r=n[0],i.g=n[1],i.b=n[2],t=e<1?"rgba(".concat(i.r,",").concat(i.g,",").concat(i.b,",").concat(e,")"):"rgb(".concat(i.r,",").concat(i.g,",").concat(i.b,")")}},{key:"getColor",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=X(e);if("night"===t){var n=C(a.r,a.g,a.b),o=R(n[0],n[1]-.2,n[2]);a.r=o[0],a.g=o[1],a.b=o[2]}return e=i<1?"rgba(".concat(a.r,",").concat(a.g,",").concat(a.b,",").concat(i,")"):"rgb(".concat(a.r,",").concat(a.g,",").concat(a.b,")")}},{key:"createItems",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G,n=arguments.length>3?arguments[3]:void 0;return t.map(function(t){var o=e.getColor(a,t.color),r=i.includes(t.id);return k("div",{id:"switcher-for-".concat(t.id),className:[ht.a.line__switchers__item,r?ht.a.line__switchers__item_active:""],style:"border-color: ".concat(o,";")+(r?"background-color: ".concat(o):""),children:[k("div",{className:ht.a.line__switchers__item__check,children:[k("div",{className:ht.a.line__switchers__item__check__icon,style:"background-image: url(".concat(ut.a,")")})]}),k("div",{className:ht.a.line__switchers__item__label,text:t.label,style:r?"":"color: ".concat(o,";")}),k("div",{className:ht.a.line__switchers__item__tap_indicator,style:"background-color: ".concat(o,";")})],onMouseDown:function(e){return n(e,t)},onTouchStart:function(e){return n(e,t)}})})}}]),e}(z);M()(pt,"defaultProps",{dataset:[],visibled:[]});var ft=pt,vt=function(){function t(e){f()(this,t),this.data=e}return m()(t,[{key:"getXAsix",value:function(){var t=this,e=Object.keys(this.data.types).find(function(e){return"x"===t.data.types[e]});if(!e)throw new Error("Can't found x type");var i=this.data.columns.find(function(t){return t.length>0&&t[0]===e});if(!i)throw new Error("Can't found x column");return i.slice(1)}},{key:"getCharts",value:function(){var t=this;return this.data.columns.filter(function(t){return"x"!==t[0]}).map(function(e){return{id:e[0],type:t.data.types[e[0]],label:t.data.names[e[0]],color:t.data.colors[e[0]],list:e.slice(1)}})}},{key:"getLines",value:function(){var t=this,e=Object.keys(this.data.types).filter(function(e){return"line"===t.data.types[e]});if(0===e.length)throw new Error("Can't found any lines");if(this.data.columns.filter(function(t){return t.length>0&&e.includes(t[0])}).length!==e.length)throw new Error("Can't found lines #".concat(e.join(",")," in columns"));return e.map(function(e){return t.getLine(e)})}},{key:"getLine",value:function(t){var e=this.data.columns.find(function(e){return e.length>0&&e[0]===t}),i=this.data.names[t],a=this.data.colors[t];if(!e)throw new Error("Can't found ".concat(t," column"));if(!i)throw new Error("Can't name for type #".concat(t));if(!a)throw new Error("Can't found color for type #".concat(t));return{id:t,label:i,color:a,list:e.slice(1)}}},{key:"IsYScaled",value:function(){return!!this.data.y_scaled}},{key:"IsStacked",value:function(){return!!this.data.stacked}},{key:"length",get:function(){return this.data.length}}]),t}(),mt=i(20),_t=i.n(mt),yt=i(9),gt=i.n(yt),wt=i(12),bt=i.n(wt),xt=function(t){function e(t){var i;f()(this,e),i=y()(this,w()(e).call(this,t)),M()(u()(i),"eventMouseMove",function(t){if(i.isChangePosition){var e=i.props,a=e.layout,n=e.width,o=i.changePositionEvent.scroll,r={x:i.changePositionEvent.x,y:i.changePositionEvent.y},s=T(t),c=r.x-s.x,l=c>0?1:0;if(0!==(c=Math.abs(c))){var h=100*c/a.width,d=o+h;1===l&&(d=o-h),d-n<0&&(d=n),d>100&&(d=100),i.props.scroll!==d&&i.props.onChange({scroll:d,width:n})}}if(i.isChangeSize){var u=i.props.layout,p=i.changeSizeEvent,f=p.width,v=p.side,m=void 0===v?"left":v,_={x:i.changeSizeEvent.x,y:i.changeSizeEvent.y},y=T(t),g=_.x-y.x,w=g>0?1:0;if(0!==(g=Math.abs(g)))if("left"===m){var b=i.props.scroll,x=100*g/u.width,S=f-x;1===w&&(S=f+x),S>b&&(S=b),S<5&&(S=5),i.props.width!==S&&i.props.onChange({width:S,scroll:b})}else if("right"===m){var M=i.changeSizeEvent.scroll,k=100*g/u.width,L=f+k,z=M+k;if(1===w&&(L=f-k,z=M-k),z>100)z=100,L=100-(M-f);L<5&&(L=5),i.props.width!==L&&i.props.onChange({width:L,scroll:z})}}}),M()(u()(i),"eventMouseUp",function(){i.isChangePosition=!1,i.isChangeSize=!1,i.changePositionEvent=!1,i.changeSizeEvent=!1}),M()(u()(i),"eventLeftZoneMouseDown",function(t){var e=i.props,a=e.width,n=e.scroll;i.isChangeSize=!0,i.changeSizeEvent=c()({},T(t),{side:"left",width:a,scroll:n})}),M()(u()(i),"eventRightZoneMouseDown",function(t){var e=i.props,a=e.width,n=e.scroll;i.isChangeSize=!0,i.changeSizeEvent=c()({},T(t),{side:"right",width:a,scroll:n})}),M()(u()(i),"eventZoneMouseDown",function(t){var e=i.props.scroll;i.isChangePosition=!0,i.changePositionEvent=c()({},T(t),{scroll:e})});var a=t.id,n=t.dataset,o=void 0===n?[]:n,r=t.mode,s=t.layout,l=t.yScaled;return i.cartMiniMap=new ct({id:a,mode:r,mini:!0,lineWidth:2,dataset:o,yScaled:l,allowXAsix:!1,allowYAsix:!1,layout:{width:s.width,height:50}}),i}return x()(e,t),m()(e,[{key:"componentDidMount",value:function(){this.attachEvents()}},{key:"componentDidUpdate",value:function(t){var e=this.props,i=e.scroll,a=e.width,n=e.dataset,o=e.layout,r=e.visibled,s=e.yScaled,c=e.mode;t.scroll===i&&t.width===a||(this.minimapZone.style.left="".concat(i-a,"%"),this.minimapZone.style.width="".concat(a,"%"),this.minimapLeftZone.style="width: ".concat(i-a,"%"),this.minimapRightZone.style="width: ".concat(100-i,"%"),this.minimapLeftSizeZone.style="left: ".concat(i-a,"%;"),this.minimapRightSizeZone.style="left: ".concat(i,"%;")),t.dataset===n&&t.yScaled===s&&t.visibled===r&&t.layout===o&&t.mode===c||this.cartMiniMap.setProps({yScaled:s,visibled:r,dataset:n,mode:c,layout:{width:o.width-36,height:45}})}},{key:"dettachEvents",value:function(){document.removeEventListener("mousemove",this.documentEventMouseMove),document.removeEventListener("mouseup",this.documentEventMouseUp),document.removeEventListener("touchmove",this.documentEventMouseMove),document.removeEventListener("touchend",this.documentEventMouseUp)}},{key:"attachEvents",value:function(){this.documentEventMouseMove=this.eventMouseMove.bind(this),this.documentEventMouseUp=this.eventMouseUp.bind(this),document.addEventListener("mousemove",this.documentEventMouseMove),document.addEventListener("mouseup",this.documentEventMouseUp),document.addEventListener("touchmove",this.documentEventMouseMove),document.addEventListener("touchend",this.documentEventMouseUp)}},{key:"render",value:function(){var t=this.props,e=t.scroll,i=t.width;return this.minimapLeftZone=k("div",{className:bt.a.minimap__left_zone,style:"width: ".concat(e-i,"%")}),this.minimapLeftSizeZone=k("div",{className:bt.a.minimap__left_size_zone,style:"left: ".concat(e-i,"%;"),children:[k("div",{className:bt.a.minimap__size_zone__helper,onMouseDown:this.eventLeftZoneMouseDown.bind(this),onTouchStart:this.eventLeftZoneMouseDown.bind(this)}),k("div",{className:bt.a.minimap__size_zone__helper__line})]}),this.minimapZone=k("div",{className:bt.a.minimap__zone,style:"left: ".concat(e-i,"%; width: ").concat(i,"%"),onMouseDown:this.eventZoneMouseDown.bind(this),onTouchStart:this.eventZoneMouseDown.bind(this)}),this.minimapRightSizeZone=k("div",{className:bt.a.minimap__right_size_zone,style:"left: ".concat(e,"%;"),children:[k("div",{className:bt.a.minimap__size_zone__helper,onMouseDown:this.eventRightZoneMouseDown.bind(this),onTouchStart:this.eventRightZoneMouseDown.bind(this)}),k("div",{className:bt.a.minimap__size_zone__helper__line})]}),this.minimapRightZone=k("div",{className:bt.a.minimap__right_zone,style:"width: ".concat(100-e,"%")}),this.minimap=k("div",{className:bt.a.minimap,children:[this.minimapLeftZone,this.minimapLeftSizeZone,this.minimapZone,this.minimapRightSizeZone,this.minimapRightZone]}),this.canvasWrapper=k("div",{className:bt.a.minimap__canvas_wrapper}),this.element=k("div",{className:bt.a.charts__minimap_wrapper,children:[this.minimap,this.canvasWrapper]}),this.cartMiniMap.renderDom(this.canvasWrapper),this.element}}]),e}(z);M()(xt,"defaultProps",{id:0,dataset:[],visibled:[],layout:{},scroll:0,width:0,yScaled:!1});var St=xt,Mt=i(16),kt=i.n(Mt),Lt=function(t){function e(t){var i;f()(this,e),i=y()(this,w()(e).call(this,t)),M()(u()(i),"state",{date_from:!1,date_to:!1}),M()(u()(i),"nodes",{from:!1,to:!1});var a=t.from,n=void 0!==a&&a,o=t.to,r=void 0!==o&&o;return i.applyTimestamp(n,"from"),i.applyTimestamp(r,"to"),i.appearDatesRange(i.state.from,i.state.to),i}return x()(e,t),m()(e,[{key:"componentDidUpdate",value:function(t,e){var i=this.props,a=i.from,n=void 0!==a&&a,o=i.to,r=void 0!==o&&o,s=t.from,c=void 0!==s&&s,l=t.to,h=void 0!==l&&l,d=this.state,u=d.date_from,p=d.date_to;n!==c&&this.applyTimestamp(n,"from"),r!==h&&this.applyTimestamp(r,"to"),u!==e.date_from&&this.applyDateItem(u,"from"),this.isSameDay(u,p)||p===e.date_to||this.applyDateItem(p,"to"),this.isSameDay(u,p)&&this.isDateItemShown("to")&&this.hideDateItem(p,"to")}},{key:"isSameDay",value:function(t,e){return!1!==t&&!1!==e&&(t.year===e.year&&t.month===e.month&&t.day===e.day)}},{key:"parseTimestamp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!1!==t){var e=new Date(t);return{year:e.getFullYear(),month:H[e.getMonth()],day:e.getDate()}}return!1}},{key:"applyTimestamp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"from";this.setState(M()({},"date_".concat(e),this.parseTimestamp(t)))}},{key:"createDateItem",value:function(t){var e=t.year,i=t.month,a=t.day,n=k("div",{className:kt.a.dates_range__item__year,text:e}),o=k("div",{className:kt.a.dates_range__item__month,text:i}),r=k("div",{className:kt.a.dates_range__item__day,text:a});return{item:k("div",{className:kt.a.dates_range__item,children:[r,o,n]}),year:n,month:o,day:r}}},{key:"appearDateItem",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"from";this.nodes[e]=!1!==t&&this.createDateItem(t)}},{key:"appearDatesRange",value:function(t,e){this.appearDateItem(t,"from"),this.appearDateItem(e,"to")}},{key:"updateDateItem",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"from";!1!==t&&(this.nodes[e].year.innerText=t.year,this.nodes[e].month.innerText=t.month,this.nodes[e].day.innerText=t.day)}},{key:"isDateItemShown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"from";return!1!==this.nodes[t]}},{key:"showDateItem",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"from";!1!==t&&(this.appearDateItem(t,e),this.nodes[e]&&this.element.appendChild(this.nodes[e].item))}},{key:"hideDateItem",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"from";this.nodes[t]&&(this.element.removeChild(this.nodes[t].item),this.nodes[t]=!1)}},{key:"applyDateItem",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"from";this.isDateItemShown(e)?!1!==t?this.updateDateItem(t,e):this.hideDateItem(t,e):!1!==t&&this.showDateItem(t,e)}},{key:"render",value:function(){var t=[];return this.nodes.from&&t.push(this.nodes.from.item),this.nodes.to&&t.push(this.nodes.to.item),this.element=k("div",{className:kt.a.dates_range,children:t}),this.element}}]),e}(z);M()(Lt,"defaultProps",{from:!1,to:!1});var zt=Lt,Ot=function(t){function e(){return f()(this,e),y()(this,w()(e).apply(this,arguments))}return x()(e,t),m()(e,[{key:"componentWillUnmount",value:function(){this.cart&&(this.cart.destroy(),this.cart=null),this.miniMap&&(this.miniMap.destroy(),this.miniMap=null)}},{key:"componentDidUpdate",value:function(t){var e=this.props,i=e.arcMode,a=e.fontSize,n=e.loading,o=e.zoom,r=e.colors,s=e.layout,c=e.mode,l=e.data;if(t!==a&&this.element.setAttribute("style","font-size: ".concat(a,"px")),t.mode!==c&&(this.applyColorMode(),this.cart.setProps({mode:c}),this.miniMap.setProps({mode:c}),this.lineSwitcher.setProps({mode:c})),t.arcMode!==i&&this.cart.setProps({arcMode:i}),t.colors!==r&&(this.cart.setProps({colors:r}),this.miniMap.setProps({colors:r})),t.data.title===l.title&&t.loading===n||this.updateTitle(),t.data!==l){var h=this.props.data,d=h.visibled,u=void 0===d?[]:d,p=h.dataset,f=void 0===p?[]:p,v=h.labels,m=h.scroll,_=h.width,y=h.yScaled,g=void 0!==y&&y,w=h.stacked,b=void 0!==w&&w,x=f.length>0?f[0].list.length:0,S=Dt.calcLimitOffset(x,_,m),M=S.limit,k=S.offset;this.cart.setProps({yScaled:g,dataset:f,labels:v,visibled:u,offset:k,limit:M,scroll:m,width:_,stacked:b,zoom:o}),t.data.dataset===f&&t.data.yScaled===g&&t.data.scroll===m&&t.data.width===_&&t.data.visibled===u||(this.miniMap.setProps({scroll:m,width:_,yScaled:g,visibled:u,dataset:f}),this.lineSwitcher.setProps({dataset:f,visibled:u})),t.data.scroll===m&&t.data.width===_&&t.data.dataset===f&&t.data.labels===v||this.datesRange.setProps({from:v[k],to:v[k+M-1]})}!1!==t.zoom&&!1===o?this.zoomOut.classList.toggle(gt.a.charts__zoom_out__show):!1===t.zoom&&!1!==o&&this.zoomOut.classList.toggle(gt.a.charts__zoom_out__show),t.layout!==s&&(this.cart.setProps({layout:{width:s.width,height:window.innerHeight/100*40}}),this.miniMap.setProps({layout:s}))}},{key:"applyColorMode",value:function(){var t=this.props.mode;this.ownElement.classList.toggle(gt.a.mode_night,"night"===t),this.colorSwitcherItem.innerText=q[t]}},{key:"updateTitle",value:function(){var t=this.props,e=t.data.title,i=void 0===e?"":e,a=t.loading,n=void 0!==a&&a;this.title.innerText=n?"Loading...":i}},{key:"changeMiniMap",value:function(t){var e=t.width,i=t.scroll;this.props.onChangeOffsets({width:e,scroll:i})}},{key:"render",value:function(){var t=this.props,e=t.animateScale,i=void 0===e||e,a=t.fontSize,n=void 0===a?16:a,o=t.loading,r=void 0!==o&&o,s=t.arcMode,c=void 0!==s&&s,l=t.zoomType,h=void 0===l?"none":l,d=t.zoom,u=void 0!==d&&d,p=t.colors,f=t.layout,v=t.mode,m=t.data,_=m.title,y=void 0===_?"":_,g=m.visibled,w=void 0===g?[]:g,b=m.dataset,x=void 0===b?[]:b,S=m.labels,M=m.scroll,L=m.width,z=m.yScaled,O=void 0!==z&&z,D=m.stacked,I=void 0!==D&&D,A=x.length>0?x[0].list.length:0,E=Dt.calcLimitOffset(A,L,M),T=E.limit,P=E.offset;return this.cart=new ct({id:1,animateScale:i,zoomType:h,lineWidth:2,mode:v,zoom:u,arcMode:c,visibled:w,dataset:x,offset:P,limit:T,scroll:M,width:L,labels:S,yScaled:O,stacked:I,layout:{width:f.width,height:window.innerHeight/100*40},colors:p,onZoom:this.props.onZoom}),this.miniMap=new St({id:1,lineWidth:2,mode:v,dataset:x,layout:f,scroll:M,width:L,yScaled:O,onChange:this.changeMiniMap.bind(this)}),this.lineSwitcher=new ft({mode:v,dataset:x,visibled:w,onSwitch:this.props.onSwitchVisible,onSelectOne:this.props.onSelectOneVisible}),this.colorSwitcherItem=k("div",{className:gt.a.color__switcher__item,text:q[v],onClick:this.props.onToggleMode}),this.colorSwitcher=k("div",{className:gt.a.color__switcher,children:this.colorSwitcherItem}),this.title=k("h1",{className:gt.a.chart_title,text:r?"Loading...":y}),this.datesRange=new zt({from:S[P],to:S[P+T-1]}),this.zoomOut=k("div",{className:gt.a.charts__zoom_out,children:[k("div",{className:gt.a.charts__zoom_out__icon,style:"background-image: url(".concat(_t.a,")")}),k("div",{className:gt.a.charts__zoom_out__text,text:"Zoom Out"})],onClick:this.props.onZoomOut}),this.chartsHeader=k("div",{className:gt.a.charts__header,children:[this.title,this.zoomOut]}),this.element=k("div",{className:gt.a.charts,style:"font-size: ".concat(n,"px"),children:this.chartsHeader}),this.datesRange.renderDom(this.chartsHeader),this.cart.renderDom(this.element),this.miniMap.renderDom(this.element),this.lineSwitcher.renderDom(this.element),this.element.appendChild(this.colorSwitcher),this.element}}]),e}(z);M()(Ot,"defaultProps",{animateScale:!0});var Dt=function(t){function e(){var t,i;f()(this,e);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return i=y()(this,(t=w()(e)).call.apply(t,[this].concat(o))),M()(u()(i),"state",{mode:G,layout:{width:0,height:0},data:{title:"",scroll:100,width:25,dataset:[],labels:[],visibled:[],yScaled:!1},fontSize:16,init:!1,loading:!0,zoom:!1}),M()(u()(i),"element",!1),M()(u()(i),"chart",!1),M()(u()(i),"handleZoom",function(){var t=h()(r.a.mark(function t(e,a){var n,o,s,l,h,d,u,p,f,v,m,_;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.props,o=n.zoomType,s=void 0===o?"none":o,l=n.getZoomedDataUrl,"byDay"!==s){t.next=10;break}h=i.getCurrentData(),5,5,d=h.dataset.map(function(t){return c()({},t,{list:t.list.slice(a-5,a+5)})}),u=h.labels.slice(a-5,a+5),i.setState({zoom:{title:h.title,visibled:h.visibled,yScaled:h.yScaled,index:a,unixTimestamp:e,offsetBefore:5,offsetAfter:5,scroll:60,width:10,labels:u,dataset:d}}),t.next=20;break;case 10:if("byHours"!==s){t.next=20;break}return p=i.getCurrentData(),i.setState({loading:!0}),f=l(e),t.next=16,i.loadData(f);case 16:v=t.sent,m=v.getCharts(),_=v.getXAsix(),i.setState({zoom:{title:p.title,yScaled:p.yScaled,scroll:50,width:10,labels:_,dataset:m,visibled:m.map(function(t){return t.id})},loading:!1});case 20:case"end":return t.stop()}},t)}));return function(e,i){return t.apply(this,arguments)}}()),M()(u()(i),"handleZoomOut",function(){i.setState({zoom:!1})}),M()(u()(i),"handleSwitchDataSet",function(t){var e=i.getCurrentData().visibled,a=void 0===e?[]:e;a.includes(t)?i.setCurrentData({visibled:a.filter(function(e){return e!==t})}):i.setCurrentData({visibled:[].concat(n()(a),[t])})}),M()(u()(i),"handleSelectOneVisibleDataSet",function(t){i.setCurrentData({visibled:[t]})}),i}return x()(e,t),m()(e,[{key:"componentDidMount",value:function(){this.prepareOwnElement();var t=+(window.innerWidth/40).toFixed(2);t>16&&(t=16),this.setState({fontSize:t,init:!0,layout:{width:window.innerWidth,height:this.element.clientHeight}}),this.handleLoadDataCharts()}},{key:"componentDidUpdate",value:function(t,e){var i=this.props.arcMode,a=this.state,n=a.zoom,o=a.fontSize,r=a.loading,s=a.layout,c=a.mode,l=a.data;t.arcMode===i&&e.zoom===n&&e.fontSize===o&&e.loading===r&&e.layout===s&&e.mode===c&&e.data===l||this.chart.setProps({zoom:!1!==n,arcMode:!1!==n&&i,fontSize:o,loading:r,colors:J[c],layout:s,mode:c,data:!1===n?l:n})}},{key:"attachEvents",value:function(){var t=this;window.onresize=I(function(){t.setState({layout:{width:t.element.clientWidth,height:t.element.clientHeight}}),t.updateFontSize()},100)}},{key:"getCurrentData",value:function(){var t=this.state,e=t.data,i=t.zoom,a=void 0!==i&&i;return!1!==a?a:e}},{key:"setCurrentData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.state,i=e.data,a=e.zoom,n=void 0!==a&&a;!1!==n?this.setState({zoom:c()({},n,t)}):this.setState({data:c()({},i,t)})}},{key:"prepareOwnElement",value:function(){var t=this.state.mode;this.ownElement.classList.toggle(gt.a.mode_night,"night"===t),this.ownElement.classList.add(gt.a.app)}},{key:"loadData",value:function(){var t=h()(r.a.mark(function t(e){var i,a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(e);case 2:return i=t.sent,a=JSON.parse(i),n=new vt(a),t.abrupt("return",n);case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"setDataChart",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Chart",i=t.getCharts(),a=t.getXAsix();this.setState({data:{title:e,scroll:100,width:25,dataset:i,labels:a,visibled:i.map(function(t){return t.id}),yScaled:t.IsYScaled(),
//!!dataJson.y_scaled,
stacked:t.IsStacked()}})}},{key:"handleLoadDataCharts",value:function(){var t=h()(r.a.mark(function t(){var e,i,a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props,i=e.name,a=e.dataUrl,this.setState({loading:!0}),t.next=4,this.loadData(a);case 4:n=t.sent,this.setDataChart(n,i),this.setState({loading:!1});case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"updateFontSize",value:function(){var t=+(window.innerWidth/40).toFixed(2);t>16&&(t=16),this.state.fontSize!==t&&this.setState({fontSize:t})}},{key:"handleToggleColorMode",value:function(){var t=this.state.mode;this.setState({mode:t===G?"night":G})}},{key:"handleUpdateMiniMap",value:function(t){var e=t.width,i=t.scroll;this.setCurrentData({width:e,scroll:i})}},{key:"render",value:function(){var t=this.props,e=t.animateScale,i=void 0===e||e,a=t.zoomType,n=void 0===a?"none":a,o=this.state,r=o.loading,s=void 0!==r&&r,c=o.zoom,l=void 0!==c&&c,h=o.layout,d=o.mode,u=o.data,p=o.fontSize,f=void 0===p?16:p;return this.chart=new Ot({animateScale:i,arcMode:!1,zoomType:n,zoom:l,fontSize:f,loading:s,colors:J[d],layout:h,mode:d,data:u,onToggleMode:this.handleToggleColorMode.bind(this),onSwitchVisible:this.handleSwitchDataSet.bind(this),onSelectOneVisible:this.handleSelectOneVisibleDataSet.bind(this),onChangeOffsets:this.handleUpdateMiniMap.bind(this),onZoom:this.handleZoom.bind(this),onZoomOut:this.handleZoomOut.bind(this)}),this.element=k("div",{className:gt.a.app,style:"font-size: ".concat(f,"px")}),this.chart.renderDom(this.element),this.element}}],[{key:"getXLabelText",value:function(t){var e=new Date(t),i=H[e.getMonth()],a=e.getDate(),n=e.getFullYear();return"".concat(a," ").concat(i," ").concat(n)}},{key:"calcLimitOffset",value:function(t,e,i){var a=t>0?Math.round(t/100*e):0,n=t>0?Math.round(t/100*i)-a:0;return isNaN(a)&&(a=0,console.warn("[App][calcLimitOffset] invalid params:",{length:t,width:e,scroll:i})),isNaN(n)&&(n=0,console.warn("[App][calcLimitOffset] invalid params:",{length:t,width:e,scroll:i})),{limit:a,offset:n}}}]),e}(z);M()(Dt,"defaultProps",{animateScale:!0,arcMode:!1});var It=Dt,At=function(t){return function(e){var i=new Date(e),a=i.getFullYear(),n=i.getMonth()+1,o=i.getDate();1==="".concat(n).length&&(n="0".concat(n)),1==="".concat(o).length&&(o="0".concat(o));var r="".concat(a,"-").concat(n);return"".concat(t,"/").concat(r,"/").concat(o,".json")}};-1===window.location.pathname.indexOf("stage-2.html")?(window.app0=new It({name:"Chart 1",dataUrl:"data/data.0.json"}),window.app0.renderDom(document.getElementById("app0")),window.app1=new It({name:"Chart 2",dataUrl:"data/data.1.json"}),window.app1.renderDom(document.getElementById("app1")),window.app2=new It({name:"Chart 3",dataUrl:"data/data.2.json"}),window.app2.renderDom(document.getElementById("app2")),window.app3=new It({name:"Chart 4",dataUrl:"data/data.3.json"}),window.app3.renderDom(document.getElementById("app3")),window.app4=new It({name:"Chart 5",dataUrl:"data/data.4.json"}),window.app4.renderDom(document.getElementById("app4"))):window.location.pathname.indexOf("stage-2.html")>-1&&(window.app0=new It({name:"Followers",dataUrl:"data/new/1/overview.json",zoomType:"byHours",getZoomedDataUrl:At("data/new/1")}),window.app0.renderDom(document.getElementById("app0")),window.app1=new It({name:"Interactions",dataUrl:"data/new/2/overview.json",zoomType:"byHours",getZoomedDataUrl:At("data/new/2")}),window.app1.renderDom(document.getElementById("app1")),window.app2=new It({name:"Chart 3",dataUrl:"data/new/3/overview.json",zoomType:"byHours",getZoomedDataUrl:At("data/new/3")}),window.app2.renderDom(document.getElementById("app2")),window.app3=new It({name:"Views",dataUrl:"data/new/4/overview.json",zoomType:"byHours",getZoomedDataUrl:At("data/new/4")}),window.app3.renderDom(document.getElementById("app3")),window.app4=new It({name:"Chart 5",dataUrl:"data/new/5/overview.json",zoomType:"byDay",arcMode:!0}),window.app4.renderDom(document.getElementById("app4")))}]);
//# sourceMappingURL=main.c912a8a0d4f59443eae2.js.map
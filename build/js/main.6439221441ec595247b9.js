!function(t){var e={};function i(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=34)}([function(t,e){t.exports=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,i){var a=i(0);t.exports=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){a(t,e,i[e])})}return t}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function i(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}t.exports=function(t,e,a){return e&&i(t.prototype,e),a&&i(t,a),t}},function(t,e,i){t.exports={canvas_wrapper:"canvas_wrapper",canvasWrapper:"canvas_wrapper",canvas__show_info:"canvas__show_info",canvasShowInfo:"canvas__show_info",canvas__show_info__wrapper:"canvas__show_info__wrapper",canvasShowInfoWrapper:"canvas__show_info__wrapper",mode_night:"mode_night",modeNight:"mode_night",canvas__show_info__title:"canvas__show_info__title",canvasShowInfoTitle:"canvas__show_info__title",canvas__show_info__title__value:"canvas__show_info__title__value",canvasShowInfoTitleValue:"canvas__show_info__title__value",canvas__show_info__title__zoom:"canvas__show_info__title__zoom",canvasShowInfoTitleZoom:"canvas__show_info__title__zoom",canvas__show_info__title__zoom__icon:"canvas__show_info__title__zoom__icon",canvasShowInfoTitleZoomIcon:"canvas__show_info__title__zoom__icon",canvas__show_info__rows:"canvas__show_info__rows",canvasShowInfoRows:"canvas__show_info__rows",canvas__show_info__row__item:"canvas__show_info__row__item",canvasShowInfoRowItem:"canvas__show_info__row__item",canvas__show_info__row__item__percent:"canvas__show_info__row__item__percent",canvasShowInfoRowItemPercent:"canvas__show_info__row__item__percent",canvas__show_info__row__item__name:"canvas__show_info__row__item__name",canvasShowInfoRowItemName:"canvas__show_info__row__item__name",canvas__show_info__row__item__value:"canvas__show_info__row__item__value",canvasShowInfoRowItemValue:"canvas__show_info__row__item__value",canvas__show_info__row__item_with_percent:"canvas__show_info__row__item_with_percent",canvasShowInfoRowItemWithPercent:"canvas__show_info__row__item_with_percent",canvas_wrapper__x_labels_wrapper:"canvas_wrapper__x_labels_wrapper",canvasWrapperXLabelsWrapper:"canvas_wrapper__x_labels_wrapper",charts:"charts",charts__zoom_byDay:"charts__zoom_byDay",chartsZoomByDay:"charts__zoom_byDay",charts__zoomed:"charts__zoomed",chartsZoomed:"charts__zoomed",charts__stacked:"charts__stacked",chartsStacked:"charts__stacked",charts__percentage:"charts__percentage",chartsPercentage:"charts__percentage",canvas_wrapper__x_labels_wrapper__item:"canvas_wrapper__x_labels_wrapper__item",canvasWrapperXLabelsWrapperItem:"canvas_wrapper__x_labels_wrapper__item",canvas__show_select_arc:"canvas__show_select_arc",canvasShowSelectArc:"canvas__show_select_arc",label:"label",value:"value"}},function(t,e,i){var a=i(25),n=i(26),o=i(27);t.exports=function(t){return a(t)||n(t)||o()}},function(t,e,i){var a=i(29),n=i(1);t.exports=function(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?n(t):e}},function(t,e){function i(e){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},i(e)}t.exports=i},function(t,e,i){var a=i(30);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}},function(t,e,i){t.exports={line__switchers:"line__switchers",lineSwitchers:"line__switchers",line__switchers__item:"line__switchers__item",lineSwitchersItem:"line__switchers__item",line__switchers__item_active:"line__switchers__item_active",lineSwitchersItemActive:"line__switchers__item_active",mode_night:"mode_night",modeNight:"mode_night",line__switchers__item__check:"line__switchers__item__check",lineSwitchersItemCheck:"line__switchers__item__check",line__switchers__item__check__circle_blank:"line__switchers__item__check__circle_blank",lineSwitchersItemCheckCircleBlank:"line__switchers__item__check__circle_blank",line__switchers__item__check__icon:"line__switchers__item__check__icon",lineSwitchersItemCheckIcon:"line__switchers__item__check__icon",line__switchers__item__label:"line__switchers__item__label",lineSwitchersItemLabel:"line__switchers__item__label",line__switchers__item__tap_indicator:"line__switchers__item__tap_indicator",lineSwitchersItemTapIndicator:"line__switchers__item__tap_indicator",line__switchers__item__touching:"line__switchers__item__touching",lineSwitchersItemTouching:"line__switchers__item__touching",charts:"charts",charts__zoom_by3Days:"charts__zoom_by3Days",chartsZoomBy3Days:"charts__zoom_by3Days",line__switchers__item_fadein:"line__switchers__item_fadein",lineSwitchersItemFadein:"line__switchers__item_fadein",line__switchers__item_shake:"line__switchers__item_shake",lineSwitchersItemShake:"line__switchers__item_shake",shake:"shake"}},function(t,e,i){t.exports={app:"app",mode_night:"mode_night",modeNight:"mode_night",charts:"charts",charts__header:"charts__header",chartsHeader:"charts__header",charts__footer:"charts__footer",chartsFooter:"charts__footer",chart_title:"chart_title",chartTitle:"chart_title",charts__zoomed:"charts__zoomed",chartsZoomed:"charts__zoomed",charts__title_wrapper:"charts__title_wrapper",chartsTitleWrapper:"charts__title_wrapper",charts__zoom_out:"charts__zoom_out",chartsZoomOut:"charts__zoom_out",charts__zoom_out__icon:"charts__zoom_out__icon",chartsZoomOutIcon:"charts__zoom_out__icon",charts__zoom_out__text:"charts__zoom_out__text",chartsZoomOutText:"charts__zoom_out__text",charts__dates:"charts__dates",chartsDates:"charts__dates"}},function(t,e,i){var a=i(31),n=i(32),o=i(33);t.exports=function(t,e){return a(t)||n(t,e)||o()}},function(t,e,i){t.exports={charts__minimap_wrapper:"charts__minimap_wrapper",chartsMinimapWrapper:"charts__minimap_wrapper",charts:"charts",charts__zoom_by3Days:"charts__zoom_by3Days",chartsZoomBy3Days:"charts__zoom_by3Days",charts__zoomed:"charts__zoomed",chartsZoomed:"charts__zoomed",minimap__canvas_wrapper:"minimap__canvas_wrapper",minimapCanvasWrapper:"minimap__canvas_wrapper",minimap:"minimap",minimap__zone:"minimap__zone",minimapZone:"minimap__zone",minimap__left_zone:"minimap__left_zone",minimapLeftZone:"minimap__left_zone",minimap__right_zone:"minimap__right_zone",minimapRightZone:"minimap__right_zone",minimap__left_size_zone:"minimap__left_size_zone",minimapLeftSizeZone:"minimap__left_size_zone",minimap__right_size_zone:"minimap__right_size_zone",minimapRightSizeZone:"minimap__right_size_zone",mode_night:"mode_night",modeNight:"mode_night",minimap__size_zone__helper:"minimap__size_zone__helper",minimapSizeZoneHelper:"minimap__size_zone__helper",minimap__size_zone__helper__line:"minimap__size_zone__helper__line",minimapSizeZoneHelperLine:"minimap__size_zone__helper__line",app4:"app4",app:"app"}},function(t,e,i){t.exports=i(28)},function(t,e,i){t.exports={dates_range:"dates_range",datesRange:"dates_range",mode_night:"mode_night",modeNight:"mode_night",dates_range__item:"dates_range__item",datesRangeItem:"dates_range__item",dates_range__item__year:"dates_range__item__year",datesRangeItemYear:"dates_range__item__year",dates_range__item__month:"dates_range__item__month",datesRangeItemMonth:"dates_range__item__month",dates_range__item__day:"dates_range__item__day",datesRangeItemDay:"dates_range__item__day"}},function(t,e){function i(t,e,i,a,n,o,s){try{var r=t[o](s),c=r.value}catch(t){return void i(t)}r.done?e(c):Promise.resolve(c).then(a,n)}t.exports=function(t){return function(){var e=this,a=arguments;return new Promise(function(n,o){var s=t.apply(e,a);function r(t){i(s,n,o,r,c,"next",t)}function c(t){i(s,n,o,r,c,"throw",t)}r(void 0)})}}},function(t,e,i){t.exports={color__switcher:"color__switcher",colorSwitcher:"color__switcher",mode_night:"mode_night",modeNight:"mode_night",color__switcher__item:"color__switcher__item",colorSwitcherItem:"color__switcher__item"}},function(t,e,i){t.exports={canvas_wrapper__bar_chart:"canvas_wrapper__bar_chart",canvasWrapperBarChart:"canvas_wrapper__bar_chart",canvas_wrapper__bar_chart__item:"canvas_wrapper__bar_chart__item",canvasWrapperBarChartItem:"canvas_wrapper__bar_chart__item"}},function(t,e,i){t.exports=i.p+"images/9220a51ecfe052627bcc2a438c5ace20.svg"},function(t,e,i){t.exports=i.p+"images/6b30107b9c292969a9c2074da8faa30c.svg"},function(t,e,i){t.exports=i.p+"images/6cdc909770f6bbc93b79d0acf7ec0e17.svg"},function(t,e,i){},function(t,e,i){t.exports={chromeframe:"chromeframe"}},function(t,e){!function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),a=Math.max(0,16-(i-t)),n=window.setTimeout(function(){e(i+a)},a);return t=i+a,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}()},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e,i){var a=function(t){"use strict";var e,i=Object.prototype,a=i.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",r=n.toStringTag||"@@toStringTag";function c(t,e,i,a){var n=e&&e.prototype instanceof v?e:v,o=Object.create(n.prototype),s=new A(a||[]);return o._invoke=function(t,e,i){var a=h;return function(n,o){if(a===u)throw new Error("Generator is already running");if(a===p){if("throw"===n)throw o;return L()}for(i.method=n,i.arg=o;;){var s=i.delegate;if(s){var r=M(s,i);if(r){if(r===f)continue;return r}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===h)throw a=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=u;var c=l(t,e,i);if("normal"===c.type){if(a=i.done?p:d,c.arg===f)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(a=p,i.method="throw",i.arg=c.arg)}}}(t,i,s),o}function l(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h="suspendedStart",d="suspendedYield",u="executing",p="completed",f={};function v(){}function m(){}function _(){}var y={};y[o]=function(){return this};var w=Object.getPrototypeOf,g=w&&w(w(z([])));g&&g!==i&&a.call(g,o)&&(y=g);var b=_.prototype=v.prototype=Object.create(y);function x(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function S(t){var e;this._invoke=function(i,n){function o(){return new Promise(function(e,o){!function e(i,n,o,s){var r=l(t[i],t,n);if("throw"!==r.type){var c=r.arg,h=c.value;return h&&"object"==typeof h&&a.call(h,"__await")?Promise.resolve(h.__await).then(function(t){e("next",t,o,s)},function(t){e("throw",t,o,s)}):Promise.resolve(h).then(function(t){c.value=t,o(c)},function(t){return e("throw",t,o,s)})}s(r.arg)}(i,n,e,o)})}return e=e?e.then(o,o):o()}}function M(t,i){var a=t.iterator[i.method];if(a===e){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=e,M(t,i),"throw"===i.method))return f;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(a,t.iterator,i.arg);if("throw"===n.type)return i.method="throw",i.arg=n.arg,i.delegate=null,f;var o=n.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,f):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function z(t){if(t){var i=t[o];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,s=function i(){for(;++n<t.length;)if(a.call(t,n))return i.value=t[n],i.done=!1,i;return i.value=e,i.done=!0,i};return s.next=s}}return{next:L}}function L(){return{value:e,done:!0}}return m.prototype=b.constructor=_,_.constructor=m,_[r]=m.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,r in t||(t[r]="GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},x(S.prototype),S.prototype[s]=function(){return this},t.AsyncIterator=S,t.async=function(e,i,a,n){var o=new S(c(e,i,a,n));return t.isGeneratorFunction(i)?o:o.next().then(function(t){return t.done?t.value:o.next()})},x(b),b[r]="Generator",b[o]=function(){return this},b.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var a=e.pop();if(a in t)return i.value=a,i.done=!1,i}return i.done=!0,i}},t.values=z,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var i in this)"t"===i.charAt(0)&&a.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function n(a,n){return r.type="throw",r.arg=t,i.next=a,n&&(i.method="next",i.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],r=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var c=a.call(s,"catchLoc"),l=a.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),D(i),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var n=a.arg;D(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,a){return this.delegate={iterator:z(t),resultName:i,nextLoc:a},"next"===this.method&&(this.arg=e),f}},t}(t.exports);try{regeneratorRuntime=a}catch(t){Function("r","regeneratorRuntime = r")(a)}},function(t,e){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(e){return"function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?t.exports=a=function(t){return i(t)}:t.exports=a=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":i(t)},a(e)}t.exports=a},function(t,e){function i(e,a){return t.exports=i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(e,a)}t.exports=i},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){var i=[],a=!0,n=!1,o=void 0;try{for(var s,r=t[Symbol.iterator]();!(a=(s=r.next()).done)&&(i.push(s.value),!e||i.length!==e);a=!0);}catch(t){n=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(n)throw o}}return i}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e,i){"use strict";i.r(e);i(22),i(23),i(24);var a=i(6),n=i.n(a),o=i(14),s=i.n(o),r=i(2),c=i.n(r),l=i(16),h=i.n(l),d=i(1),u=i.n(d),p=i(3),f=i.n(p),v=i(4),m=i.n(v),_=i(7),y=i.n(_),w=i(8),g=i.n(w),b=i(9),x=i.n(b),S=i(0),M=i.n(S),k=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=document.createElement(t),a=Object.keys(e),n=function(t){var n=a[t],o=e[n];if("className"===n)o&&o.constructor===Array?o.forEach(function(t){return t&&i.classList.add(t)}):i.classList.add(o);else if("style"===n)i.setAttribute("style",o);else if("on"===n.substr(0,2))i.addEventListener(n.substr(2).toLocaleLowerCase(),o);else if("children"===n)if(o.constructor===Array)for(var s=0;s<o.length;s+=1)i.appendChild(o[s]);else i.appendChild(o);else if("text"===n)i.innerText=o;else if("data"===n){Object.keys(o).forEach(function(t){i.dataset[t]=o[t]})}else i.setAttribute(n,o)},o=0;o<a.length;o+=1)n(o);return i},D=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f()(this,t),M()(this,"state",{}),M()(this,"props",{}),M()(this,"node",null),M()(this,"setState",function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=c()({},e.state);e.state=c()({},e.state,t),e.componentDidUpdate(e.props,a,"state"),i&&i()}),this.props=c()({},this.constructor.defaultProps,i)}return m()(t,[{key:"componentDidMount",value:function(){return null}},{key:"setProps",value:function(t){var e=c()({},this.props);this.props=c()({},this.props,t),this.componentDidUpdate(e,this.state,"props")}},{key:"componentDidUpdate",value:function(){return null}},{key:"componentWillUnmount",value:function(){}},{key:"destroy",value:function(){this.componentWillUnmount(),this.ownElement.removeChild(this.node)}},{key:"render",value:function(){return document.createElement("div")}},{key:"renderDom",value:function(t){this.node=this.render(),this.ownElement=t,t.appendChild(this.node),this.componentDidMount()}}]),t}();M()(D,"defaultProps",{});var A=D,z=i(12),L=i.n(z),I=function(t,e){var i,a,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=n,s=!1;return function r(){s||(n&&setTimeout(function(){o=!1,i&&(r.apply(a,i),i=null,a=null)},e),s=!0);for(var c=arguments.length,l=new Array(c),h=0;h<c;h++)l[h]=arguments[h];if(o)return i=l,void(a=this);t.apply(this,l),o=!0,setTimeout(function(){o=!1,i&&(r.apply(a,i),i=null,a=null)},e)}},O=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i||(i=Date.now());var a=(i-t)/e;return a<0&&(a=0),a>1&&(a=1),a},E=function(t){return-t*(t-2)},T=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!1;if(i=t.touches&&t.touches.length>0?{x:t.touches[0].pageX,y:t.touches[0].pageY}:{x:t.pageX,y:t.pageY},e){var a=function t(e){if(!e)return{top:0,left:0};var i=t(e.offsetParent);return{top:e.offsetTop+i.top,left:e.offsetLeft+i.left}}(e);i.x-=a.left,i.y-=a.top}return i},P=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,i=t>=0?1:-1,a=t=Math.abs(t);if(t>=e){for(var n=Math.floor((""+t).length/3),o="",s=2;s>=1;s=-1){if(((o=parseFloat((0!=n?t/Math.pow(1e3,n):t).toPrecision(s)))+"").replace(/[^a-zA-Z 0-9]+/g,"").length<=2)break}o%1!=0&&(o=o.toFixed(1)),a=o+["","k","m","b","t"][n]}return-1===i?"-".concat(a):a},N=function(t){return"".concat(function(t,e,i,a){e=isNaN(e=Math.abs(e))?2:e,i=null==i?".":i,a=null==a?",":a;var n=t<0?"-":"",o=String(parseInt(t=Math.abs(Number(t)||0).toFixed(e))),s=(s=o.length)>3?s%3:0;return n+(s?o.substr(0,s)+a:"")+o.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+a)+(e?i+Math.abs(t-o).toFixed(e).slice(2):"")}(parseFloat(t),0,"."," ")).replace(".00","")},F=function(t){return new Promise(function(e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.send(null),i.onreadystatechange=function(){if(4===i.readyState&&200===i.status){var t=i.getResponseHeader("Content-Type");e(i.responseText,t,i)}}})},C=function(t,e,i){t/=255,e/=255,i/=255;var a,n,o=Math.max(t,e,i),s=Math.min(t,e,i),r=(o+s)/2;if(o==s)a=n=0;else{var c=o-s;switch(n=r>.5?c/(2-o-s):c/(o+s),o){case t:a=(e-i)/c+(e<i?6:0);break;case e:a=(i-t)/c+2;break;case i:a=(t-e)/c+4}a/=6}return[a,n,r]};function Z(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}var W,V,j=function(t,e,i){var a,n,o;if(0==e)a=n=o=i;else{var s=i<.5?i*(1+e):i+e-i*e,r=2*i-s;a=Z(r,s,t+1/3),n=Z(r,s,t),o=Z(r,s,t-1/3)}return[255*a,255*n,255*o]},R=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},X=function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f()(this,t),this.text=e,this.params=i},U=function t(e,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};f()(this,t),this.from=e,this.to=i,this.params=a},Y=function t(e,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};f()(this,t),this.x=e,this.y=i,this.params=a},B=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f()(this,t),this.paths=[],this.isFill=!1,this.isStroke=!1,this.params=e}return m()(t,[{key:"lineTo",value:function(t,e){this.paths.push(["lineTo",t,e])}},{key:"moveTo",value:function(t,e){this.paths.push(["moveTo",t,e])}},{key:"fill",value:function(){this.isFill=!0}},{key:"stroke",value:function(){this.isStroke=!0}}]),t}(),H=function t(e,i,a,n,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};f()(this,t),this.x=e,this.y=i,this.r=a,this.startAngle=n,this.endAngle=o,this.params=s},G=function(){function t(e,i){f()(this,t),this.element=e,this.props=i,this.dpr=t.getRetinaRatio(),this.resize(i.width,i.height)}return m()(t,null,[{key:"getRetinaRatio",value:function(){var t=window.devicePixelRatio||1,e=document.createElement("canvas").getContext("2d");return t/[e.webkitBackingStorePixelRatio,e.mozBackingStorePixelRatio,e.msBackingStorePixelRatio,e.oBackingStorePixelRatio,e.backingStorePixelRatio,1].reduce(function(t,e){return t||e})}}]),m()(t,[{key:"resize",value:function(e,i){this.props.width=e,this.props.height=i,this.ctx=this.element.getContext("2d"),this.dpr=t.getRetinaRatio(),this.ctx.scale(this.dpr,this.dpr),this.element.style.width="".concat(e,"px"),this.element.style.height="".concat(i,"px"),this.element.setAttribute("width",e*this.dpr),this.element.setAttribute("height",i*this.dpr)}},{key:"clear",value:function(){var t=this.props,e=t.width,i=void 0===e?0:e,a=t.height,n=void 0===a?0:a;this.ctx.clearRect(0,0,i*this.dpr,n*this.dpr)}},{key:"text",value:function(t,e){var i=e.x,a=e.y,n=e.size,o=void 0===n?12:n,s=e.align,r=void 0===s?"center":s,c=e.font,l=void 0===c?"serif":c,h=e.color,d=void 0===h?"#000000":h,u=e.opacity,p=void 0===u?1:u;if(p<1){var f=R(d);null!==f&&(d="rgba(".concat(f.r,", ").concat(f.g,", ").concat(f.b,", ").concat(p,")"))}this.ctx.font="".concat(Math.floor(o*this.dpr),"px ").concat(l),this.ctx.textAlign=r,this.ctx.fillStyle=d,this.ctx.fillText(t,i*this.dpr,a*this.dpr)}},{key:"line",value:function(t,e,i){var a=i.color,n=void 0===a?"#000000":a,o=i.lineWidth,s=void 0===o?2:o,r=i.opacity,c=void 0===r?1:r;if(c<1){var l=R(n);null!==l&&(n="rgba(".concat(l.r,", ").concat(l.g,", ").concat(l.b,", ").concat(c,")"))}this.ctx.beginPath(),this.ctx.strokeStyle=n,this.ctx.lineWidth=s*this.dpr,this.ctx.moveTo(t.x*this.dpr,t.y*this.dpr),this.ctx.lineTo(e.x*this.dpr,e.y*this.dpr),this.ctx.stroke()}},{key:"rect",value:function(t,e,i){var a=i.width,n=void 0===a?10:a,o=i.height,s=void 0===o?10:o,r=i.color,c=void 0===r?"black":r,l=i.fill,h=void 0!==l&&l;this.ctx.strokeStyle=c,this.ctx.fillStyle=c,h&&this.ctx.fillRect(t*this.dpr,e*this.dpr,n*this.dpr,s*this.dpr),h||this.ctx.strokeRect(t*this.dpr,e*this.dpr,n*this.dpr,s*this.dpr)}},{key:"arc",value:function(t,e,i,a,n,o){var s=o.id,r=o.color,c=void 0===r?"#0000":r,l=o.opacity,h=void 0===l?1:l,d=o.mouseX,u=void 0===d?0:d,p=o.mouseY,f=void 0===p?0:p,v=o.mouseMove,m=void 0!==v&&v;if(h<1){var _=R(c);null!==_&&(c="rgba(".concat(_.r,", ").concat(_.g,", ").concat(_.b,", ").concat(h,")"))}(this.ctx.beginPath(),this.ctx.moveTo(t*this.dpr,e*this.dpr),this.ctx.arc(t*this.dpr,e*this.dpr,i*this.dpr,a,n),this.ctx.fillStyle=c,m)&&(this.ctx.isPointInPath(u*this.dpr,f*this.dpr)&&m(s));this.ctx.closePath(),this.ctx.fill()}},{key:"circle",value:function(t,e,i,a){var n=a.color,o=void 0===n?"black":n,s=a.strokColor,r=void 0!==s&&s,c=a.lineWidth,l=void 0===c?1:c;this.ctx.beginPath(),this.ctx.arc(t*this.dpr,e*this.dpr,i*this.dpr,0,2*Math.PI,!0),r&&(this.ctx.strokeStyle=r,this.ctx.lineWidth=l*this.dpr,this.ctx.stroke()),o&&(this.ctx.fillStyle=o,this.ctx.fill())}},{key:"beginPath",value:function(t){var e=this,i=t.opacity,a=void 0===i?1:i,n=t.color,o=t.lineWidth;if(this.ctx.beginPath(),this.ctx.lineJoin="bevel",this.ctx.lineCap="butt",a<1){var s=R(n);null!==s&&(n="rgba(".concat(s.r,", ").concat(s.g,", ").concat(s.b,", ").concat(a,")"))}return{moveTo:function(t,i){e.ctx.moveTo(t*e.dpr,i*e.dpr)},lineTo:function(t,i){e.ctx.lineTo(t*e.dpr,i*e.dpr)},stroke:function(){e.ctx.strokeStyle=n,e.ctx.lineWidth=o*e.dpr,e.ctx.stroke()},fill:function(){e.ctx.fillStyle=n,e.ctx.lineWidth=o*e.dpr,e.ctx.fill()}}}},{key:"draw",value:function(t){if(t instanceof X&&this.text(t.text,t.params),t instanceof U&&this.line(t.from,t.to,t.params),t instanceof Y&&this.rect(t.x,t.y,t.params),t instanceof H&&this.arc(t.x,t.y,t.r,t.startAngle,t.endAngle,t.params),t instanceof B){for(var e=this.beginPath(t.params),i=0;i<t.paths.length;i++){var a=L()(t.paths[i],3),n=a[0],o=a[1],s=a[2];"moveTo"===n&&e.moveTo(o,s),"lineTo"===n&&e.lineTo(o,s)}t.isFill&&e.fill(),t.isStroke&&e.stroke()}}}]),t}(),q=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],J=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],$="day",K=(W={},M()(W,$,"Switch to Night Mode"),M()(W,"night","Switch to Day Mode"),W),Q=(V={},M()(V,$,{background:"#fff",text:"#182D3B",lines:"#182D3B",lastLine:"#182D3B",activeLine:"#D2D5D7",textOpacity:.7,lineOpacity:.1,activeLineOpacity:1}),M()(V,"night",{background:"#242F3E",text:"#FFFFFF",lines:"#FFFFFF",lastLine:"#FFFFFF",activeLine:"#D2D5D7",textOpacity:.7,lineOpacity:.1,activeLineOpacity:.1}),V),tt=i(5),et=i.n(tt),it=function(t){function e(){var t,i;f()(this,e);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return i=y()(this,(t=g()(e)).call.apply(t,[this].concat(n))),M()(u()(i),"domLabels",{}),i}return x()(e,t),m()(e,[{key:"drawXLabels",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.props,a=i.labels,n=void 0===a?[]:a,o=i.getLabel,s=i.opacity,r=void 0===s?1:s;if(n.length>0){for(var c=this.calcXLabels(),l=c.positions,h=c.intervalFactor,d=c.removed,u=Object.keys(l),p=Object.keys(this.domLabels),f=function(e){var i,a,o,s,r,c,l,u,f=+p[e],v=t.domLabels[f];f%h!=0?(v.style.opacity=0,i=function(){var e=100/t.props.width,i=(t.props.scroll-t.props.width)/100,a=t.props.layout.width*(f/(n.length-1)-i)*e;v.style.left="".concat(a,"px")},a=200,o=function(){v.remove()},r=!1,c=Date.now(),l=!1,u=function(){l=!0},requestAnimationFrame(function t(){if(r||(r=!0,s&&s()),!l){var e=O(c,a);i(100*e),e<1?requestAnimationFrame(t):(u(),o&&o())}}),delete t.domLabels[f]):d.includes(f)&&(v.remove(),delete t.domLabels[f])},v=0;v<p.length;v+=1)f(v);var m=function(i){var a=+u[i],s=L()(l[a],2),c=s[0],h=s[1],d=o(n[h]),p=t.domLabels[a];if(p){var f="left: ".concat(c.toFixed(2),"px;opacity: ").concat(r,";");p.innerText=d,p.setAttribute("style",f),p.dataset.index=h,p.dataset.position=c+15,p.dataset.value=n[h]}else{var v="left: ".concat(c.toFixed(2),"px;opacity: ").concat(e?0:r,";");p=k("div",{id:a,className:et.a.canvas_wrapper__x_labels_wrapper__item,text:d,style:v,data:{state:"rendered",index:h,position:c+15,value:n[h]}}),t.element.appendChild(p),e&&setTimeout(function(){p.style.opacity=1},1),t.domLabels[a]=p}};for(v=0;v<u.length;v+=1)m(v);this.indexes=u}}},{key:"clear",value:function(){for(var t=Object.keys(this.domLabels),e=0;e<t.length;e+=1){var i=+t[e];this.domLabels[i].remove(),delete this.domLabels[i]}}},{key:"calcXLabels",value:function(){for(var t=this.props,e=t.scroll,i=t.labels,a=void 0===i?[]:i,n=t.layout,o=t.graphLayout.labelsXWidth,s=void 0===o?0:o,r=[],c=100/this.props.width,l=Math.ceil(n.width/s),h=(n.width-36)/l,d=l<=a.length?Math.floor(a.length/l):1,u=Math.ceil(Math.log2(d/c)),p=Math.pow(2,u),f=Math.ceil(c*a.length/p),v={},m=0;m<f;m+=1){var _=m*p,y=(e-this.props.width)/100,w=n.width*(_/(a.length-1)-y)*c;w+=18;var g=this.props.getLabelIndexByX(w+15);g&&(n.width>=w&&w>=0-h?v[_]=[w,g]:r.push(_))}return{positions:v,count:f,intervalFactor:p,removed:r}}},{key:"componentDidMount",value:function(){this.clear(),this.drawXLabels()}},{key:"componentDidUpdate",value:function(t){this.props.labels===t.labels&&this.props.id===t.id||this.clear(),this.props.labels===t.labels&&this.props.width===t.width&&this.props.scroll===t.scroll||(this.props.width!==t.width?this.drawXLabels(!0):this.drawXLabels(!1))}},{key:"render",value:function(){return this.element=k("div",{className:et.a.canvas_wrapper__x_labels_wrapper}),this.element}}]),e}(A);M()(it,"defaultProps",{width:0,labels:[],scroll:0,layout:{width:0,height:0},graphLayout:{labelsXWidth:0},getLabel:function(t){return t}});var at=it,nt=i(18),ot=i.n(nt),st=function(t){function e(){var t,i;f()(this,e);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return i=y()(this,(t=g()(e)).call.apply(t,[this].concat(n))),M()(u()(i),"domLabels",{}),i}return x()(e,t),m()(e,[{key:"drawXLabels",value:function(){for(var t=this.props.data,e=t.positions,i=void 0===e?{}:e,a=t.removed,n=void 0===a?[]:a,o=Object.keys(i),s=Object.keys(this.domLabels),r=0;r<s.length;r+=1){var c=s[r],l=this.domLabels[c];n.includes(c)&&(l.remove(),delete this.domLabels[c])}for(var h=0;h<o.length;h+=1){var d=o[h],u=i[d],p=u.x,f=u.y,v=u.width,m=u.height,_=u.opacity,y=u.color,w=this.domLabels[d];if(w)w.style.left!=="".concat(p,"px")&&(w.style.left="".concat(p,"px")),w.style.top!=="".concat(f,"px")&&(w.style.top="".concat(f,"px")),w.style.width!=="".concat(v,"px")&&(w.style.width="".concat(v,"px")),w.style.height!=="".concat(m,"px")&&(w.style.height="".concat(m,"px")),w.style.opacity!=="".concat(_)&&(w.style.opacity="".concat(_)),w.style["background-color"]!=="".concat(y)&&(w.style["background-color"]="".concat(y));else{var g=["left: ".concat(p,"px"),"top: ".concat(f,"px"),"width: ".concat(v,"px"),"height: ".concat(m,"px"),"opacity: ".concat(_),"background-color: ".concat(y)].join(";");w=k("div",{id:d,className:ot.a.canvas_wrapper__bar_chart__item,style:g}),this.element.appendChild(w),this.domLabels[d]=w}}}},{key:"clear",value:function(){for(var t=Object.keys(this.domLabels),e=0;e<t.length;e+=1){var i=+t[e];this.domLabels[i].remove(),delete this.domLabels[i]}}},{key:"componentDidMount",value:function(){this.clear(),this.drawXLabels()}},{key:"componentDidUpdate",value:function(t){this.props.id!==t.id&&this.clear(),this.props.data!==t.data&&this.drawXLabels()}},{key:"render",value:function(){return this.element=k("div",{className:ot.a.canvas_wrapper__bar_chart}),this.element}}]),e}(A);M()(st,"defaultProps",{id:1,data:{position:{},removed:[]}});var rt=st,ct=i(19),lt=i.n(ct),ht=function(t){function e(t){var i;return f()(this,e),i=y()(this,g()(e).call(this,t)),M()(u()(i),"log",[]),M()(u()(i),"animations",[]),M()(u()(i),"state",{step:10,showInfo:!1,graphLayout:{width:0,height:0,labelsXWidth:70,labelsXOffset:10},graphMinMax:{},offset:0,graphOffset:{top:0,left:0,bottom:0,right:0,asixX:0,asixY:0},graphScale:{x:0,y:0},minStep:1,maxStep:1e3,visibility:{},mouse:{pointX:0,pointY:0},selectArc:!1,zoom:!1,animationsValues:{yAsixOpacity:100,xAsixOpacity:100,arcsScale:0,areasScale:0,yMinMax:0}}),M()(u()(i),"init",!1),M()(u()(i),"initialize",function(){var t=i.props,e=t.layout,a=t.visibled;i.handleApplyVisibility(a),i.canvas=new G(i.canvasNode,c()({},e)),i.calc(),i.init=!0,requestAnimationFrame(i.reDraw)}),M()(u()(i),"timeFactor",1),M()(u()(i),"time",0),M()(u()(i),"reDraw",function(t){if(i.time=t/i.timeFactor,i.animations=i.animations.filter(function(t){return!1!==t}),i.animations.length>0||i.needDraw){for(var e=0;e<i.animations.length;e++){var a=i.animations[e];if(!1!==a){var n=i.time-a.startAt,o=O(a.startAt,a.duration,i.time);i.animations[e].progress=o,i.animations[e].lastUpdateAt=i.time,i.animations[e].timePassed=n,a.step(E(o),n,a.duration),(1===o||n<-1e4)&&(o<1&&n<-1e4&&(a.step(1,n,a.duration),console.warn("Incorrect animation timePassed",i.animations[e])),i.animations[e]=!1)}}i.draw(),i.needDraw&&(i.needDraw=!1)}requestAnimationFrame(i.reDraw)}),M()(u()(i),"reInit",function(){i.calc()}),M()(u()(i),"updateState",function(t){return new Promise(function(e){i.setState(t,e)})}),M()(u()(i),"updateAnimateYLines",I(function(t){i.setState({graphScale:c()({},i.state.graphScale,{animateYLines:t})})},10)),M()(u()(i),"updateGraphOptions",function(t,e){var a=i.props,n=a.scroll,o=a.width,s=a.layout,r=i.getLength();i.setGraphOptions(t,{scroll:n,limit:o,length:r,animateYLines:e},s)}),M()(u()(i),"animationInterval",!1),M()(u()(i),"lastMinMax",[0,0]),M()(u()(i),"time",new Date),M()(u()(i),"additionalDraw",[]),M()(u()(i),"eventStartShowInfo",function(t){var e=T(t).x-i.element.offsetLeft,a=i.getLabelIndexByRelativeX(e);i.setState({showInfo:a})}),M()(u()(i),"eventMouseDown",function(t){var e=i.props.arcMode,a=void 0!==e&&e;i.clickByShowInfo=i.isEventInShowInfo(t),i.mouseDown=!0,i.isShowInfo||!1!==a||(i.tapPosition=T(t),i.isShowInfo=!0,i.eventStartShowInfo(t))}),M()(u()(i),"eventTouchMove",function(t){var e=i.props.arcMode,a=void 0!==e&&e;t.target.closest(".".concat(et.a.canvas__show_info))!=i.showInfoNode&&i.isShowInfo&&!1===a&&i.eventStartShowInfo(t)}),M()(u()(i),"eventUpdateMouse",function(t){var e=T(t,i.element);e.x===i.state.mouse.pointX&&e.y===i.state.mouse.pointY||i.setState({mouse:{pointX:e.x,pointY:e.y}})}),M()(u()(i),"eventMouseMove",function(t){var e=i.props.arcMode,a=void 0!==e&&e;t.target.closest(".".concat(et.a.canvas__show_info))!=i.showInfoNode&&i.isShowInfo&&!1===a&&i.eventStartShowInfo(t),i.eventUpdateMouse(t)}),M()(u()(i),"eventMouseUp",function(t){var e=i.props.arcMode,a=void 0!==e&&e,n=t.target.closest(".".concat(et.a.canvas_wrapper))!=i.element;!1===a&&(n?i.isShowInfo&&(i.isShowInfo=!1,i.setState({showInfo:!1})):i.isShowInfo&&i.clickByShowInfo&&i.handleZoom()),i.clickByShowInfo=!1,i.mouseDown=!1}),M()(u()(i),"eventMouseLeave",function(){var t=i.props.arcMode,e=void 0!==t&&t;i.mouseEnter=!1,i.isShowInfo&&!1===e&&(i.isShowInfo=!1,i.setState({showInfo:!1}))}),M()(u()(i),"eventMouseEnter",function(t){var e=i.props.arcMode,a=void 0!==e&&e;i.mouseEnter=!0,i.isShowInfo||!1!==a||(i.isShowInfo=!0,i.eventStartShowInfo(t))}),M()(u()(i),"handleFadeOutYAsix",function(){var t=i.state.animationsValues.yAsixOpacity,e=void 0===t?100:t,a=0-e;i.createAnimation("anim-y-asix",function(t){var n=a*t;i.setState({animationsValues:c()({},i.state.animationsValues,{yAsixOpacity:e+n})})},150)}),M()(u()(i),"handleFadeOutXAsix",function(){var t=i.state.animationsValues.xAsixOpacity,e=void 0===t?100:t,a=0-e;i.createAnimation("anim-x-asix",function(t){var n=a*t;i.setState({animationsValues:c()({},i.state.animationsValues,{xAsixOpacity:e+n})})},150)}),M()(u()(i),"handleFadeInYAsix",function(){var t=i.state.animationsValues.yAsixOpacity,e=void 0===t?100:t,a=100-e;i.createAnimation("anim-y-asix",function(t){var n=a*t;i.setState({animationsValues:c()({},i.state.animationsValues,{yAsixOpacity:e+n})})},150)}),M()(u()(i),"handleFadeInXAsix",function(){var t=i.state.animationsValues.xAsixOpacity,e=void 0===t?100:t,a=100-e;i.createAnimation("anim-x-asix",function(t){var n=a*t;i.setState({animationsValues:c()({},i.state.animationsValues,{xAsixOpacity:e+n})})},150)}),M()(u()(i),"handleFadeInArcs",function(){var t=i.state.animationsValues,e=t.arcsScale,a=void 0===e?1:e,n=t.arcsOpacity,o=void 0===n?1:n,s=1-a,r=1-o;i.createAnimation("anim-arcs-scale",function(t){var e=s*t,n=r*t;i.setState({animationsValues:c()({},i.state.animationsValues,{arcsScale:a+e,arcsOpacity:o+n})})},400)}),M()(u()(i),"handleFadeOutArcs",function(){var t=i.state.animationsValues,e=t.arcsScale,a=void 0===e?1:e,n=t.arcsOpacity,o=void 0===n?1:n,s=0-a,r=0-o;i.createAnimation("anim-arcs-scale",function(t){var e=s*t,n=r*t;i.setState({animationsValues:c()({},i.state.animationsValues,{arcsScale:a+e,arcsOpacity:o+n})})},400)}),M()(u()(i),"handleFadeInAreas",function(){var t=i.state.animationsValues,e=t.areaScale,a=void 0===e?1:e,n=t.areaOpacity,o=void 0===n?1:n,s=1-a,r=1-o;i.createAnimation("anim-area-scale",function(t){var e=s*t,n=r*t;i.setState({animationsValues:c()({},i.state.animationsValues,{areaScale:a+e,areaOpacity:o+n})})},400)}),M()(u()(i),"handleFadeOutAreas",function(){var t=i.state.animationsValues,e=t.areaScale,a=void 0===e?1:e,n=t.areaOpacity,o=void 0===n?1:n,s=0-a,r=0-o;i.createAnimation("anim-area-scale",function(t){var e=s*t,n=r*t;i.setState({animationsValues:c()({},i.state.animationsValues,{areaScale:a+e,areaOpacity:o+n})})},400)}),M()(u()(i),"handleFadeOutDatasets",function(t,e){e.length=t[0].list.length,i.createAnimation("anim-prev-datasets",function(a){if(a<1){var o=t.filter(function(t){return"area"===t.type}),s=t.filter(function(t){return"bar"===t.type}),r=t.filter(function(t){return"line"===t.type}),l=1+1*a,h=i.calcBars(s,c()({},e,{scale:{x:l},opacity:1-a,nativeOpacity:!0})),d=i.calcAreas(o,c()({},e,{scale:a,opacity:1-a})),u=i.calcLines(r,c()({},e,{opacity:1-a}));i.additionalDraw.push(["beforeLines",[].concat(n()(h),n()(d))]),i.additionalDraw.push(["afterLines",n()(u)])}},400)}),M()(u()(i),"handleFadeInSelectArc",function(t){var e=i.state.animationsValues.selectArcShow,a=(void 0===e?{}:e)[t]||0,n=1-a;i.createAnimation("anim-select-arc-show-".concat(t),function(e){var o=n*e;i.setState({animationsValues:c()({},i.state.animationsValues,{selectArcShow:c()({},i.state.animationsValues.selectArcShow||{},M()({},t,a+o))})})},200)}),M()(u()(i),"handleFadeOutSelectArc",function(t){var e=i.state.animationsValues.selectArcShow,a=(void 0===e?{}:e)[t]||1,n=0-a;i.createAnimation("anim-select-arc-show-".concat(t),function(e){var o=n*e;i.setState({animationsValues:c()({},i.state.animationsValues,{selectArcShow:c()({},i.state.animationsValues.selectArcShow||{},M()({},t,a+o))})})},200)}),M()(u()(i),"minMaxLines",{}),M()(u()(i),"handleApplyVisibility",function(t){for(var e=i.props.dataset,a=void 0===e?[]:e,n=i.state.visibility,o=void 0===n?{}:n,s=Object.keys(o),r=a.map(function(t){return t.id}),c=0;c<r.length;c++){var l=r[c],h=s.includes(l)&&1==o[l];h&&!t.includes(l)?i.handleFadeOutLine(l):!h&&t.includes(l)&&i.handleFadeInLine(l)}}),i.safeCalc=I(i.calc,1),i.props.allowYAsix?i.state.graphOffset.bottom=30:i.state.graphOffset.bottom=0,i.props.mini?(i.state.graphOffset.top=0,i.state.graphOffset.left=0,i.state.graphOffset.right=0):(i.state.graphOffset.top=20,i.state.graphOffset.left=18,i.state.graphOffset.right=18),i}return x()(e,t),m()(e,null,[{key:"getDarknessColor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=R(t),a=C(i.r,i.g,i.b),n=j(a[0],a[1]-.18,a[2]);return i.r=Math.round(n[0]),i.g=Math.round(n[1]),i.b=Math.round(n[2]),i.r>255&&(i.r=255),i.g>255&&(i.g=255),i.b>255&&(i.b=255),t=e<1?"rgba(".concat(i.r,",").concat(i.g,",").concat(i.b,",").concat(Math.ceil(100*e)/100,")"):"rgb(".concat(i.r,",").concat(i.g,",").concat(i.b,")")}}]),m()(e,[{key:"componentDidMount",value:function(){var t=this.props.mini;void 0!==t&&t||(this.documentEventMouseUp=this.eventMouseUp.bind(this),document.addEventListener("mouseup",this.documentEventMouseUp)),this.initialize()}},{key:"componentDidUpdate",value:function(t,e){var i=this.props,a=i.dataset,n=i.visibled,o=i.layout,s=i.labels,r=i.arcMode,c=i.zoom,l=this.state,h=l.step,d=l.graphOffset,u=l.graphMinMax,p=l.visibility,f=l.graphScale,v=l.showInfo,m=l.mouse,_=l.selectArc;t.arcMode!==r&&(!1===r?(this.handleFadeInYAsix(),this.handleFadeInXAsix(),this.handleFadeOutArcs(),this.handleFadeInAreas()):(this.handleFadeInArcs(),this.handleFadeOutYAsix(),this.handleFadeOutXAsix(),this.handleFadeOutAreas())),t.zoom!==c&&this.setState({selectArc:!1});var y=this.props,w=y.layout,g=w.width,b=void 0===g?0:g,x=w.height,S=void 0===x?0:x,M=y.limit,k=y.offset,D=y.scroll,A=y.colors;if(y.id!==t.id&&this.setState({showInfo:!1}),t.visibled!==n||t.dataset!==a||t.layout.width!==o.width||t.layout.height!==o.height||t.limit!==M||t.offset!==k){if(t.layout.width===b&&t.layout.height===S||this.canvas.resize(b,S),t.dataset!==a){var z=t.dataset.filter(function(t){return!a.some(function(e){return e.uid===t.uid})});z.length>0&&this.handleFadeOutDatasets(z,this.calcDrawParams()),this.handleApplyVisibility(n)}else t.visibled!==n&&this.handleApplyVisibility(n);this.reInit()}e.step===h&&e.graphOffset.top===d.top&&e.graphOffset.bottom===d.bottom&&e.graphOffset.left===d.left&&e.graphOffset.right===d.right&&t.scroll===D&&t.width===b&&t.colors===A&&t.labels===s&&e.graphMinMax===u&&e.graphScale===f&&e.showInfo===v&&e.visibility===p&&e.mouse===m&&e.selectArc===_&&t.zoom===c||(e.selectArc!==_&&(_&&this.handleFadeInSelectArc(_),e.selectArc&&this.handleFadeOutSelectArc(e.selectArc)),this.needDraw=!0)}},{key:"componentWillUnmount",value:function(){var t=this.props.mini;void 0!==t&&t||document.removeEventListener("mouseup",this.documentEventMouseUp),this.cart&&(this.cart.destroy(),this.cart=null),this.cartMiniMap&&(this.cartMiniMap.destroy(),this.cartMiniMap=null)}},{key:"findMinMaxForLine",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.min,n=void 0===a?99999999999:a,o=i.max,s=void 0===o?0:o,r=e.offset,c=void 0===r?0:r,l=e.limit,h=c+(void 0===l?0:l);0===h&&(h=t.length);for(var d=c;d<t.length&&d<h;d+=1){var u=t[d];n=u<n?u:n,s=u>s?u:s}return[Math.floor(n),Math.ceil(s)]}},{key:"findMinMaxForBars",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.min,n=void 0===a?99999999999:a,o=i.max,s=void 0===o?0:o,r=e.visibled,c=void 0===r?[]:r,l=e.offset,h=void 0===l?0:l,d=e.limit,u=h+(void 0===d?0:d);0===u&&(u=t[0].list.length);for(var p=function(e){var i=0;t.filter(function(t){return c.includes(t.id)}).forEach(function(t){i+=t.list[e],n=t.list[e]<n?t.list[e]:n}),s=i>s?i:s},f=h;f<t[0].list.length&&f<u;f+=1)p(f);return[Math.floor(n),Math.ceil(s)]}},{key:"findMinMax",value:function(){var t=this,e=this.props,i=e.dataset,a=void 0===i?[]:i,n=e.visibled,o=void 0===n?[]:n,s=e.offset,r=e.limit,l=99999999,h=0,d={};if(a.length>0){a.filter(function(t){return"line"===t.type}).forEach(function(e){var i=e.id,a=e.list,n=t.findMinMaxForLine(a,{offset:s,limit:r});d[i]=n,o.includes(i)&&(l=n[0]<l?n[0]:l,h=n[1]>h?n[1]:h)});var u=a.filter(function(t){return"bar"===t.type||"area"===t.type});if(u.length>0){var p=this.findMinMaxForBars(u,{visibled:o,offset:s,limit:r});l=p[0]<l?p[0]:l,h=p[1]>h?p[1]:h}}else l=0,h=10;return c()({common:[Math.floor(l),Math.ceil(h)]},d)}},{key:"findAbsoluteMinMax",value:function(){var t=this,e=this.props,i=e.dataset,a=void 0===i?[]:i,n=e.visibled,o=void 0===n?[]:n,s=99999999,r=0;if(a.length>0){a.filter(function(t){return"line"===t.type}).forEach(function(e){var i=e.id,a=e.list,n=t.findMinMaxForLine(a);o.includes(i)&&(s=n[0]<s?n[0]:s,r=n[1]>r?n[1]:r)});var c=a.filter(function(t){return"bar"===t.type||"area"===t.type});if(c.length>0){var l=this.findMinMaxForBars(c,{visibled:o});s=l[0]<s?l[0]:s,r=l[1]>r?l[1]:r}}else s=0,r=10;return[s,r]}},{key:"transformPositions",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.height,n=void 0===a?0:a,o=i.minMaxY.min,s=i.scale,r=s.x,c=s.y,l=this.state.graphOffset;return{x:l.left+t*r,y:n-(e-o)*c-l.bottom}}},{key:"nAsix",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"common",a=this.props.layout.height,n=void 0===a?0:a,o=this.state,s=o.graphMinMax,r=o.graphScale,c=L()(s[i],2),l=c[0],h=c[1];return this.transformPositions(t,e,{height:n,minMaxY:{min:l,max:h},scale:{x:r.x,y:r[i]}})}},{key:"getHeightGraph",value:function(){var t=this.props.layout,e=this.state.graphOffset,i=e.top,a=e.bottom;return t.height-i-a}},{key:"getWidthGraph",value:function(){var t=this.props.layout,e=this.state.graphOffset,i=e.left,a=e.right;return t.width-i-a}},{key:"setGraphOptions",value:function(t,i,a){var n=i.scroll,o=void 0===n?0:n,s=i.limit,r=void 0===s?0:s,l=i.length,h=i.animateYLines,d=a.width,u=this.getHeightGraph(),p=this.getWidthGraph(),f={};void 0!==h&&(f.animateYLines=h),Object.keys(t).forEach(function(e){var i=L()(t[e],2),a=i[0],n=i[1]-a,o=n>0?u/n:1;f[e]=o});var v=p/d,m=e.calcXStep({width:d,limit:r,length:l}),_=m*l;this.setState({step:m,graphMinMax:t,graphScale:c()({},this.state.graphScale,f,{x:v}),graphLayout:c()({},this.state.graphLayout,{width:p,height:u,fullWidth:_,offsetPx:_*(o-r)/100})})}},{key:"getLength",value:function(){var t=this.props.dataset,e=void 0===t?[]:t;return Math.max.apply(Math,n()(e.map(function(t){return t.list.length})))}},{key:"calc",value:function(){var t=this,e=this.props,i=e.dataset,a=void 0===i?[]:i,n=e.visibled,o=void 0===n?[]:n,s=e.yScaled,r=void 0!==s&&s,c=e.animateScale,l=void 0===c||c;this.absoluteMinMax=this.findAbsoluteMinMax();var h=this.findMinMax();return l?r?a.filter(function(t){return o.includes(t.id)}).forEach(function(e,i){t.handleAnimScale(e.id,h,400,0===i)}):this.handleAnimScale("common",h,400,!0):this.updateGraphOptions(h,0),!0}},{key:"calcArc",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.step,n=i.width,o=i.height,s=i.offsetPx,r=i.visibility,c=void 0===r?{}:r,l=i.length,h=void 0===l?0:l,d=i.opacity,u=void 0===d?1:d,p=i.scale,f=void 0===p?1:p,v=i.showInfo,m=void 0!==v&&v,_=i.showInfoShow,y=void 0===_?{}:_,w=i.mouse,g=w.pointX,b=void 0===g?0:g,x=w.pointY,S=void 0===x?0:x;t=t.filter(function(t){return c[t.id]>0});for(var M=0,k={},D=function(i){var o=e.nAsix(i*a-s,0).x;o>=0-2*a&&o<=n+2*a&&t.forEach(function(t){var e=c[t.id],a=t.list[i]*e;k[t.id]||(k[t.id]=0),k[t.id]+=a,M+=a})},A=0;A<h;A++)D(A);var z=0,L=Math.round(Math.min(n/2.3,o/2.3))*f,I=Math.round(L/1.5)*f,O=Math.round(n/2),E=Math.round(o/2),T=[];return t.forEach(function(t){var e=y[t.id]||1,i=k[t.id],a=2*Math.PI*i/M;if(T.push(new H(O,E,L,z,z+a,{id:t.id,opacity:m===t.id?0:u,color:t.color,mouseX:b,mouseY:S})),m===t.id||e<1){var n=O+10*Math.cos(z+a/2)*e,o=E+10*Math.sin(z+a/2)*e;T.push(new H(n,o,L,z,z+a,{id:t.id,opacity:u,color:t.color,mouseX:b,mouseY:S}))}z+=a}),z=0,t.forEach(function(t){var e=y[t.id]||1,i=k[t.id],a=i/M*100,n=2*Math.PI*i/M,o=I,s=20;if(n*(180/Math.PI)<20&&(s=10,o=L-20,n+=.03),n*(180/Math.PI)<10&&(s=8,o=L-20),a>20&&(s=25,o-=2.5),a>30&&(s=30,o-=5),a>40&&(s=35,o-=10),(m===t.id||e<1)&&(o+=10*e),n*(180/Math.PI)>8){var r=o*Math.cos(z+n/2)+O,c=o*Math.sin(z+n/2)+E;T.push(new X("".concat(Math.round(a),"%"),{x:r,y:c,opacity:u,size:s*f,align:"center",color:"#fff",font:"NeueHaasDisplay,Tahoma,sans-serif,Arial"}))}z+=n}),T}},{key:"calcBars",value:function(t){var i=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.step,o=a.width,s=a.height,r=a.minMaxY.max,c=a.offsetPx,l=a.visibility,h=void 0===l?{}:l,d=a.length,u=void 0===d?0:d,p=a.scale,f=void 0===p?{}:p,v=a.opacity,m=void 0===v?1:v,_=a.nativeOpacity,y=void 0!==_&&_,w=f.x,g=void 0===w?1:w,b=f.y,x=void 0===b?1:b,S=this.state,M=S.graphOffset,k=M.top,D=M.left,A=M.right,z=S.showInfo,L=void 0!==z&&z,I=this.props.mode,O=void 0===I?$:I;t=t.filter(function(t){return h[t.id]>0});for(var E=[],T=function(a){var l=i.nAsix(a*(n*g)-c*g,0).x;if(l>=0-2*D&&l<=D+o+2*A){var d=0;t.forEach(function(t){var e=t.list[a],i=h[t.id];d+=e*i});var u=2;t.forEach(function(t){var e=h[t.id],i=t.list[a]*e,n=i>0?100*i/d:0;n<2&&n>0&&(u+=2)});var p=s-s*(100-100*d/r+u)/100,f=0;t.forEach(function(t){var i=h[t.id],o=t.list[a]*i,r=o>0?100*o/d:0;if(r<2&&r>0&&(r=2),r>0){var c=p*r/100;!1!==L?L===a?(i=1,m<1&&(i=m)):i=.4:m<1&&(i=m);var u=t.color;if(y)if("night"===O)u=e.getDarknessColor(u,i);else{var v=R(u);u=i<1?"rgba(".concat(v.r,",").concat(v.g,",").concat(v.b,",").concat(i,")"):"rgba(".concat(v.r,",").concat(v.g,",").concat(v.b,",1)")}else{var _=R(u);if("night"===O){var w=C(_.r,_.g,_.b),b=j(w[0],w[1]-.18,w[2]);_.r=Math.round(b[0]),_.g=Math.round(b[1]),_.b=Math.round(b[2]),_.r>255&&(_.r=255),_.g>255&&(_.g=255),_.b>255&&(_.b=255)}if(i<1){var S="night"===O?0:255,M=Math.round(_.r*i+S*(1-i)),D=Math.round(_.g*i+S*(1-i)),A=Math.round(_.b*i+S*(1-i));M>255&&(M=255),D>255&&(D=255),A>255&&(A=255),u="rgb(".concat(M,",").concat(D,",").concat(A,")")}else u="rgb(".concat(_.r,",").concat(_.g,",").concat(_.b,")")}E.push(new Y(Math.ceil(l),s-(c+f)+k,{width:Math.ceil(n*g),height:c*x,color:u,fill:!0})),f+=c}})}},P=0;P<u;P++)T(P);return E}},{key:"calcAreas",value:function(t){var i=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.step,o=a.width,s=a.height,r=a.offsetPx,c=a.visibility,l=void 0===c?{}:c,h=a.length,d=void 0===h?0:h,u=a.opacity,p=void 0===u?1:u,f=a.scale,v=void 0===f?1:f,m=this.state.graphOffset,_=m.top,y=m.left,w=m.right,g=this.props.mode,b=void 0===g?$:g;t=t.filter(function(t){return l[t.id]>0});for(var x={},S=[],M=function(e){var a=i.nAsix(e*n-r,0).x;if(a>=0-2*y&&a<=y+o+2*w){var c=0;t.forEach(function(t){var i=t.list[e],a=l[t.id];c+=i*a});var h=0;t.forEach(function(t){var i=l[t.id],n=t.list[e]*i,o=s*(100*n/c)/100*(1/v);x[t.id]||(x[t.id]=[]),x[t.id].push({x:a,y:s-(o+h)+_}),h+=o})}},k=0;k<d;k++)M(k);for(k=t.length-1;k>=0;k-=1){var D=t[k],A=x.hasOwnProperty(D.id)?x[D.id]:[],z=l[D.id];p<1&&(z=p);var L=D.color;if("night"===b)L=e.getDarknessColor(L,z);else{var I=R(L);L=z<1?"rgba(".concat(I.r,",").concat(I.g,",").concat(I.b,",").concat(z,")"):"rgba(".concat(I.r,",").concat(I.g,",").concat(I.b,",1)")}var O=new B({color:L,opacity:z,lineWidth:a.lineWidth}),E=this.nAsix(o,s),T=A[0],P=A[A.length-1];O.moveTo(T.x,E.y);for(var N=0;N<A.length;N++){var F=A[N],C=F.x,Z=F.y;O.lineTo(C,Z)}O.lineTo(P.x,E.y),O.fill(),S.push(O)}return S}},{key:"calcLine",value:function(t,e){for(var i=this.props.yScaled,a=void 0!==i&&i,n=this.state.graphOffset,o=n.left,s=n.right,r=e.offsetPx,c=e.scale,l=void 0===c?{}:c,h=e.nAsix,d=e.width,u=l.x,p=void 0===u?1:u,f=l.y,v=void 0===f?0:f,m=[],_=new B({color:e.color,opacity:e.opacity,lineWidth:e.lineWidth}),y=0;y<t.length;y++){var w=t[y],g=a?e.id:"common",b=h(y*(e.step*p)-r*p,w,g),x=b.x,S=b.y;x>=0-2*o*p&&x<=o+d+2*s*p&&(0===y?_.moveTo(x,S+v):_.lineTo(x,S+v))}return _.stroke(),m.push(_),m}},{key:"calcLines",value:function(t){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.props.mode,o=void 0===a?$:a,s=i.step,r=i.visibility,c=void 0===r?{}:r,l=i.lineWidth,h=void 0===l?3:l,d=i.allowPointValue,u=void 0!==d&&d,p=i.scale,f=i.opacity,v=void 0===f?1:f,m=i.nAsix,_=i.width,y=i.offsetPx,w=[],g=0;g<t.length;g++){var b=t[g],x=b.color,S=c[b.id];if(v<1&&(S=v),"night"===o)x=e.getDarknessColor(x,S);else{var M=R(x);x=S<1?"rgba(".concat(M.r,",").concat(M.g,",").concat(M.b,",").concat(Math.ceil(100*S)/100,")"):"rgba(".concat(M.r,",").concat(M.g,",").concat(M.b,",1)")}w=[].concat(n()(w),n()(this.calcLine(b.list,{offsetPx:y,width:_,nAsix:m,id:b.id,scale:p,color:x,step:s,lineWidth:h,drawPointValue:u})))}return w}},{key:"drawGraphs",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.props.arcMode,a=void 0!==i&&i,o=t.filter(function(t){return"area"===t.type}),s=t.filter(function(t){return"bar"===t.type}),r=t.filter(function(t){return"line"===t.type}),l=[];if(!1!==a||this.isTypeAnimating("anim-arcs")){var h=this.state.animationsValues,d=h.arcsScale,u=void 0===d?1:d,p=h.arcsOpacity,f=void 0===p?1:p,v=h.selectArcShow,m=void 0===v?{}:v;l=this.calcArc(o,c()({},e,{scale:u,opacity:f,showInfoShow:m,showInfo:e.selectArc,alloShowInfo:!1!==a}))}var _=this.calcBars(s,e),y=[];if(!1===a||this.isTypeAnimating("anim-area")){var w=this.state.animationsValues,g=w.areaScale,b=void 0===g?1:g,x=w.areaOpacity,S=void 0===x?1:x;y=this.calcAreas(o,c()({},e,{scale:b,opacity:S}))}var M=this.calcLines(r,e);return[].concat(n()(M),n()(_),n()(y),n()(l))}},{key:"createYLabels",value:function(t,e,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"start",o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=this.props,r=s.colors,c=s.layout,l=c.width,h=c.height,d=this.state,u=d.graphOffset,p=u.asixX,f=void 0===p?0:p,v=u.asixY,m=void 0===v?0:v,_=d.animationsValues.yAsixOpacity,y=void 0===_?1:_,w=L()(e[t],2),g=w[0],b=[],x=w[1]-g,S=x>0?x/6:h/6,M=x/6,k=i>=0?1:-1;i=Math.abs(i);for(var D=this.zoomFactor,A=1-this.zoomFactor,z=1===k?function(t){return t*(D+A*i)}:function(t){return i>0?t/(D+A*i):0},I=-5;I<11;I+=1){var O=this.nAsix(0,S*I+g,t),E=this.nAsix(l,S*I+g,t),T=Math.floor(M*I+g),N=z(O.y);b.push(new X(P(T),{x:"start"===n?O.x+f:E.x,y:N-10+m,align:n,color:a,opacity:y<1?y:r.textOpacity,font:"NeueHaasDisplay,Tahoma,sans-serif,Arial",size:12})),o&&b.push(new U({x:O.x+f,y:N+m},{x:E.x,y:N+m},{color:I>0?r.lines:r.lastLine,opacity:y<1?y:r.lineOpacity,lineWidth:1}))}return b}},{key:"createPercentYLabels",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"start",i=this.props,a=i.colors,n=i.layout.width,o=this.getHeightGraph(),s=this.state,r=s.graphOffset,c=r.top,l=r.asixX,h=void 0===l?0:l,d=r.asixY,u=void 0===d?0:d,p=s.animationsValues.yAsixOpacity,f=void 0===p?1:p,v=o/4,m=[],_=0;_<5;_+=1){var y=this.nAsix(0,v*_),w=this.nAsix(n,v),g=Math.floor(25*_),b=o-v*_+c;m.push(new X(P(g),{x:"start"===e?y.x+h:w.x,y:b-10+u,align:e,color:t,opacity:f<1?f:a.textOpacity,font:"NeueHaasDisplay,Tahoma,sans-serif,Arial",size:12})),m.push(new U({x:y.x+h,y:b+u},{x:w.x,y:b+u},{color:_>0?a.lines:a.lastLine,opacity:f<1?f:a.lineOpacity,lineWidth:1}))}return m}},{key:"getYLabels",value:function(){var t=this,e=this.props,i=e.yScaled,a=void 0!==i&&i,o=e.dataset,s=void 0===o?[]:o,r=e.visibled,c=void 0===r?[]:r,l=e.colors,h=e.percentage;if(!1===(void 0!==h&&h)){var d=this.state,u=d.graphMinMax,p=d.graphScale.animateYLines;if(a){var f=[];return s.filter(function(t){return c.includes(t.id)}).forEach(function(e,i){f=[].concat(n()(f),n()(t.createYLabels(e.id,u,p,e.color,0===i?"start":"end",0===i)))}),f}return this.createYLabels("common",u,p,l.text,"start")}return this.createPercentYLabels(l.text,"start")}},{key:"drawDebugInfo",value:function(){var t=this.props,e=t.layout,i=t.offset,a=t.limit,n=t.scroll,o=t.width,s=this.state,r=s.graphMinMax,c=r.minY,l=r.maxY,h=s.graphScale,d=s.graphOffset,u=d.left,p=d.top,f=d.right,v=d.bottom,m=s.step;this.canvas.rect(0,0,{width:300,height:150,color:"rgba(0, 0, 0, 0.5)",fill:!0}),this.canvas.text("Min/Max Y: ".concat(c," / ").concat(l),{x:10,y:20,align:"start",color:"white",size:14,font:"NeueHaasDisplay,Tahoma,sans-serif,Arial"}),this.canvas.text("Scale X/Y: ".concat(h.x," / ").concat(h.y),{x:10,y:40,align:"start",color:"white",size:14,font:"NeueHaasDisplay,Tahoma,sans-serif,Arial"}),this.canvas.text("Offset L/T/R/B: ".concat(u,"px / ").concat(p,"px / ").concat(f,"px / ").concat(v,"px"),{x:10,y:60,align:"start",color:"white",size:14,font:"NeueHaasDisplay,Tahoma,sans-serif,Arial"}),this.canvas.text("Width/Height: ".concat(e.width.toFixed(2),"px / ").concat(e.height.toFixed(2),"px"),{x:10,y:80,align:"start",color:"white",size:14,font:"NeueHaasDisplay,Tahoma,sans-serif,Arial"}),this.canvas.text("Step: ".concat(m,"px"),{x:10,y:100,align:"start",color:"white",size:14,font:"NeueHaasDisplay,Tahoma,sans-serif,Arial"}),this.canvas.text("Offset/Limit: ".concat(i," / ").concat(a),{x:10,y:120,align:"start",color:"white",size:14,font:"NeueHaasDisplay,Tahoma,sans-serif,Arial"}),this.canvas.text("Offset/Limit (%): ".concat(n.toFixed(2)," / ").concat(o.toFixed(2)),{x:10,y:140,align:"start",color:"white",size:14,font:"NeueHaasDisplay,Tahoma,sans-serif,Arial"})}},{key:"drawFpsInfo",value:function(){var t=new Date,e=1e3/(t-this.time);this.time=t,this.canvas.rect(0,0,{width:100,height:50,color:"rgba(0, 0, 0, 0.5)",fill:!0}),this.canvas.text("FPS: ".concat(10*Math.ceil(e/10)),{x:10,y:20,align:"start",color:"white",size:14,font:"NeueHaasDisplay,Tahoma,sans-serif,Arial"})}},{key:"calcDrawParams",value:function(){var t=this,e=this.state,i=e.step,a=e.visibility,n=void 0===a?{}:a,o=e.graphMinMax,s=e.graphLayout.offsetPx,r=e.mouse,c=e.selectArc,l=this.props,h=l.visibled,d=void 0===h?[]:h,u=l.allowPointValue,p=l.lineWidth,f=void 0===p?3:p,v=l.layout.height,m=void 0===v?0:v,_=this.state.graphScale;return{nAsix:function(e,i,a){var n=L()(o[a],2),s=n[0],r=n[1];return t.transformPositions(e,i,{height:m,minMaxY:{min:s,max:r},scale:{x:_.x,y:_[a]}})},selectArc:c,mouse:r,step:i,visibled:d,visibility:n,lineWidth:f,allowPointValue:u,offsetPx:s,width:this.getWidthGraph(),height:this.getHeightGraph(),minMaxY:{max:o.common[1]}}}},{key:"calcDraw",value:function(t){var e=t.arcMouseMove,i=void 0!==e&&e,a=this.props,o=a.dataset,s=void 0===o?[]:o,r=[];a.allowYAsix&&(r=this.getYLabels());var l=this.calcDrawParams(),h=[],d=s.filter(function(t){return"bar"===t.type||"area"===t.type});d.length>0&&d[0].list.length>0&&(h=[].concat(n()(h),n()(this.drawGraphs(d,c()({},l,{length:d[0].list.length}))))),this.additionalDraw.filter(function(t){return"beforeLines"===t[0]}).forEach(function(t){h=[].concat(n()(h),n()(t[1]))}),r.filter(function(t){return t instanceof U}).forEach(function(t){return h.push(t)});var u=s.filter(function(t){return"bar"!==t.type&&"area"!==t.type});return u.length>0&&u[0].list.length>0&&(h=[].concat(n()(h),n()(this.drawGraphs(u,c()({},l,{length:u[0].list.length}))))),this.additionalDraw.filter(function(t){return"afterLines"===t[0]}).forEach(function(t){h=[].concat(n()(h),n()(t[1]))}),r.filter(function(t){return t instanceof X}).forEach(function(t){return h.push(t)}),h.forEach(function(t){t instanceof H&&(t.params.mouseMove=i)}),this.additionalDraw=[],h}},{key:"draw",value:function(){var t=this,e=this.state,i=e.showInfo,a=void 0!==i&&i,n=e.animationsValues.xAsixOpacity,o=void 0===n?100:n,s=e.selectArc,r=void 0!==s&&s,c=this.props,l=c.allowXAsix,h=c.arcMode,d=void 0!==h&&h;if(this.canvas.clear(),l){var u=this.props,p=u.id,f=u.scroll,v=u.labels,m=u.layout,_=u.width,y=this.state.graphLayout;this.labelX.setProps({id:p,width:_,scroll:f,labels:v,layout:m,graphLayout:y,opacity:o})}var w=!1;this.calcDraw({arcMouseMove:function(t){w=t}}).forEach(function(e){return t.canvas.draw(e)}),d&&(!1!==w&&r!==w?setTimeout(function(){t.setState({selectArc:w})},1):!1===w&&r!==w&&setTimeout(function(){t.setState({selectArc:!1})},1)),this.props.debug&&this.drawDebugInfo(),this.props.fps&&this.drawFpsInfo(),!1!==a?this.drawShowInfo():this.showInfoNode.setAttribute("style","opacity: 0;top: -".concat(this.props.layout.height,"px;")),this.drawSelectArc()}},{key:"drawSelectArc",value:function(){var t=this.props,e=t.dataset,i=void 0===e?[]:e,a=t.layout,n=this.state,o=n.step,s=n.graphLayout.offsetPx,r=n.mouse,c=r.pointX,l=void 0===c?0:c,h=r.pointY,d=void 0===h?0:h,u=n.selectArc,p=void 0!==u&&u;if(!1!==p){var f=i.find(function(t){return t.id===p});if(f){for(var v=this.getWidthGraph(),m=0,_=0;_<f.list.length;_++){var y=this.nAsix(_*o-s,0).x;y>=0-2*o&&y<=v+2*o&&(m+=f.list[_])}this.showSelectArc.innerHTML='<div class="label">'.concat(f.label,'</div><div class="value" style="color: ').concat(f.color,';">').concat(m,"</div>");var w=l-50,g=d-this.showSelectArc.clientHeight-30;w+this.showSelectArc.clientWidth+30>a.width&&(w=a.width-this.showSelectArc.clientWidth-30),g<0&&(g=d+30),this.showSelectArc.style="opacity: 1;top: ".concat(g,"px;left: ").concat(w,"px;")}}else this.showSelectArc.style="opacity: 0;top: -".concat(this.props.layout.height,"px;")}},{key:"drawShowInfo",value:function(){var t=this,e=this.props,i=e.scroll,a=e.labels,n=void 0===a?[]:a,o=e.dataset,s=void 0===o?[]:o,r=e.visibled,l=void 0===r?[]:r,h=e.lineWidth,d=e.colors,u=e.layout,p=e.yScaled,f=void 0!==p&&p,v=e.stacked,m=void 0!==v&&v,_=e.percentage,y=void 0!==_&&_,w=e.zoomType,g=void 0===w?"none":w,b=e.zoom,x=void 0!==b&&b,S=this.state,M=S.step,D=S.graphOffset,A=S.showInfo,z=n.length*M/100*(i-this.props.width),L=A,I=n[L],O=new Date(I),E=q[O.getMonth()],T=J[O.getDay()],P=O.getDate(),F="".concat(T,", ").concat(E," ").concat(P);if(!1!==x&&("byHours"===g||"by3Days"===g)){var C=new Date(I),Z=C.getHours(),W=C.getMinutes();1==="".concat(Z).length&&(Z="0".concat(Z)),1==="".concat(W).length&&(W="0".concat(W)),F="".concat(Z,":").concat(W)}var V=this.nAsix(L*M-z,0).x,j=s.filter(function(t){return l.includes(t.id)}).map(function(e){return c()({value:e.list[L],color:e.color,label:e.label,type:e.type},t.nAsix(L*M-z,e.list[L],f?e.id:"common"))}),R=j.filter(function(t){return"area"===t.type||"bar"===t.type}).reduce(function(t,e){return e.value+t},0),X=(j=j.map(function(t){return c()({},t,{percent:"area"===t.type?100*t.value/R:null})})).filter(function(t){return"line"===t.type});X.length>0&&(this.canvas.line({x:V,y:0},{x:V,y:u.height-D.bottom},{color:d.activeLine,opacity:d.activeLineOpacity,lineWidth:2}),X.forEach(function(e){t.canvas.circle(e.x,e.y,5,{lineWidth:h+2,color:d.background,strokColor:e.color})}));var U=L*M-z+10;U<0&&(U=0),this.showInfoNode.innerHTML="";for(var Y=[],B=0;B<j.length;B+=1){var H=j[B],G=[et.a.canvas__show_info__row__item];j.some(function(t){return null!==t.percent})&&j.length>1&&G.push(et.a.canvas__show_info__row__item_with_percent),Y.push(k("div",{className:G,children:[k("div",{className:et.a.canvas__show_info__row__item__percent,text:Math.round(H.percent)+"%"}),k("div",{className:et.a.canvas__show_info__row__item__name,text:H.label}),k("div",{className:et.a.canvas__show_info__row__item__value,style:"color: ".concat(H.color),text:N(H.value)})]}))}m&&!1===y&&Y.push(k("div",{className:et.a.canvas__show_info__row__item,children:[k("div",{className:et.a.canvas__show_info__row__item__percent,text:"100%"}),k("div",{className:et.a.canvas__show_info__row__item__name,text:"All"}),k("div",{className:et.a.canvas__show_info__row__item__value,text:N(R)})]}));var $=[k("div",{className:et.a.canvas__show_info__title__value,text:F})];!1===x&&"none"!==g&&$.push(k("div",{className:et.a.canvas__show_info__title__zoom,children:k("div",{className:et.a.canvas__show_info__title__zoom__icon,style:"background-image: url(".concat(lt.a,")")})})),this.showInfoNode.appendChild(k("div",{className:et.a.canvas__show_info__wrapper,children:[k("div",{className:et.a.canvas__show_info__title,children:$}),k("div",{className:et.a.canvas__show_info__rows,children:Y})]})),U+this.showInfoNode.clientWidth+30>u.width&&(U=u.width-this.showInfoNode.clientWidth-30),this.showInfoNode.setAttribute("style","opacity: 1;left: ".concat(U,"px"))}},{key:"getLabelIndexByX",value:function(t){var e=this.state.step,i=this.props.labels,a=void 0===i?[]:i,n=Math.round(t/e);return n>0&&n<a.length&&n}},{key:"getLabelIndexByRelativeX",value:function(t){var e=this.state,i=e.graphScale,a=e.graphLayout.offsetPx,n=e.graphOffset.left;return this.getLabelIndexByX(a+(t-n)/i.x)}},{key:"isEventInShowInfo",value:function(t){return t.target.closest(".".concat(et.a.canvas__show_info))===this.showInfoNode}},{key:"eventClickShowInfo",value:function(t){!this.mouseEnter||this.mouseDown||t.touches&&t.touches.length>0||this.isShowInfo&&this.handleZoom()}},{key:"getLabelText",value:function(t){var e=this.props,i=e.zoom,a=void 0!==i&&i,n=e.zoomType,o=void 0===n?"none":n;if(!1===a||"byHours"!==o&&"by3Days"!==o){var s=new Date(t),r=q[s.getMonth()],c=s.getDate();return"".concat(r," ").concat(c)}var l=new Date(t),h=l.getHours(),d=l.getMinutes();return 1==="".concat(h).length&&(h="0".concat(h)),1==="".concat(d).length&&(d="0".concat(d)),"".concat(h,":").concat(d)}},{key:"createAnimation",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300;(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])&&(this.animations=this.animations.filter(function(e){return e.type!==t}));var a=performance.now()/this.timeFactor;this.animations.push({type:t,startAt:a,begin:a,step:e,duration:i})}},{key:"handleFadeInLine",value:function(t){var e=this;this.createAnimation("anim-dataset-".concat(t),function(i){e.setState({visibility:c()({},e.state.visibility,M()({},t,E(i)))})},300)}},{key:"handleFadeOutLine",value:function(t){var e=this;this.createAnimation("anim-dataset-".concat(t),function(i){e.setState({visibility:c()({},e.state.visibility,M()({},t,1-E(i)))})},300)}},{key:"isTypeAnimating",value:function(){for(var t=this,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return i.some(function(e){return t.animations.filter(function(t){return!1!==t}).some(function(t){return t.type.indexOf(e)>-1})})}},{key:"handleScale",value:function(t,e){var i,a,n,o,s,r,l,h,d=this,u=this.props.layout,p=L()(e[t],2),f=p[0],v=p[1],m=9999999999,_=0;if(this.state.graphMinMax.hasOwnProperty(t)&&2===this.state.graphMinMax[t].length&&(m=this.state.graphMinMax[t][0],_=this.state.graphMinMax[t][1]),m!==f||_!==v){var y=f-m,w=v-_,g=_>v?1:-1,b=Math.abs(w);if(_==v&&(g=m<f?1:-1,b=Math.abs(y)),Math.abs(b)>u.height/2){var x=b>=0?1:-1;b=u.height/2*x}this.createAnimation("anim-graph-".concat(t),(i=[y,w],a=[m,_],n=L()(i,2),o=n[0],s=n[1],r=L()(a,2),l=r[0],h=r[1],function(e){var i=o*e+l,a=s*e+h,n=e>0?e*g:g,r=n>=0?1:-1,u=1-Math.abs(n),p=0!==n&&0!==u?b*u*r:0;d.updateGraphOptions(c()({},d.state.graphMinMax,M()({},t,[i,a])),p)}),100)}else this.updateGraphOptions(c()({},this.state.graphMinMax,M()({},t,[f,v])),0)}},{key:"handleAnimScale",value:function(t,e){var i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:150,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.props,s=o.layout,r=o.percentage,l=void 0!==r&&r,h=0,d=10,u=L()(e[t],2),p=u[0],f=u[1];this.state.graphMinMax.hasOwnProperty(t)&&2===this.state.graphMinMax[t].length&&(h=this.state.graphMinMax[t][0],d=this.state.graphMinMax[t][1]);var v=[h,d],m=[p,f],_=Math.abs(v[1]-v[0]),y=Math.abs(m[1]-m[0]);this.zoomFactor=_>y?_/y:y/_;var w=[m[0]-v[0],m[1]-v[1]],g=d>f?1:-1,b=Math.abs(w[1]);if(d==f&&(g=h<p?1:-1,b=Math.abs(w[0])),Math.abs(b)>s.height/2){var x=b>=0?1:-1;b=s.height/2*x}0!==w[0]||0!==w[1]?this.createAnimation("anim-y-minmax-".concat(t),function(e){var a=v[0]+w[0]*e,o=v[1]+w[1]*e,s=n?e*g:void 0;i.updateGraphOptions(c()({},i.state.graphMinMax,M()({},t,[a,o])),!1===l?s:1)},a):this.updateGraphOptions(c()({},this.state.graphMinMax,M()({},t,m)),n?1:void 0)}},{key:"handleScaleYMinMax",value:function(){var t=this;this.createAnimation("anim-y-minmax",function(e){var i=1*e;t.setState({animationsValues:c()({},t.state.animationsValues,{yMinMax:0+i})})},150)}},{key:"handleCreateLabelX",value:function(){var t=this.props,e=t.id,i=t.scroll,a=t.labels,n=t.layout,o=t.width,s=this.state.graphLayout;return new at({id:e,width:o,scroll:i,labels:a,layout:n,graphLayout:s,getLabel:this.getLabelText.bind(this),getLabelIndexByX:this.getLabelIndexByRelativeX.bind(this)})}},{key:"handleZoom",value:function(){var t=this.props.zoom,e=void 0!==t&&t,i=this.state.showInfo,a=void 0!==i&&i;if(!1!==a&&!1===e){var n=this.props,o=n.labels,s=void 0===o?[]:o,r=n.zoomType;if("none"!==(void 0===r?"none":r)){var c=s[a];this.isShowInfo=!1,this.setState({showInfo:!1}),this.props.onZoom(c,a)}}}},{key:"render",value:function(){var t=this.props,e=t.allowXAsix,i=void 0!==e&&e,a=t.mini,n=void 0!==a&&a;this.canvasNode=k("canvas"),this.showInfoNode=k("div",{className:et.a.canvas__show_info,style:"opacity: 0;top: -".concat(this.props.layout.height,"px;"),onMouseDown:this.eventClickShowInfo.bind(this)}),this.showSelectArc=k("div",{className:et.a.canvas__show_select_arc,style:"opacity: 0;top: -".concat(this.props.layout.height,"px;")});var o={};return n||(o={onTouchMove:this.eventTouchMove.bind(this),onMouseMove:this.eventMouseMove.bind(this),onMouseLeave:this.eventMouseLeave.bind(this),onMouseEnter:this.eventMouseEnter.bind(this),onTouchStart:this.eventMouseDown.bind(this)}),this.element=k("div",c()({className:et.a.canvas_wrapper,children:this.canvasNode},o)),this.bars=new rt,this.bars.renderDom(this.element),this.element.appendChild(this.showInfoNode),this.element.appendChild(this.showSelectArc),i&&(this.labelX=this.handleCreateLabelX(),this.labelX.renderDom(this.element)),this.element}}]),e}(A);M()(ht,"defaultProps",{mode:$,arcMode:!1,animateScale:!0,allowXAsix:!0,allowYAsix:!0,allowPointValue:!1,offset:0,limit:0,dataset:[],visibled:[],width:0,scroll:0,layout:{width:0,height:0},yScaled:!1,zoomType:"none",zoom:!1}),M()(ht,"calcXStep",function(t){var e=t.width,i=t.limit,a=t.length,n=t.maxStep,o=void 0===n?1e3:n,s=t.minStep,r=void 0===s?1:s,c=i>0?e/((a-1)*i/100):e/a;return c=Math.min(c,o),c=Math.max(c,r)});var dt=ht,ut=i(10),pt=i.n(ut),ft=i(20),vt=i.n(ft),mt=function(t){function e(){var t,i;f()(this,e);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return i=y()(this,(t=g()(e)).call.apply(t,[this].concat(n))),M()(u()(i),"touching",!1),M()(u()(i),"longTouchingTimeout",500),i}return x()(e,t),m()(e,[{key:"componentDidMount",value:function(){this.attachEvents(),this.fadeIn()}},{key:"componentDidUpdate",value:function(t){var e=this.props,i=e.dataset,a=void 0===i?[]:i,n=e.visibled,o=void 0===n?[]:n,s=this.props.mode,r=void 0===s?$:s;t.dataset!==a?this.handleReRender():t.visibled===o&&t.mode===r||this.handleApplayVisibled()}},{key:"attachEvents",value:function(){document.addEventListener("mouseup",this.eventMouseUp.bind(this)),document.addEventListener("touchend",this.eventMouseUp.bind(this))}},{key:"eventMouseUp",value:function(t){if(this.touching){var e=this.touching,i=e.item,a=e.timeoutId,n=e.long,o=void 0!==n&&n,s=this.items.find(function(t){return t.id==="switcher-for-".concat(i.id)});if(s)if(!(t.target.closest(".".concat(pt.a.line__switchers__item))!==s)){if(s.classList.remove(pt.a.line__switchers__item__touching),clearTimeout(a),!o){var r=this.props.visibled,c=void 0===r?[]:r;1===c.length&&c[0]===i.id?(s.classList.add(pt.a.line__switchers__item_shake),setTimeout(function(){s.classList.remove(pt.a.line__switchers__item_shake)},820)):this.props.onSwitch(i.id)}this.touching=!1}}}},{key:"handleMouseDown",value:function(t,e){var i=this;t.preventDefault(),t.stopPropagation();var a=this.items.find(function(t){return t.id==="switcher-for-".concat(e.id)});if(a){a.classList.add(pt.a.line__switchers__item__touching);var n=setTimeout(function(){i.touching.long=!0,i.props.onSelectOne(e.id)},this.longTouchingTimeout);this.touching={item:e,timeoutId:n,long:!1}}}},{key:"handleApplayVisibled",value:function(){var t=this,i=this.props,a=i.dataset,n=void 0===a?[]:a,o=i.visibled,s=void 0===o?[]:o,r=this.props.mode,c=void 0===r?$:r;n.forEach(function(i){var a=t.items.find(function(t){return t.id==="switcher-for-".concat(i.id)}),n=s.includes(i.id);if(a){var o=a.querySelector(".".concat(pt.a.line__switchers__item__label)),r=e.getColor(c,i.color);a.style="border-color: ".concat(r,";")+(n?"background-color: ".concat(r):""),a.classList.toggle(pt.a.line__switchers__item_active,n),o&&(o.style=n?"":"color: ".concat(i.color,";"))}})}},{key:"fadeIn",value:function(){var t=this;setTimeout(function(){t.items.forEach(function(t){return t.classList.add(pt.a.line__switchers__item_fadein)})},200)}},{key:"fadeOut",value:function(){var t=this;setTimeout(function(){t.items.forEach(function(t){return t.classList.remove(pt.a.line__switchers__item_fadein)})},200)}},{key:"handleReRender",value:function(){var t=this,i=this.props,a=i.dataset,n=void 0===a?[]:a,o=i.visibled,s=void 0===o?[]:o,r=i.mode,c=void 0===r?$:r;this.items.forEach(function(t){return t.remove()}),this.items=e.createItems(n,s,c,this.handleMouseDown.bind(this)),this.items.forEach(function(e){return t.element.appendChild(e)}),this.fadeIn()}},{key:"render",value:function(){var t=this.props,i=t.dataset,a=void 0===i?[]:i,n=t.visibled,o=void 0===n?[]:n,s=t.mode,r=void 0===s?$:s;return this.items=e.createItems(a,o,r,this.handleMouseDown.bind(this)),this.element=k("div",{className:pt.a.line__switchers,children:this.items}),this.element}}],[{key:"getDarknessColor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=R(t),a=C(i.r,i.g,i.b),n=j(a[0],a[1]-.18,a[2]);return i.r=Math.round(n[0]),i.g=Math.round(n[1]),i.b=Math.round(n[2]),i.r>255&&(i.r=255),i.g>255&&(i.g=255),i.b>255&&(i.b=255),t=e<1?"rgba(".concat(i.r,",").concat(i.g,",").concat(i.b,",").concat(e,")"):"rgb(".concat(i.r,",").concat(i.g,",").concat(i.b,")")}},{key:"getColor",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=R(e);return"night"===t?this.getDarknessColor(e,i):e=i<1?"rgba(".concat(a.r,",").concat(a.g,",").concat(a.b,",").concat(i,")"):"rgb(".concat(a.r,",").concat(a.g,",").concat(a.b,")")}},{key:"createItems",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$,n=arguments.length>3?arguments[3]:void 0;return t.length<2?[]:t.map(function(t){var o=e.getColor(a,t.color),s=i.includes(t.id);return k("div",{id:"switcher-for-".concat(t.id),className:[pt.a.line__switchers__item,s?pt.a.line__switchers__item_active:""],style:"border-color: ".concat(o,";")+(s?"background-color: ".concat(o):""),children:[k("div",{className:pt.a.line__switchers__item__check,children:[k("div",{className:pt.a.line__switchers__item__check__icon,style:"background-image: url(".concat(vt.a,")")})]}),k("div",{className:pt.a.line__switchers__item__label,text:t.label,style:s?"":"color: ".concat(o,";")}),k("div",{className:pt.a.line__switchers__item__tap_indicator,style:"background-color: ".concat(o,";")})],onMouseDown:function(e){return n(e,t)},onTouchStart:function(e){return n(e,t)}})})}}]),e}(A);M()(mt,"defaultProps",{dataset:[],visibled:[]});var _t=mt,yt=function(){function t(e){f()(this,t),this.data=e}return m()(t,[{key:"getXAsix",value:function(){var t=this,e=Object.keys(this.data.types).find(function(e){return"x"===t.data.types[e]});if(!e)throw new Error("Can't found x type");var i=this.data.columns.find(function(t){return t.length>0&&t[0]===e});if(!i)throw new Error("Can't found x column");return i.slice(1)}},{key:"getCharts",value:function(){var t=this;return this.data.columns.filter(function(t){return"x"!==t[0]}).map(function(e){return{id:e[0],type:t.data.types[e[0]],label:t.data.names[e[0]],color:t.data.colors[e[0]],list:e.slice(1)}})}},{key:"getLines",value:function(){var t=this,e=Object.keys(this.data.types).filter(function(e){return"line"===t.data.types[e]});if(0===e.length)throw new Error("Can't found any lines");if(this.data.columns.filter(function(t){return t.length>0&&e.includes(t[0])}).length!==e.length)throw new Error("Can't found lines #".concat(e.join(",")," in columns"));return e.map(function(e){return t.getLine(e)})}},{key:"getLine",value:function(t){var e=this.data.columns.find(function(e){return e.length>0&&e[0]===t}),i=this.data.names[t],a=this.data.colors[t];if(!e)throw new Error("Can't found ".concat(t," column"));if(!i)throw new Error("Can't name for type #".concat(t));if(!a)throw new Error("Can't found color for type #".concat(t));return{id:t,label:i,color:a,list:e.slice(1)}}},{key:"IsYScaled",value:function(){return!!this.data.y_scaled}},{key:"IsStacked",value:function(){return!!this.data.stacked}},{key:"IsPercentage",value:function(){return!!this.data.percentage}},{key:"length",get:function(){return this.data.length}}]),t}(),wt=i(21),gt=i.n(wt),bt=i(11),xt=i.n(bt),St=i(13),Mt=i.n(St),kt=function(t){function e(t){var i;f()(this,e),i=y()(this,g()(e).call(this,t)),M()(u()(i),"eventMouseMove",function(t){if(i.isChangePosition){var e=i.props,a=e.layout,n=e.width,o=i.changePositionEvent.scroll,s={x:i.changePositionEvent.x,y:i.changePositionEvent.y},r=T(t),c=s.x-r.x,l=c>0?1:0;if(0!==(c=Math.abs(c))){var h=100*c/a.width,d=o+h;1===l&&(d=o-h),d-n<0&&(d=n),d>100&&(d=100),i.props.scroll!==d&&i.handleChange({scroll:d,width:n})}}if(i.isChangeSize){var u=i.props.layout,p=i.changeSizeEvent,f=p.width,v=p.side,m=void 0===v?"left":v,_={x:i.changeSizeEvent.x,y:i.changeSizeEvent.y},y=T(t),w=_.x-y.x,g=w>0?1:0;if(0!==(w=Math.abs(w)))if("left"===m){var b=i.props.scroll,x=100*w/u.width,S=f-x;1===g&&(S=f+x),S>b&&(S=b),S<5&&(S=5),i.props.width!==S&&i.handleChange({width:S,scroll:b})}else if("right"===m){var M=i.changeSizeEvent.scroll,k=100*w/u.width,D=f+k,A=M+k;if(1===g&&(D=f-k,A=M-k),A>100)A=100,D=100-(M-f);D<5&&(D=5),i.props.width!==D&&i.handleChange({width:D,scroll:A})}}}),M()(u()(i),"eventMouseUp",function(){i.isChangePosition=!1,i.isChangeSize=!1,i.changePositionEvent=!1,i.changeSizeEvent=!1}),M()(u()(i),"eventLeftZoneMouseDown",function(t){var e=i.props,a=e.width,n=e.scroll;i.isChangeSize=!0,i.changeSizeEvent=c()({},T(t),{side:"left",width:a,scroll:n})}),M()(u()(i),"eventRightZoneMouseDown",function(t){var e=i.props,a=e.width,n=e.scroll;i.isChangeSize=!0,i.changeSizeEvent=c()({},T(t),{side:"right",width:a,scroll:n})}),M()(u()(i),"eventZoneMouseDown",function(t){var e=i.props.scroll;i.isChangePosition=!0,i.changePositionEvent=c()({},T(t),{scroll:e})});var a=t.id,n=t.dataset,o=void 0===n?[]:n,s=t.mode,r=t.layout,l=t.yScaled;return i.cartMiniMap=new dt({id:a,mode:s,mini:!0,lineWidth:2,dataset:o,yScaled:l,allowXAsix:!1,allowYAsix:!1,layout:{width:r.width,height:50}}),i}return x()(e,t),m()(e,[{key:"componentDidMount",value:function(){this.attachEvents()}},{key:"componentDidUpdate",value:function(t){var e=this.props,i=e.scroll,a=e.width,n=e.dataset,o=e.layout,s=e.visibled,r=e.yScaled,c=e.mode;t.scroll===i&&t.width===a||(this.minimapZone.style.left="".concat(i-a,"%"),this.minimapZone.style.width="".concat(a,"%"),this.minimapLeftZone.style="width: ".concat(i-a,"%"),this.minimapRightZone.style="width: ".concat(100-i,"%"),this.minimapLeftSizeZone.style="left: ".concat(i-a,"%;"),this.minimapRightSizeZone.style="left: ".concat(i,"%;")),t.dataset===n&&t.yScaled===r&&t.visibled===s&&t.layout===o&&t.mode===c||this.cartMiniMap.setProps({yScaled:r,visibled:s,dataset:n,mode:c,layout:{width:o.width-36,height:45}})}},{key:"dettachEvents",value:function(){document.removeEventListener("mousemove",this.documentEventMouseMove),document.removeEventListener("mouseup",this.documentEventMouseUp),document.removeEventListener("touchmove",this.documentEventMouseMove),document.removeEventListener("touchend",this.documentEventMouseUp)}},{key:"attachEvents",value:function(){this.documentEventMouseMove=this.eventMouseMove.bind(this),this.documentEventMouseUp=this.eventMouseUp.bind(this),document.addEventListener("mousemove",this.documentEventMouseMove),document.addEventListener("mouseup",this.documentEventMouseUp),document.addEventListener("touchmove",this.documentEventMouseMove),document.addEventListener("touchend",this.documentEventMouseUp)}},{key:"handleChange",value:function(t){var e=t.scroll,i=t.width;if(this.props.grid){var a=this.props.dataset,n=void 0===a?[]:a,o=n.length>0?n[0].list.length:0,s=o>0?100/o:1,r=Math.ceil(e/s)*s,c=Math.ceil(i/s)*s;this.props.onChange({scroll:r,width:c})}else this.props.onChange({scroll:e,width:i})}},{key:"render",value:function(){var t=this.props,e=t.scroll,i=t.width;return this.minimapLeftZone=k("div",{className:Mt.a.minimap__left_zone,style:"width: ".concat(e-i,"%")}),this.minimapLeftSizeZone=k("div",{className:Mt.a.minimap__left_size_zone,style:"left: ".concat(e-i,"%;"),children:[k("div",{className:Mt.a.minimap__size_zone__helper,onMouseDown:this.eventLeftZoneMouseDown.bind(this),onTouchStart:this.eventLeftZoneMouseDown.bind(this)}),k("div",{className:Mt.a.minimap__size_zone__helper__line})]}),this.minimapZone=k("div",{className:Mt.a.minimap__zone,style:"left: ".concat(e-i,"%; width: ").concat(i,"%"),onMouseDown:this.eventZoneMouseDown.bind(this),onTouchStart:this.eventZoneMouseDown.bind(this)}),this.minimapRightSizeZone=k("div",{className:Mt.a.minimap__right_size_zone,style:"left: ".concat(e,"%;"),children:[k("div",{className:Mt.a.minimap__size_zone__helper,onMouseDown:this.eventRightZoneMouseDown.bind(this),onTouchStart:this.eventRightZoneMouseDown.bind(this)}),k("div",{className:Mt.a.minimap__size_zone__helper__line})]}),this.minimapRightZone=k("div",{className:Mt.a.minimap__right_zone,style:"width: ".concat(100-e,"%")}),this.minimap=k("div",{className:Mt.a.minimap,children:[this.minimapLeftZone,this.minimapLeftSizeZone,this.minimapZone,this.minimapRightSizeZone,this.minimapRightZone]}),this.canvasWrapper=k("div",{className:Mt.a.minimap__canvas_wrapper}),this.element=k("div",{className:Mt.a.charts__minimap_wrapper,children:[this.minimap,this.canvasWrapper]}),this.cartMiniMap.renderDom(this.canvasWrapper),this.element}}]),e}(A);M()(kt,"defaultProps",{id:0,dataset:[],visibled:[],layout:{},scroll:0,width:0,yScaled:!1});var Dt=kt,At=i(15),zt=i.n(At),Lt=function(t){function e(t){var i;f()(this,e),i=y()(this,g()(e).call(this,t)),M()(u()(i),"state",{date_from:!1,date_to:!1}),M()(u()(i),"nodes",{from:!1,to:!1});var a=t.from,n=void 0!==a&&a,o=t.to,s=void 0!==o&&o;return i.applyTimestamp(n,"from"),i.applyTimestamp(s,"to"),i.appearDatesRange(i.state.from,i.state.to),i}return x()(e,t),m()(e,[{key:"componentDidUpdate",value:function(t,e){var i=this.props,a=i.from,n=void 0!==a&&a,o=i.to,s=void 0!==o&&o,r=t.from,c=void 0!==r&&r,l=t.to,h=void 0!==l&&l,d=this.state,u=d.date_from,p=d.date_to;n!==c&&this.applyTimestamp(n,"from"),s!==h&&this.applyTimestamp(s,"to"),u!==e.date_from&&this.applyDateItem(u,"from"),this.isSameDay(u,p)||p===e.date_to||this.applyDateItem(p,"to"),this.isSameDay(u,p)&&this.isDateItemShown("to")&&this.hideDateItem("to")}},{key:"isSameDay",value:function(t,e){return!1!==t&&!1!==e&&(t.year===e.year&&t.month===e.month&&t.day===e.day)}},{key:"parseTimestamp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!1!==t){var e=new Date(t);return{year:e.getFullYear(),month:q[e.getMonth()],day:e.getDate()}}return!1}},{key:"applyTimestamp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"from";this.setState(M()({},"date_".concat(e),this.parseTimestamp(t)))}},{key:"createDateItem",value:function(t){var e=t.year,i=t.month,a=t.day,n=k("div",{className:zt.a.dates_range__item__year,text:e}),o=k("div",{className:zt.a.dates_range__item__month,text:i}),s=k("div",{className:zt.a.dates_range__item__day,text:a});return{item:k("div",{className:zt.a.dates_range__item,children:[s,o,n]}),year:n,month:o,day:s}}},{key:"appearDateItem",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"from";this.nodes[e]=!1!==t&&this.createDateItem(t)}},{key:"appearDatesRange",value:function(t,e){this.appearDateItem(t,"from"),this.appearDateItem(e,"to")}},{key:"updateDateItem",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"from";!1!==t&&(this.nodes[e].year.innerText=t.year,this.nodes[e].month.innerText=t.month,this.nodes[e].day.innerText=t.day)}},{key:"isDateItemShown",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"from";return!1!==this.nodes[t]}},{key:"showDateItem",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"from";!1!==t&&(this.appearDateItem(t,e),this.nodes[e]&&this.element.appendChild(this.nodes[e].item))}},{key:"hideDateItem",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"from";this.nodes[t]&&(this.element.removeChild(this.nodes[t].item),this.nodes[t]=!1)}},{key:"applyDateItem",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"from";this.isDateItemShown(e)?!1!==t?this.updateDateItem(t,e):this.hideDateItem(e):!1!==t&&this.showDateItem(t,e)}},{key:"render",value:function(){var t=[];return this.nodes.from&&t.push(this.nodes.from.item),this.nodes.to&&t.push(this.nodes.to.item),this.element=k("div",{className:zt.a.dates_range,children:t}),this.element}}]),e}(A);M()(Lt,"defaultProps",{from:!1,to:!1});var It=Lt,Ot=function(t){function e(){return f()(this,e),y()(this,g()(e).apply(this,arguments))}return x()(e,t),m()(e,[{key:"componentWillUnmount",value:function(){this.cart&&(this.cart.destroy(),this.cart=null),this.miniMap&&(this.miniMap.destroy(),this.miniMap=null)}},{key:"componentDidUpdate",value:function(t){var e=this.props,i=e.arcMode,a=e.fontSize,n=e.loading,o=e.zoom,s=e.colors,r=e.layout,c=e.mode,l=e.data;if(t!==a&&this.element.setAttribute("style","font-size: ".concat(a,"px")),t.mode!==c&&(this.applyColorMode(),this.cart.setProps({mode:c}),this.miniMap.setProps({mode:c}),this.lineSwitcher.setProps({mode:c})),t.arcMode!==i&&(this.cart.setProps({arcMode:i}),this.miniMap.setProps({grid:i})),t.colors!==s&&(this.cart.setProps({colors:s}),this.miniMap.setProps({colors:s})),t.data.title===l.title&&t.loading===n||this.updateTitle(),t.zoom!==o&&(this.element.className=this.getElementClassNames().join(" ")),t.data!==l){var h=this.props.data,d=h.visibled,u=void 0===d?[]:d,p=h.dataset,f=void 0===p?[]:p,v=h.labels,m=h.scroll,_=h.width,y=h.yScaled,w=void 0!==y&&y,g=h.stacked,b=void 0!==g&&g,x=h.percentage,S=void 0!==x&&x,M=f.length>0?f[0].list.length:0,k=Et.calcLimitOffset(M,_,m),D=k.limit,A=k.offset;this.cart.setProps({yScaled:w,dataset:f,labels:v,visibled:u,offset:A,limit:D,scroll:m,width:_,stacked:b,percentage:S,zoom:o}),t.data.dataset===f&&t.data.yScaled===w&&t.data.scroll===m&&t.data.width===_&&t.data.visibled===u||(this.miniMap.setProps({scroll:m,width:_,yScaled:w,visibled:u,dataset:f}),this.lineSwitcher.setProps({dataset:f,visibled:u})),t.data.scroll===m&&t.data.width===_&&t.data.dataset===f&&t.data.labels===v||this.datesRange.setProps({from:v[A],to:v[A+D-1]})}t.layout!==r&&(this.cart.setProps({layout:{width:r.width,height:320}}),this.miniMap.setProps({layout:r}))}},{key:"applyColorMode",value:function(){var t=this.props.mode;this.ownElement.classList.toggle(xt.a.mode_night,"night"===t)}},{key:"updateTitle",value:function(){var t=this.props,e=t.data.title,i=void 0===e?"":e,a=t.loading,n=void 0!==a&&a;this.title.innerText=n?"Loading...":i}},{key:"changeMiniMap",value:function(t){var e=t.width,i=t.scroll;this.props.onChangeOffsets({width:e,scroll:i})}},{key:"getElementClassNames",value:function(){var t=this.props,e=t.zoomType,i=void 0===e?"none":e,a=t.zoom,n=void 0!==a&&a,o=t.data,s=o.yScaled,r=void 0!==s&&s,c=o.stacked,l=void 0!==c&&c,h=o.percentage,d=void 0!==h&&h,u=[];return u.push(xt.a.charts),u.push("".concat(xt.a.charts,"__zoom_").concat(i)),n&&u.push("".concat(xt.a.charts,"__zoomed")),r&&u.push("".concat(xt.a.charts,"__y_scaled")),l&&u.push("".concat(xt.a.charts,"__stacked")),d&&u.push("".concat(xt.a.charts,"__percentage")),u}},{key:"render",value:function(){var t=this.props,e=t.animateScale,i=void 0===e||e,a=t.fontSize,n=void 0===a?16:a,o=t.loading,s=void 0!==o&&o,r=t.arcMode,c=void 0!==r&&r,l=t.zoomType,h=void 0===l?"none":l,d=t.zoom,u=void 0!==d&&d,p=t.colors,f=t.layout,v=t.mode,m=t.data,_=m.title,y=void 0===_?"":_,w=m.visibled,g=void 0===w?[]:w,b=m.dataset,x=void 0===b?[]:b,S=m.labels,M=m.scroll,D=m.width,A=m.yScaled,z=void 0!==A&&A,L=m.stacked,I=void 0!==L&&L,O=m.percentage,E=void 0!==O&&O,T=x.length>0?x[0].list.length:0,P=Et.calcLimitOffset(T,D,M),N=P.limit,F=P.offset;return this.cart=new dt({id:1,animateScale:i,zoomType:h,lineWidth:2,mode:v,zoom:u,arcMode:c,visibled:g,dataset:x,offset:F,limit:N,scroll:M,width:D,labels:S,yScaled:z,stacked:I,percentage:E,layout:{width:f.width,height:320},colors:p,onZoom:this.props.onZoom}),this.miniMap=new Dt({id:1,lineWidth:2,mode:v,dataset:x,layout:f,scroll:M,width:D,yScaled:z,onChange:this.changeMiniMap.bind(this)}),this.lineSwitcher=new _t({mode:v,dataset:x,visibled:g,onSwitch:this.props.onSwitchVisible,onSelectOne:this.props.onSelectOneVisible}),this.title=k("h1",{className:xt.a.chart_title,text:s?"Loading...":y}),this.datesRange=new It({from:S[F],to:S[F+N-1]}),this.zoomOut=k("div",{className:xt.a.charts__zoom_out,children:[k("div",{className:xt.a.charts__zoom_out__icon,style:"background-image: url(".concat(gt.a,")")}),k("div",{className:xt.a.charts__zoom_out__text,text:"Zoom Out"})],onClick:this.props.onZoomOut}),this.chartsHeader=k("div",{className:xt.a.charts__header,children:[this.title,this.zoomOut]}),this.datesRange.renderDom(this.chartsHeader),this.element=k("div",{className:this.getElementClassNames(),style:"font-size: ".concat(n,"px"),children:this.chartsHeader}),this.cart.renderDom(this.element),this.footer=k("div",{className:xt.a.charts__footer}),this.miniMap.renderDom(this.footer),this.lineSwitcher.renderDom(this.footer),this.element.appendChild(this.footer),this.element}}]),e}(A);M()(Ot,"defaultProps",{animateScale:!0});var Et=function(t){function e(){var t,i;f()(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return i=y()(this,(t=g()(e)).call.apply(t,[this].concat(o))),M()(u()(i),"state",{layout:{width:0,height:0},data:{title:"",scroll:100,width:25,dataset:[],labels:[],visibled:[],yScaled:!1},fontSize:16,init:!1,loading:!0,zoom:!1}),M()(u()(i),"element",!1),M()(u()(i),"chart",!1),M()(u()(i),"handleZoom",function(){var t=h()(s.a.mark(function t(e,a){var n,o,r,l,h,d,u,p,f,v,m,_,y,w,g,b,x;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.props,o=n.zoomType,r=void 0===o?"none":o,l=n.getZoomedDataUrl,"byDay"!==r){t.next=10;break}h=i.getCurrentData(),3,3,d=h.dataset.map(function(t){return c()({},t,{list:t.list.slice(a-3,a+3)})}),u=h.labels.slice(a-3,a+3),i.setState({zoom:{title:h.title,visibled:h.visibled,yScaled:h.yScaled,stacked:h.stacked,percentage:h.percentage,index:a,unixTimestamp:e,offsetBefore:3,offsetAfter:3,scroll:50,width:100/6,labels:u,dataset:d}}),t.next=32;break;case 10:if("by3Days"!==r){t.next=22;break}return p=i.getCurrentData(),i.setState({loading:!0}),f=l(e),t.next=16,i.loadData(f);case 16:v=t.sent,m=v.getCharts(),_=v.getXAsix(),i.setState({zoom:{title:p.title,yScaled:p.yScaled,stacked:p.stacked,percentage:p.percentage,scroll:100,width:100,labels:_,dataset:m.map(function(t){return c()({},t,{uid:"cahrt-".concat(e,"-").concat(t.id)})}),visibled:m.map(function(t){return t.id})},loading:!1}),t.next=32;break;case 22:if("byHours"!==r){t.next=32;break}return y=i.getCurrentData(),i.setState({loading:!0}),w=l(e),t.next=28,i.loadData(w);case 28:g=t.sent,b=g.getCharts(),x=g.getXAsix(),i.setState({zoom:{title:y.title,yScaled:y.yScaled,stacked:y.stacked,percentage:y.percentage,scroll:50,width:10,labels:x,dataset:b.map(function(t){return c()({},t,{uid:"cahrt-".concat(e,"-").concat(t.id)})}),visibled:b.map(function(t){return t.id})},loading:!1});case 32:case"end":return t.stop()}},t)}));return function(e,i){return t.apply(this,arguments)}}()),M()(u()(i),"handleZoomOut",function(){i.setState({zoom:!1})}),M()(u()(i),"handleSwitchDataSet",function(t){var e=i.getCurrentData().visibled,a=void 0===e?[]:e;a.includes(t)?i.setCurrentData({visibled:a.filter(function(e){return e!==t})}):i.setCurrentData({visibled:[].concat(n()(a),[t])})}),M()(u()(i),"handleSelectOneVisibleDataSet",function(t){var e=i.getCurrentData(),a=e.dataset,n=void 0===a?[]:a,o=e.visibled,s=void 0===o?[]:o;1===s.length&&s[0]===t?i.setCurrentData({visibled:n.map(function(t){return t.id})}):i.setCurrentData({visibled:[t]})}),i}return x()(e,t),m()(e,[{key:"componentDidMount",value:function(){var t=this;this.prepareOwnElement();var e=+(window.innerWidth/40).toFixed(2);e>16&&(e=16),this.setState({fontSize:e,init:!0,layout:{width:window.innerWidth,height:this.element.clientHeight}}),this.handleLoadDataCharts(),setInterval(function(){var e=window.innerWidth,i=t.element.clientHeight;e===t.state.layout.width&&i===t.state.layout.height||t.setState({layout:{width:window.innerWidth,height:t.element.clientHeight,tt:1}})},100)}},{key:"componentDidUpdate",value:function(t,e){var i=this.props,a=i.arcMode,n=i.mode,o=this.state,s=o.zoom,r=o.fontSize,c=o.loading,l=o.layout,h=o.data;t.arcMode===a&&e.zoom===s&&e.fontSize===r&&e.loading===c&&e.layout===l&&t.mode===n&&e.data===h||this.chart.setProps({zoom:!1!==s,arcMode:!1!==s&&a,fontSize:r,loading:c,colors:Q[n],layout:l,mode:n,data:!1===s?h:s})}},{key:"attachEvents",value:function(){var t=this;window.onresize=I(function(){t.setState({layout:{width:t.element.clientWidth,height:t.element.clientHeight}}),t.updateFontSize()},100)}},{key:"getCurrentData",value:function(){var t=this.state,e=t.data,i=t.zoom,a=void 0!==i&&i;return!1!==a?a:e}},{key:"setCurrentData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.state,i=e.data,a=e.zoom,n=void 0!==a&&a;!1!==n?this.setState({zoom:c()({},n,t)}):this.setState({data:c()({},i,t)})}},{key:"prepareOwnElement",value:function(){var t=this.state.mode;this.ownElement.classList.toggle(xt.a.mode_night,"night"===t),this.ownElement.classList.add(xt.a.app)}},{key:"loadData",value:function(){var t=h()(s.a.mark(function t(e){var i,a,n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(e);case 2:return i=t.sent,a=JSON.parse(i),n=new yt(a),t.abrupt("return",n);case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"setDataChart",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Chart",i=t.getCharts(),a=t.getXAsix();this.setState({data:{title:e,scroll:100,width:25,dataset:i.map(function(t){return c()({},t,{uid:"chart-".concat(t.id)})}),labels:a,visibled:i.map(function(t){return t.id}),yScaled:t.IsYScaled(),
//!!dataJson.y_scaled,
stacked:t.IsStacked(),
//!!dataJson.stacked,
percentage:t.IsPercentage()}})}},{key:"handleLoadDataCharts",value:function(){var t=h()(s.a.mark(function t(){var e,i,a,n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props,i=e.name,a=e.dataUrl,this.setState({loading:!0}),t.next=4,this.loadData(a);case 4:n=t.sent,this.setDataChart(n,i),this.setState({loading:!1});case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"updateFontSize",value:function(){var t=+(window.innerWidth/40).toFixed(2);t>16&&(t=16),this.state.fontSize!==t&&this.setState({fontSize:t})}},{key:"handleUpdateMiniMap",value:function(t){var e=t.width,i=t.scroll;this.setCurrentData({width:e,scroll:i})}},{key:"render",value:function(){var t=this.props,e=t.animateScale,i=void 0===e||e,a=t.zoomType,n=void 0===a?"none":a,o=t.mode,s=this.state,r=s.loading,c=void 0!==r&&r,l=s.zoom,h=void 0!==l&&l,d=s.layout,u=s.data,p=s.fontSize,f=void 0===p?16:p;return this.chart=new Ot({animateScale:i,arcMode:!1,zoomType:n,zoom:h,fontSize:f,loading:c,colors:Q[o],layout:d,mode:o,data:u,onSwitchVisible:this.handleSwitchDataSet.bind(this),onSelectOneVisible:this.handleSelectOneVisibleDataSet.bind(this),onChangeOffsets:this.handleUpdateMiniMap.bind(this),onZoom:this.handleZoom.bind(this),onZoomOut:this.handleZoomOut.bind(this)}),this.element=k("div",{className:xt.a.app,style:"font-size: ".concat(f,"px")}),this.chart.renderDom(this.element),this.element}}],[{key:"getXLabelText",value:function(t){var e=new Date(t),i=q[e.getMonth()],a=e.getDate(),n=e.getFullYear();return"".concat(a," ").concat(i," ").concat(n)}},{key:"calcLimitOffset",value:function(t,e,i){var a=t>0?Math.ceil(t/100*e):0,n=t>0?Math.ceil(t/100*i)-a:0;return isNaN(a)&&(a=0,console.warn("[App][calcLimitOffset] invalid params:",{length:t,width:e,scroll:i})),isNaN(n)&&(n=0,console.warn("[App][calcLimitOffset] invalid params:",{length:t,width:e,scroll:i})),{limit:a,offset:n}}}]),e}(A);M()(Et,"defaultProps",{mode:$,animateScale:!0,arcMode:!1});var Tt=Et,Pt=i(17),Nt=i.n(Pt),Ft=function(t){function e(){var t,i;f()(this,e);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return i=y()(this,(t=g()(e)).call.apply(t,[this].concat(n))),M()(u()(i),"state",{value:$}),i}return x()(e,t),m()(e,[{key:"componentDidUpdate",value:function(){this.colorSwitcherItem.innerText=K[this.state.value]}},{key:"handleToggle",value:function(){var t=this.state.value===$?"night":$;this.setState({value:t}),this.props.onToggle(t),this.element.classList.toggle(Nt.a.mode_night,"night"===t)}},{key:"render",value:function(){var t=this.state.value,e=void 0===t?$:t;return this.colorSwitcherItem=k("div",{className:Nt.a.color__switcher__item,text:K[e],onClick:this.handleToggle.bind(this)}),this.element=k("div",{className:Nt.a.color__switcher,children:this.colorSwitcherItem}),this.element}}]),e}(A),Ct=function(t){return function(e){var i=new Date(e),a=i.getFullYear(),n=i.getMonth()+1,o=i.getDate();1==="".concat(n).length&&(n="0".concat(n)),1==="".concat(o).length&&(o="0".concat(o));var s="".concat(a,"-").concat(n);return"".concat(t,"/").concat(s,"/").concat(o,".json")}};-1===window.location.pathname.indexOf("stage-2.html")?(window.app0=new Tt({name:"Chart 1",dataUrl:"data/data.0.json"}),window.app0.renderDom(document.getElementById("app0")),window.app1=new Tt({name:"Chart 2",dataUrl:"data/data.1.json"}),window.app1.renderDom(document.getElementById("app1")),window.app2=new Tt({name:"Chart 3",dataUrl:"data/data.2.json"}),window.app2.renderDom(document.getElementById("app2")),window.app3=new Tt({name:"Chart 4",dataUrl:"data/data.3.json"}),window.app3.renderDom(document.getElementById("app3")),window.app4=new Tt({name:"Chart 5",dataUrl:"data/data.4.json"}),window.app4.renderDom(document.getElementById("app4"))):window.location.pathname.indexOf("stage-2.html")>-1&&(window.app0=new Tt({name:"Followers",dataUrl:"data/new/1/overview.json",zoomType:"byHours",getZoomedDataUrl:Ct("data/new/1")}),window.app0.renderDom(document.getElementById("app0")),window.app1=new Tt({name:"Interactions",dataUrl:"data/new/2/overview.json",zoomType:"byHours",getZoomedDataUrl:Ct("data/new/2")}),window.app1.renderDom(document.getElementById("app1")),window.app2=new Tt({name:"Chart 3",dataUrl:"data/new/3/overview.json",zoomType:"byHours",getZoomedDataUrl:Ct("data/new/3")}),window.app2.renderDom(document.getElementById("app2")),window.app3=new Tt({name:"Views",dataUrl:"data/new/4/overview.json",zoomType:"by3Days",getZoomedDataUrl:Ct("data/new/4")}),window.app3.renderDom(document.getElementById("app3")),window.app4=new Tt({name:"Chart 5",dataUrl:"data/new/5/overview.json",zoomType:"byDay",arcMode:!0}),window.app4.renderDom(document.getElementById("app4"))),window.colorSwitcher=new Ft({onToggle:function(t){window.app0.setProps({mode:t}),window.app1.setProps({mode:t}),window.app2.setProps({mode:t}),window.app3.setProps({mode:t}),window.app4.setProps({mode:t})}}),window.colorSwitcher.renderDom(document.getElementById("color_switcher"))}]);
//# sourceMappingURL=main.6439221441ec595247b9.js.map